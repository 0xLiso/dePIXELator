// ZORTON_0800.c
// Generated by decompiling ZORTON.EXE
// using Reko decompiler version 0.9.2.3.

#include "ZORTON_0800.h"

// 0800:0157: void fn0800_0157()
// Called from:
//      fn0800_0362
void fn0800_0157()
{
	fn0800_0231(&Eq_54::tFFFF9BDA, &Eq_54::tFFFF9BDA, seg0800->t0291);
}

// 0800:016A: void fn0800_016A()
// Called from:
//      fn0800_0362
void fn0800_016A()
{
}

// 0800:016B: void fn0800_016B(Stack Eq_60 bArg04)
// Called from:
//      fn0800_0362
void fn0800_016B(Eq_60 bArg04)
{
	msdos_terminate(bArg04);
}

// 0800:01C0: Register word16 fn0800_01C0(Register Eq_2 ds)
// Called from:
//      fn0800_0362
word16 fn0800_01C0(Eq_2 ds)
{
	msdos_set_interrupt_vector(0x00, *((word32) ds + 91));
	msdos_set_interrupt_vector(0x04, *((word32) ds + 95));
	msdos_set_interrupt_vector(0x05, *((word32) ds + 99));
	<anonymous> * ds_dx_36 = *((word32) ds + 0x0067);
	msdos_set_interrupt_vector(0x06, ds_dx_36);
	return (word16) ds_dx_36;
}

// 0800:0231: void fn0800_0231(Register (memptr (ptr16 Eq_54) Eq_52) si, Register (memptr (ptr16 Eq_54) Eq_52) di, Register (ptr16 Eq_54) es)
// Called from:
//      fn0800_0157
void fn0800_0231(struct Eq_52 Eq_54::* si, struct Eq_52 Eq_54::* di, struct Eq_54 * es)
{
	while (true)
	{
		cu8 ah_4 = 0x00;
		struct Eq_52 Eq_54::* dx_13 = di;
		struct Eq_52 Eq_54::* bx_51;
		for (bx_51 = si; bx_51 != di; ++bx_51)
		{
			if ((es->*bx_51).b0000 != ~0x00 && (es->*bx_51).b0001 >= ah_4)
			{
				ah_4 = (es->*bx_51).b0001;
				dx_13 = bx_51;
			}
		}
		if (dx_13 == di)
			break;
		(es->*dx_13).b0000 = ~0x00;
		if ((es->*dx_13).b0000 != 0x00)
			(es->*dx_13).t0002();
		else
			SEQ(0x0800, (es->*dx_13).t0002)();
	}
}

// 0800:02EC: void fn0800_02EC(Register Eq_2 ds, Stack word16 wArg04, Stack word16 wArg06)
// Called from:
//      main
void fn0800_02EC(Eq_2 ds, word16 wArg04, word16 wArg06)
{
	*((word32) ds + 0x0000AB3A) = wArg06;
	*((word32) ds + 43832) = wArg04;
	fn0800_0445(0x23, &seg0800->t02C3);
}

// 0800:0312: Register Eq_2 fn0800_0312(Register Eq_2 ds, Stack Eq_2 wArg06, Register out ptr16 bxOut, Register out (ptr16 Eq_155) dsOut)
// Called from:
//      fn2331_0118
Eq_2 fn0800_0312(Eq_2 ds, Eq_2 wArg06, ptr16 & bxOut, struct Eq_155 & dsOut)
{
	struct Eq_155 * ds_16;
	ptr16 bx_19;
	word16 cx_39;
	word16 dx_40;
	fn0800_1C24(ds, wArg06, out cx_39, out dx_40, out bx_19, out ds_16);
	bxOut = bx_19;
	dsOut = ds_16;
	return wArg06;
}

// 0800:0362: Register word16 fn0800_0362(Register Eq_2 ds, Stack Eq_60 wArg02, Stack word16 wArg04, Stack word16 wArg06)
// Called from:
//      fn0800_03B9
word16 fn0800_0362(Eq_2 ds, Eq_60 wArg02, word16 wArg04, word16 wArg06)
{
	if (wArg06 == 0x00)
	{
		while (*((word32) ds + 0x000096E0) != 0x00)
		{
			--*((word32) ds + 0x000096E0);
			ui16 bx_23 = *((word32) ds + 0x000096E0);
			word16 cx_33;
			SEQ(ds, 0xAAB8)[bx_23 * 0x04]();
		}
		fn0800_0157();
		word16 cx_46;
		word16 bx_47;
		(*((word32) ds + 38884))();
	}
	word16 dx_55 = fn0800_01C0(ds);
	fn0800_016A();
	mp16 sp_66 = fp - 4;
	if (wArg04 != 0x00)
		return dx_55;
	if (wArg06 == 0x00)
	{
		(*((word32) ds + 38888))();
		word16 cx_76;
		word16 bx_77;
		(*((word32) ds + 38892))();
	}
	union Eq_60 Eq_202::* sp_87 = sp_66 - 2;
	ss->*sp_87 = wArg02;
	fn0800_016B(ss->*sp_87);
}

// 0800:03B9: Register word16 fn0800_03B9(Register Eq_2 ds, Stack Eq_60 wArg04)
// Called from:
//      fn209F_0002
//      main
//      fn268D_03E2
word16 fn0800_03B9(Eq_2 ds, Eq_60 wArg04)
{
	return fn0800_0362(ds, wArg04, 0x00, 0x00);
}

// 0800:03F4: void fn0800_03F4(Register cu16 cx, Stack segptr32 ptrArg04, Stack Eq_249 ptrArg08)
// Called from:
//      fn0CE0_08FC
//      fn0F2B_130A
//      fn0F2B_153F
//      fn226D_00F9
//      fn226D_057F
//      fn268D_08C8
void fn0800_03F4(cu16 cx, segptr32 ptrArg04, Eq_249 ptrArg08)
{
	struct Eq_250 * ds_62 = SLICE(ptrArg04, selector, 16);
	struct Eq_252 Eq_250::* si_41 = (word16) ptrArg04;
	struct Eq_254 * es_64 = SLICE(ptrArg08, selector, 16);
	struct Eq_256 Eq_254::* di_44 = (word16) ptrArg08;
	uint16 cx_22;
	for (cx_22 = cx >> 0x01; cx_22 != 0x00; --cx_22)
	{
		(es_64->*di_44).t0000 = (ds_62->*si_41).t0000;
		si_41 += 2;
		di_44 += 2;
	}
	ui16 cx_26;
	for (cx_26 = cx_22 * 0x02 + (cx >> 0x01 < 0x00); cx_26 != 0x00; --cx_26)
	{
		(es_64->*di_44).t0000 = (ds_62->*si_41).t0000;
		++si_41;
		++di_44;
	}
}

// 0800:0410: void fn0800_0410(Stack (ptr32 Eq_296) ptrArg04)
// Called from:
//      fn0800_10B1
void fn0800_0410(struct Eq_296 * ptrArg04)
{
	byte dh_10;
	word16 cx_11;
	byte dl_12 = msdos_get_system_date(out dh_10, out cx_11);
	ptrArg04->w0000 = cx_11;
	ptrArg04->w0002 = SEQ(dh_10, dl_12);
}

// 0800:0423: void fn0800_0423(Stack (ptr32 Eq_314) ptrArg04)
// Called from:
//      fn0800_10B1
void fn0800_0423(struct Eq_314 * ptrArg04)
{
	byte ch_10;
	byte dh_11;
	byte dl_12;
	byte cl_13 = msdos_get_system_time(out ch_10, out dh_11, out dl_12);
	ptrArg04->w0000 = SEQ(ch_10, cl_13);
	ptrArg04->w0002 = SEQ(dh_11, dl_12);
}

// 0800:0436: Register word16 fn0800_0436(Stack byte bArg04, Register out (ptr16 Eq_338) dxOut)
// Called from:
//      fn2057_005C
//      fn2141_020E
word16 fn0800_0436(byte bArg04, struct Eq_338 & dxOut)
{
	word32 es_bx_11 = msdos_get_interrupt_vector(bArg04);
	dxOut = SLICE(es_bx_11, selector, 16);
	return (word16) es_bx_11;
}

// 0800:0445: void fn0800_0445(Stack byte bArg04, Stack Eq_147 ptrArg06)
// Called from:
//      fn0800_02EC
//      fn2057_005C
//      fn2057_011E
//      fn2141_020E
//      fn2141_0271
void fn0800_0445(byte bArg04, Eq_147 ptrArg06)
{
	msdos_set_interrupt_vector(bArg04, ptrArg06);
}

// 0800:0504: Register Eq_2 fn0800_0504(Register Eq_2 ax, Register cu8 cl, Register cui16 dx, Register out Eq_354 clOut, Register out Eq_355 dxOut)
// Called from:
//      fn0800_1FCB
Eq_2 fn0800_0504(Eq_2 ax, cu8 cl, cui16 dx, union Eq_354 & clOut, union Eq_355 & dxOut)
{
	if (cl >= 0x10)
	{
		clOut = cl - 0x10;
		dxOut = ax << cl - 0x10;
		return 0x00;
	}
	else
	{
		cu8 cl_28 = -cl;
		clOut = cl_28 + 0x10;
		dxOut = dx << cl | ax >> cl_28 + 0x10;
		return ax << cl;
	}
}

// 0800:0525: Register Eq_372 fn0800_0525(Register Eq_372 ax, Register ci16 cx, Register Eq_2 dx, Register cup16 bx, Register out ptr16 dxOut)
// Called from:
//      fn0800_1FCB
Eq_372 fn0800_0525(Eq_372 ax, ci16 cx, Eq_2 dx, cup16 bx, ptr16 & dxOut)
{
	byte cl_21 = (byte) cx;
	if (cx >= 0x00)
	{
		ptr16 dx_25;
		word16 cx_55;
		Eq_372 ax_22 = fn0800_0538(ax, cl_21, dx, bx, out cx_55, out dx_25);
		dxOut = dx_25;
		return ax_22;
	}
	else
	{
		ptr16 dx_33;
		word16 cx_56;
		Eq_372 ax_30 = fn0800_052C(ax, cx, dx, bx, out cx_56, out dx_33);
		dxOut = dx_33;
		return ax_30;
	}
}

// 0800:0528: Register ci16 fn0800_0528(Register Eq_372 ax, Register ci16 cx, Register Eq_2 dx, Register cup16 bx)
// Called from:
//      fn1D10_1153
ci16 fn0800_0528(Eq_372 ax, ci16 cx, Eq_2 dx, cup16 bx)
{
	byte cl_12 = (byte) cx;
	if (cx >= 0x00)
	{
		word16 dx_16;
		ci16 cx_40;
		fn0800_0538(ax, cl_12, dx, bx, out cx_40, out dx_16);
		return cx_40;
	}
	else
	{
		ci16 cx_23;
		word16 dx_24;
		fn0800_052C(ax, cx, dx, bx, out cx_23, out dx_24);
		return cx_23;
	}
}

// 0800:052C: Register Eq_372 fn0800_052C(Register Eq_372 ax, Register ci16 cx, Register Eq_2 dx, Register cup16 bx, Register out ptr16 cxOut, Register out ptr16 dxOut)
// Called from:
//      fn0800_0525
//      fn0800_0528
Eq_372 fn0800_052C(Eq_372 ax, ci16 cx, Eq_2 dx, cup16 bx, ptr16 & cxOut, ptr16 & dxOut)
{
	cup16 bx_5 = ~bx;
	byte cl_21 = (byte) ((bool) (bx_5 < 0x01) + ~cx);
	cu16 ax_14 = ax - (bx_5 + 0x01);
	byte al_30 = (byte) ax_14;
	if (ax_14 < 0x00)
		dx -= 0x1000;
	cxOut = SEQ(al_30, 0x04);
	dxOut = dx - SEQ(cl_21 << 0x04, 0x00) + (ax_14 >> 0x04);
	return SEQ(SLICE(ax_14 >> 0x04, byte, 8), al_30) & 0x0F;
}

// 0800:0538: Register Eq_372 fn0800_0538(Register Eq_372 ax, Register byte cl, Register Eq_2 dx, Register cup16 bx, Register out Eq_2 cxOut, Register out ptr16 dxOut)
// Called from:
//      fn0800_0525
//      fn0800_0528
Eq_372 fn0800_0538(Eq_372 ax, byte cl, Eq_2 dx, cup16 bx, union Eq_2 & cxOut, ptr16 & dxOut)
{
	byte dh_17 = SLICE(dx, byte, 8);
	byte dl_28 = (byte) dx;
	cu16 ax_6 = (word16) ax + bx;
	byte al_22 = (byte) ax_6;
	if (ax_6 < 0x00)
	{
		dh_17 = SLICE((word32) dx + 0x00001000, byte, 8);
		dl_28 = (byte) ((word32) dx + 0x00001000);
	}
	cxOut.u0 = <invalid>;
	dxOut = SEQ(dh_17 + (cl << 0x04), dl_28) + (ax_6 >> 0x04);
	return SEQ(SLICE(ax_6 >> 0x04, byte, 8), al_22) & 0x0F;
}

// 0800:0585: Register cu16 fn0800_0585(Register cu16 ax, Register Eq_2 cx, Register uint16 dx, Register Eq_372 bx, Register out Eq_2 cxOut, Register out Eq_495 dxOut, Register out Eq_496 bxOut)
// Called from:
//      fn0800_2056
cu16 fn0800_0585(cu16 ax, Eq_2 cx, uint16 dx, Eq_372 bx, union Eq_2 & cxOut, union Eq_495 & dxOut, union Eq_496 & bxOut)
{
	bcu8 dh = SLICE(dx, byte, 8);
	uint16 dx_26 = (dx << 0x04) + ax;
	Eq_496 bx_35 = (word16) bx + (cx << 0x04);
	cxOut.u0 = <invalid>;
	uint24 ch_dx_53 = SEQ((dh >> 0x04) + (dx_26 < 0x00), dx_26) - SEQ((SLICE(cx, byte, 8) >> 0x04) + (bx_35 < 0x00), bx_35);
	dxOut.u0 = (int16) SLICE(ch_dx_53, byte, 16);
	bxOut = bx_35;
	return (word16) ch_dx_53;
}

// 0800:05AD: Register word16 fn0800_05AD(Register Eq_2 ds, Stack Eq_2 wArg02)
// Called from:
//      fn0800_06AB
//      fn0800_0865
//      fn0800_0894
//      fn0800_1123
//      fn0800_222A
//      fn0800_2367
//      fn0800_28E6
//      fn0800_2A76
//      fn0800_2A93
//      fn0800_2ABB
//      fn0800_2AD9
//      fn0800_2D71
//      fn0800_2DA4
//      fn0800_2DD1
//      fn0800_35E8
//      fn0800_3615
//      fn0800_3784
//      fn0800_3C87
//      fn0800_44C8
//      fn0800_4619
word16 fn0800_05AD(Eq_2 ds, Eq_2 wArg02)
{
	int16 si_17;
	Eq_2 si_13 = wArg02;
	if (wArg02 >= 0x00)
	{
		if (wArg02 <= 88)
			goto l0800_05C0;
	}
	else
	{
		si_17 = -wArg02;
		if (si_17 <= 0x30)
		{
			((word32) ds + 0x000099AE)->u0 = ~0x00;
l0800_05DA:
			*((word32) ds + 0x007F) = si_17;
			return ~0x00;
		}
	}
	si_13.u0 = 0x57;
l0800_05C0:
	*((word32) ds + 0x000099AE) = si_13;
	si_17 = (int16) (ds->*((word32) si_13 + 0x000099B0));
	goto l0800_05DA;
}

// 0800:05F8: Register cui16 fn0800_05F8(Stack int16 wArg04)
// Called from:
//      fn0800_2F10
cui16 fn0800_05F8(int16 wArg04)
{
	cui16 dx_11;
	msdos_ioctl_get_device_info(wArg04, out dx_11);
	return dx_11 & 0x80;
}

// 0800:0609: void fn0800_0609(Stack Eq_561 bArg02, Stack Eq_562 bArg04, Stack Eq_563 wArg06, Stack Eq_2 ptrArg08, Stack Eq_565 wArg0C, Stack Eq_2 wArg0E)
// Called from:
//      fn0800_068B
//      fn0800_1153
void fn0800_0609(Eq_561 bArg02, Eq_562 bArg04, Eq_563 wArg06, Eq_2 ptrArg08, Eq_565 wArg0C, Eq_2 wArg0E)
{
	struct Eq_567 * es_34 = SLICE(ptrArg08, selector, 16);
	byte Eq_567::* di_121 = (word16) ptrArg08;
	cu8 bl_23 = (byte) wArg06;
	if (wArg06 > 0x24 || bl_23 < 0x02)
	{
l0800_0679:
		es_34->*di_121 = 0x00;
		return;
	}
	Eq_565 ax_26 = wArg0C;
	Eq_2 cx_28 = wArg0E;
	if (wArg0E < 0x00 && bArg04 != 0x00)
	{
		ptrArg08->u0 = 0x2D;
		ax_26 = -wArg0C;
		++di_121;
		cx_28 = -wArg0E - (ax_26 == 0x00);
	}
	byte Eq_609::* si_104 = fp - 0x24;
	if (cx_28 != 0x00)
	{
		do
		{
			uint32 dx_ax_52 = (uint32) cx_28;
			uint32 dx_ax_60 = SEQ((uint16) (dx_ax_52 % wArg06), ax_26);
			ss->*si_104 = (byte) (uint16) (dx_ax_60 % wArg06);
			Eq_2 ax_56 = (uint16) (dx_ax_52 /u wArg06);
			cx_28 = ax_56;
			ax_26.u1 = (uint16) (dx_ax_60 /u wArg06);
			++si_104;
		} while (ax_56 != 0x00);
l0800_065B:
		if (ax_26 == 0x00)
		{
			word16 cx_101 = si_104 + (0x24 - fp);
			do
			{
				byte al_113;
				--si_104;
				cu8 al_108 = ss->*si_104;
				if (al_108 < 0x0A)
					al_113 = al_108 + 0x30;
				else
					al_113 = (byte) bArg02.u0 + (al_108 - 0x0A);
				es_34->*di_121 = al_113;
				++di_121;
				--cx_101;
			} while (cx_101 != 0x00);
			goto l0800_0679;
		}
	}
	uint32 dx_ax_79 = (uint32) ax_26;
	ss->*si_104 = (byte) (uint16) (dx_ax_79 % wArg06);
	ax_26.u1 = (uint16) (dx_ax_79 /u wArg06);
	++si_104;
	goto l0800_065B;
}

// 0800:068B: void fn0800_068B(Stack Eq_2 dwArg02, Stack Eq_565 wArg06)
// Called from:
//      fn0800_06D4
void fn0800_068B(Eq_2 dwArg02, Eq_565 wArg06)
{
	fn0800_0609(0x61, 0x00, 0x0A, dwArg02, wArg06, 0x00);
}

// 0800:06AB: Register Eq_2 fn0800_06AB(Register Eq_2 ds, Stack Eq_2 wArg04, Stack Eq_2 dwArg06, Stack Eq_679 bArg0A, Register out ptr16 cxOut, Register out ptr16 dxOut, Register out Eq_2 bxOut)
// Called from:
//      fn0800_1109
//      fn0800_3106
//      fn0800_380A
//      fn0800_3C87
//      fn0800_44C8
//      fn0CE0_0007
//      fn1D10_09C2
//      fn1D10_0FB3
//      fn1D10_1368
//      fn1ED0_0009
//      fn209F_02E3
//      fn209F_0516
//      fn209F_08D2
//      fn2476_0630
//      fn263F_033E
//      main
Eq_2 fn0800_06AB(Eq_2 ds, Eq_2 wArg04, Eq_2 dwArg06, Eq_679 bArg0A, ptr16 & cxOut, ptr16 & dxOut, union Eq_2 & bxOut)
{
	ptr16 wArg08 = SLICE(dwArg06, word16, 16);
	ptr16 wArg06 = (word16) dwArg06;
	SEQ(ds, 0x9982)[wArg04 * 0x02] &= ~0x0200;
	Eq_2 ax_21 = SEQ(66, bArg0A);
	ptr16 dx_19 = wArg06;
	if (msdos_set_file_position(wArg04, dwArg06, bArg0A, SEQ(wArg06, ax_21)))
	{
		word32 dx_ax_32 = (word32) fn0800_05AD(ds, ax_21);
		ax_21 = (word16) dx_ax_32;
		dx_19 = SLICE(dx_ax_32, word16, 16);
	}
	cxOut = wArg08;
	dxOut = dx_19;
	bxOut = wArg04;
	return ax_21;
}

// 0800:06D4: void fn0800_06D4(Register Eq_2 ds, Stack Eq_565 wArg02, Stack cui16 wArg04, Stack cui16 wArg06, Stack Eq_722 dwArg08)
// Called from:
//      fn0800_2B50
void fn0800_06D4(Eq_2 ds, Eq_565 wArg02, cui16 wArg04, cui16 wArg06, Eq_722 dwArg08)
{
	cui16 wArg08 = (word16) dwArg08;
	cui16 wArg0A = SLICE(dwArg08, word16, 16);
	Eq_722 dwArg08_140 = dwArg08;
	if ((wArg08 | wArg0A) == 0x00)
		dwArg08_140 = SEQ(ds, 43836);
	Eq_2 dx_ax_143;
	if ((wArg04 | wArg06) == 0x00)
		dx_ax_143 = SEQ(ds, 0x9A0A);
	else
		dx_ax_143 = SEQ(wArg06, wArg04);
	fn0800_16B5(dwArg08_140, dx_ax_143);
	Eq_2 dx_ax_146 = <invalid>;
	fn0800_068B(dx_ax_146, wArg02);
	fn0800_3DA7(dwArg08_140, SEQ(ds, 0x9A0E));
}

// 0800:07B4: Register Eq_756 fn0800_07B4(Register Eq_2 ds, Stack Eq_2 wArg04, Register out Eq_759 dxOut, Register out Eq_760 bpOut, Register out (ptr16 Eq_761) esOut, Register out Eq_2 dsOut)
// Called from:
//      fn1744_000A
//      fn2331_0000
Eq_756 fn0800_07B4(Eq_2 ds, Eq_2 wArg04, union Eq_759 & dxOut, union Eq_760 & bpOut, struct Eq_761 & esOut, union Eq_2 & dsOut)
{
	Eq_2 ax_18;
	mp16 sp_10 = fp - 0x08;
	if (wArg04 != 0x00)
		ax_18 = wArg04;
	else
		ax_18.u0 = 0x01;
	while (true)
	{
		union Eq_2 Eq_774::* sp_23 = sp_10 - 2;
		ss->*sp_23 = ax_18;
		struct Eq_778 Eq_774::* bp_29;
		Eq_759 dx_33;
		struct Eq_761 * es_34;
		word16 bx_98;
		Eq_756 ax_28 = fn0800_1D2E(ds, ss->*sp_23, out dx_33, out bx_98, out bp_29, out es_34, out ds);
		(ss->*bp_29).tFFFFFFFE = dx_33;
		(ss->*bp_29).tFFFFFFFC = ax_28;
		if ((ax_28 | dx_33) != 0x00 || (*((word32) ds + 0x0000AB4A) | *((word32) ds + 0x0000AB4C)) == 0x00)
			break;
		(*((word32) ds + 0x0000AB4A))();
	}
	Eq_756 ax_64 = (ss->*bp_29).tFFFFFFFC;
	Eq_760 bp_68 = (ss->*bp_29).t0000;
	dxOut = (ss->*bp_29).tFFFFFFFE;
	bpOut = bp_68;
	esOut = es_34;
	dsOut = ds;
	return ax_64;
}

// 0800:07F6: Register uint16 fn0800_07F6(Register uint16 ax, Register uint16 cx, Register uint16 dx, Register uint16 bx, Register out ptr16 dxOut)
// Called from:
//      fn0800_083F
//      fn0800_1A83
//      fn0800_3E5F
//      fn0800_418D
uint16 fn0800_07F6(uint16 ax, uint16 cx, uint16 dx, uint16 bx, ptr16 & dxOut)
{
	uint16 ax_15 = dx;
	if (dx != 0x00)
		ax_15 = (word16) (bx * dx);
	if (cx != 0x00)
		ax_15 = (word16) (ax * cx) + ax_15;
	uint32 dx_ax_42 = bx * ax;
	dxOut = SLICE(dx_ax_42, word16, 16) + ax_15;
	return (word16) dx_ax_42;
}

// 0800:080D: FlagGroup Eq_2 fn0800_080D(Register Eq_372 ax, Register uint16 cx, Register Eq_2 dx, Register cu16 bx, Register out ptr16 cxOut, Register out ptr16 dxOut, Register out Eq_857 bxOut)
// Called from:
//      fn0800_1F8C
//      fn0800_1FCB
Eq_2 fn0800_080D(Eq_372 ax, uint16 cx, Eq_2 dx, cu16 bx, ptr16 & cxOut, ptr16 & dxOut, union Eq_857 & bxOut)
{
	byte bl = (byte) bx;
	ptr16 dx_15 = (word32) dx + (ax >> 0x04);
	ptr16 cx_24 = cx + (bx >> 0x04);
	Eq_857 bx_30 = SEQ(SLICE(bx >> 0x04, byte, 8), bl) & 0x0F;
	cxOut = cx_24;
	dxOut = dx_15;
	bxOut = bx_30;
	return <invalid>;
}

// 0800:082E: void fn0800_082E(Register Eq_2 ds, Stack uint16 wArg04)
// Called from:
//      fn1197_09AC
void fn0800_082E(Eq_2 ds, uint16 wArg04)
{
	*((word32) ds + 39446) = 0x00;
	*((word32) ds + 39444) = wArg04;
}

// 0800:083F: Register cui16 fn0800_083F(Register Eq_2 ds)
// Called from:
//      fn1F0F_0BF7
//      fn268D_0282
cui16 fn0800_083F(Eq_2 ds)
{
	word16 dx_11;
	cup16 ax_10 = fn0800_07F6(20021, *((word32) ds + 39446), 0x015A, *((word32) ds + 39444), out dx_11);
	*((word32) ds + 39446) = (uint16) ((bool) (ax_10 < 0x01) + dx_11);
	*((word32) ds + 39444) = ax_10 + 0x01;
	return (word16) (int32) *((word32) ds + 39446) & 0x7FFF;
}

// 0800:0865: Register Eq_2 fn0800_0865(Register Eq_2 ds, Stack Eq_2 wArg04, Stack Eq_2 ptrArg06, Stack Eq_915 wArg0A, Register out Eq_915 cxOut, Register out ptr16 dxOut, Register out Eq_2 bxOut)
// Called from:
//      fn0800_3C87
Eq_2 fn0800_0865(Eq_2 ds, Eq_2 wArg04, Eq_2 ptrArg06, Eq_915 wArg0A, union Eq_915 & cxOut, ptr16 & dxOut, union Eq_2 & bxOut)
{
	Eq_2 ax_23;
	Eq_2 wLoc04_52;
	Eq_2 bx_10 = wArg04 << 0x01;
	if ((SEQ(ds, 0x9982)[wArg04 * 0x02] & 0x02) != 0x00)
		wLoc04_52.u0 = 0x05;
	else
	{
		bx_10 = wArg04;
		cx = wArg0A;
		dx = (word16) ptrArg06;
		if (!msdos_read_file(wArg04, wArg0A, ptrArg06, out ax_23))
			goto l0800_0892;
		wLoc04_52 = ax_23;
	}
	ax_23 = fn0800_05AD(ds, wLoc04_52);
l0800_0892:
	cxOut = cx;
	dxOut = dx;
	bxOut = bx_10;
	return ax_23;
}

// 0800:0894: void fn0800_0894(Register Eq_947 al, Register Eq_2 ds, Stack Eq_2 ptrArg04)
// Called from:
//      fn0E31_0002
//      fn226D_00F9
void fn0800_0894(Eq_947 al, Eq_2 ds, Eq_2 ptrArg04)
{
	Eq_2 ax_21 = SEQ(0x41, al);
	if (msdos_delete_file(SLICE(ptrArg04, selector, 16), (word16) ptrArg04))
		fn0800_05AD(ds, ax_21);
}

// 0800:08AC: Register Eq_962 fn0800_08AC(Register Eq_962 di, Register Eq_2 ds, Stack (memptr Eq_2 code) wArg02, Stack (memptr Eq_2 code) wArg04, Stack word16 wArg06, Stack Eq_2 wArg08, Stack (memptr Eq_2 Eq_968) wArg0A, Stack Eq_2 psegArg0C)
// Called from:
//      fn0800_3060
Eq_962 fn0800_08AC(Eq_962 di, Eq_2 ds, <anonymous> Eq_2::* wArg02, <anonymous> Eq_2::* wArg04, word16 wArg06, Eq_2 wArg08, struct Eq_968 Eq_2::* wArg0A, Eq_2 psegArg0C)
{
	mp16 fp;
	selector ss;
	Eq_962 di;
	Eq_2 ds;
	struct Eq_968 Eq_2::* wArg0A;
	Eq_2 psegArg0C;
	word16 wLoc0A;
	Eq_2 wArg08;
	word16 wArg06;
	<anonymous> Eq_2::* wArg02;
	<anonymous> Eq_2::* wArg04;
	wLoc08_1107.u0 = 0x00;
l0800_08DD:
	wLoc08_1377 = ϕ(wLoc08_1107, wLoc08_1209, wLoc08_1384, wLoc08_1385, wLoc08_1209, wLoc08_1209);
	wArg0A_1109 = ϕ(wArg0A, wArg0A_1113, wArg0A_1113, wArg0A_1121, wArg0A_1113, wArg0A_1113);
	di_1078 = ϕ(di, di_1079, di_1081, di_1082, di_543, di_91);
	Mem49 = ϕ(Mem45, Mem1015, Mem1016, Mem1017, Mem572, Mem515);
	si_50 = wArg0A_1109;
	do
	{
l0800_08E0:
		wArg0A_1618 = ϕ(wArg0A_1617, wArg0A_1617, wArg0A_1109);
		wLoc08_1209 = ϕ(wLoc08_1232, wLoc08_1210, wLoc08_1377);
		di_833 = ϕ(di_873, di_873, di_1078);
		si_56 = ϕ(si_851, si_851, si_50);
		Mem53 = ϕ(Mem971, Mem850, Mem49);
		al_57 = (ds->*si_56).b0000;
		si_58 = (struct Eq_968 Eq_2::*) &si_56->b0001;
		al_59 = al_57;
		if (al_57 == 0x00)
		{
			fn0800_0CC1(fp - 2, out di_66);
			return di_66;
		}
		if (al_57 == 0x25)
		{
			wLoc0C_1111.u0 = ~0x00;
			es_76 = psegArg0C;
			bLoc03_1112 = 0x20;
			while (true)
			{
				wLoc0C_1153 = ϕ(wLoc0C_1111, wLoc0C_1153, wLoc0C_1153, wLoc0C_1153, wLoc0C_1153, wLoc0C_1153, wLoc0C_1153, wLoc0C_1153, wLoc0C_1205, wLoc0C_1206);
				bLoc03_1114 = ϕ(bLoc03_1112, bLoc03_1207, bLoc03_1152, bLoc03_1115, bLoc03_1116, bLoc03_1114, bLoc03_1151, bLoc03_1150, bLoc03_1114, bLoc03_1114);
				di_87 = ϕ(di_833, di_91, di_91, di_91, di_91, di_91, di_91, di_91, di_792, di_792);
				Mem80 = ϕ(Mem77, Mem803, Mem485, Mem113, Mem117, Mem86, Mem481, Mem477, Mem790, Mem800);
				si_79 = ϕ(si_58, si_82, si_82, si_82, si_82, si_82, si_82, si_82, si_82, si_82);
				si_82 = (struct Eq_968 Eq_2::*) &si_79->b0001;
				ax_83.u0 = (int16) (ds->*si_79).b0000;
				wArg0A_1113 = si_82;
				di_91 = ax_83;
				if (ax_83 < 0x00)
					break;
				bx_107 = (uint16) (ds->*((word16) ax_83 + 39448));
				if (bx_107 > 0x15)
				{
					fn0800_0CC1(fp - 2, out di_822);
					return di_822;
				}
				switch (bx_107 << 0x01)
				{
				case 0x00:
				case 0x01:
				case 0x02:
					fn0800_0CC1(fp - 2, out di_812);
					return di_812;
				case 0x03:
					di_807 = di_87;
					al_830 = (byte) ax_83;
					goto l0800_08ED;
				case 0x04:
					bLoc03_1207 = bLoc03_1114 | 0x01;
					break;
				case 0x05:
					wLoc0C_1205 = ax_83 - 0x30;
					di_792 = wLoc0C_1153;
					if (wLoc0C_1153 >= 0x00)
						wLoc0C_1206 = ax_83 - 0x30 + SLICE(wLoc0C_1153 *u 0x0A, word16, 0);
					break;
				case 0x06:
					if ((bLoc03_1114 & 0x01) == 0x00)
						di_701 = fn0800_08C0(fp - 2, ds, out es_702);
					di_1073 = ϕ(di_91, di_701);
					es_1069 = ϕ(es_76, es_702);
					si_711 = wLoc0C_1153;
					if (wLoc0C_1153 < 0x00)
						si_715.u0 = 0x01;
					si_1071 = ϕ(si_711, si_715);
					if (wLoc0C_1153 != 0x00)
					{
						do
						{
							wLoc08_1189 = ϕ(wLoc08_1209, wLoc08_1190);
							di_735 = ϕ(di_1073, di_1074);
							si_734 = ϕ(si_1071, si_771);
							v65_721 = (word16) wLoc08_1189 + 1;
							SEQ(0x0800, wArg02)();
							wLoc08_1190 = v65_721;
							al_767 = (ss->*fp).b0002;
							if (ax_738 < 0x00)
							{
								fn0800_0CC1(&(ss->*(ss->*(fp - 2)).a0000).t0000, out di_757);
								return di_757;
							}
							if ((bLoc03_1114 & 0x01) == 0x00)
							{
								es_1069->*di_735 = al_767;
								di_769 = (word16) di_735 + 1;
							}
							di_1074 = ϕ(di_735, di_769);
							Mem781 = ϕ(Mem733, Mem768);
							si_771 = si_734 - 0x01;
						} while (si_771 > 0x00);
					}
					wLoc08_1384 = ϕ(wLoc08_1209, wLoc08_1190);
					di_1081 = ϕ(di_1073, di_1074);
					Mem779 = ϕ(Mem86, Mem781);
					Mem1016 = ϕ(Mem779, Mem786);
					goto l0800_08DD;
				case 0x07:
				case 0x08:
					si_579 = 0x0A;
					goto l0800_09E3;
				case 0x09:
					si_576 = 0x00;
					goto l0800_09E3;
				case 0x0A:
					fn0800_245A(ds);
					if (wLoc0A > 0x00)
					{
						if (((int16) bLoc03_1114 & 0x01) == 0x00)
						{
							di_543 = fn0800_08C0(&(ss->*(ss->*(fp - 2)).a0000).t0000, ds, out es_1631);
							fn0800_245E(ds);
						}
						else
							fn0800_2462(ds);
						goto l0800_08DD;
					}
					fn0800_2462(ds);
					if (wLoc0A < 0x00)
					{
						fn0800_0CC1(&(ss->*(ss->*(fp - 2)).a0000).t0000, out di_523);
						return di_523;
					}
					else
					{
						fn0800_0CD9(&(ss->*(ss->*(fp - 2)).a0000).t0000, out di_533);
						return di_533;
					}
				case 11:
					bLoc03_1152 = bLoc03_1114 | 0x08;
					break;
				case 0x0C:
					bLoc03_1151 = bLoc03_1114 | 0x02;
					break;
				case 0x0D:
					bLoc03_1150 = bLoc03_1114 | 0x04;
					break;
				case 0x0E:
					si_475 = 0x08;
					goto l0800_09E3;
				case 0x0F:
					bp_453 = fn0800_0B23(fp - 2, ds, out di_1628);
					fn0800_0B23(bp_453, ds, out di_468);
					return di_468;
				case 0x10:
					di_161 = fp - 44;
					cx_162 = 0x10;
					while (true)
					{
						di_447 = ϕ(di_161, di_449);
						Mem166 = ϕ(Mem158, Mem448);
						cx_163 = ϕ(cx_162, cx_450);
						if (cx_163 == 0x00)
							break;
						(ss->*di_447).w0000 = 0x00;
						di_449 = (struct Eq_1184 Eq_1004::*) &di_447->b0002;
						cx_450 = cx_163 - 0x01;
					}
					v48_174 = bLoc03_1114 & ~0x10;
					es_167 = psegArg0C;
					al_171 = (ds->*si_82).b0000;
					si_172 = (struct Eq_968 Eq_2::*) &si_82->b0001;
					bLoc03_1119 = v48_174;
					if (al_171 == 0x5E)
					{
						bLoc03_1120 = v48_174 | 0x10;
						al_183 = (ds->*si_82).b0001;
						si_184 = &si_82->b0001 + 1;
					}
					bLoc03_1289 = ϕ(bLoc03_1119, bLoc03_1120);
					si_1045 = ϕ(si_172, si_184);
					Mem1040 = ϕ(Mem175, Mem180);
					al_1035 = ϕ(al_171, al_183);
l0800_0BE7:
					si_1044 = ϕ(si_1045, si_209, si_209, si_209);
					Mem200 = ϕ(Mem1040, Mem207, Mem207, Mem207);
					al_186 = ϕ(al_1035, al_208, al_208, al_208);
					ax_189 = (uint16) al_186;
					ch_197 = 0x01 << (al_186 & 0x07);
					Mem202[ss:fp - 44 + (ax_189 >>u 0x03):byte] = Mem200[ss:fp - 44 + (ax_189 >>u 0x03):byte] | ch_197;
					dl_187 = al_186;
					di_192 = ax_189 >> 0x03;
					while (true)
					{
						ch_1064 = ϕ(ch_197, ch_1064, ch_430);
						di_1053 = ϕ(di_192, di_1053, di_433);
						dl_415 = ϕ(dl_187, dl_415, dl_426);
						Mem207 = ϕ(Mem202, Mem207, Mem438);
						si_206 = ϕ(si_1044, si_422, si_422);
						al_208 = (ds->*si_206).b0000;
						si_209 = (struct Eq_968 Eq_2::*) &si_206->b0001;
						if (al_208 == 0x00)
							break;
						if (al_208 == 0x5D)
						{
							v64_224 = wLoc0C_1153 & 0x7FFF;
							wArg0A_1121 = si_209;
							si_227 = v64_224;
							if ((bLoc03_1289 & 0x01) == 0x00)
								di_232 = fn0800_08C0(&(ss->*(ss->*(fp - 2)).a0000).t0000, ds, out es_233);
							while (true)
							{
								wLoc08_1125 = ϕ(wLoc08_1209, wLoc08_1209, wLoc08_1126, wLoc08_1126);
								di_258 = ϕ(di_1053, di_232, di_258, di_357);
								es_250 = ϕ(es_167, es_233, es_271, es_271);
								Mem244 = ϕ(Mem225, Mem225, Mem257, Mem356);
								si_238 = ϕ(si_227, si_227, si_334, si_334);
								si_239 = si_238 - 0x01;
								if (si_239 < 0x00)
									break;
								v68_245 = (word16) wLoc08_1125 + 1;
								SEQ(0x0800, wArg02)();
								wLoc08_1126 = v68_245;
								es_271 = es_250;
								if (ax_261 < 0x00)
								{
									if (si_239 + 0x01 >= v64_224)
									{
										fn0800_0CC1(&(ss->*(ss->*(fp - 2)).a0000).t0000, out di_283);
										return di_283;
									}
									if ((bLoc03_1289 & 0x01) != 0x00)
									{
										fn0800_0CC1(&(ss->*(ss->*(fp - 2)).a0000).t0000, out di_296);
										return di_296;
									}
									else
									{
										es_250->*di_258 = 0x00;
										fn0800_0CC1(&(ss->*(ss->*(fp - 2)).a0000).t0000, out di_312);
										return di_312;
									}
								}
								si_334 = si_239;
								al_353 = (ss->*fp).b0002;
								if ((Mem257[ss:fp - 44 + (ax_261 >>u 0x03):byte] & 0x01 << (Mem257[ss:fp + 0x02:byte] & 0x07)) != 0x00)
								{
									if ((bLoc03_1289 & 0x10) != 0x00)
										goto l0800_0C82;
								}
								else if ((bLoc03_1289 & 0x10) == 0x00)
								{
l0800_0C82:
									SEQ(0x0800, wArg04)();
									es_384 = (ss->*sp_376).t0006;
									if (si_239 + 0x01 < v64_224)
										break;
									goto l0800_0CA3;
								}
								if ((bLoc03_1289 & 0x01) == 0x00)
								{
									es_250->*di_258 = al_353;
									di_357 = (word16) di_258 + 1;
								}
							}
							es_408 = ϕ(es_250, es_384);
							Mem393 = ϕ(Mem244, Mem387);
							if ((bLoc03_1289 & 0x01) == 0x00)
							{
l0800_0CA3:
								es_407 = ϕ(es_384, es_408);
								Mem402 = ϕ(Mem387, Mem398);
								if ((bLoc03_1289 & 0x01) == 0x00)
								{
									es_407->*di_258 = 0x00;
									di_412 = (word16) di_258 + 1;
								}
							}
							di_1082 = ϕ(di_258, di_258, di_412);
							Mem1017 = ϕ(Mem393, Mem402, Mem411);
							wLoc08_1385 = wLoc08_1125;
							goto l0800_08DD;
						}
						if (al_208 != 0x2D || (dl_415 > (psegArg0C->*si_209).b0000 || (psegArg0C->*si_209).b0000 == 0x5D))
							goto l0800_0BE7;
						si_422 = (struct Eq_968 Eq_2::*) &si_209->b0001;
						al_423 = (ds->*si_209).b0000 - dl_415;
						if (al_423 != 0x00)
						{
							dl_426 = dl_415 + al_423;
							do
							{
								al_441 = ϕ(al_423, al_442);
								Mem436 = ϕ(Mem207, Mem438);
								di_432 = ϕ(di_1053, di_433);
								ch_428 = ϕ(ch_1064, ch_430);
								ch_430 = __rol(ch_428, 0x01);
								di_433 = di_432 + ((ch_428 & 0x80) != 0x00);
								Mem438[ss:fp - 44 + di_433:byte] = Mem436[ss:fp - 44 + di_433:byte] | ch_430;
								al_442 = al_441 - 0x01;
							} while (al_442 != 0x00);
						}
					}
					fn0800_0CD9(&(ss->*(ss->*(fp - 2)).a0000).t0000, out di_217);
					return di_217;
				case 0x11:
					ax_145 = wLoc08_1209;
					dx_146.u0 = 0x00;
					if ((bLoc03_1114 & 0x01) == 0x00)
						goto l0800_0A25;
					break;
				case 0x12:
					si_144 = 0x10;
l0800_09E3:
					si_620 = ϕ(si_144, si_475, si_579, si_576);
					if ((ax_83 & 0x20) == 0x00 && ax_83 != 88)
						bLoc03_1163 = bLoc03_1114 | 0x04;
					bLoc03_1182 = ϕ(bLoc03_1114, bLoc03_1114, bLoc03_1163);
					ax_637 = fn0800_0DCB(ds, wArg02, wArg04, wArg06, wArg08, si_620, wLoc0C_1153 & 0x7FFF, fp - 0x08, fp - 0x0A, out dx_641, out di_640);
					if (wLoc0A > 0x00)
					{
						if ((bLoc03_1182 & 0x01) == 0x00)
						{
l0800_0A25:
							bLoc03_1187 = ϕ(bLoc03_1114, bLoc03_1182);
							dx_691 = ϕ(dx_146, dx_641);
							ax_685 = ϕ(ax_145, ax_637);
							fn0800_08C0(fp - 2, ds, out es_1630);
							es_di_1627.u0 = <invalid>;
							*es_di_1627.u0 = ax_685;
							di_679 = (word16) es_di_1627;
							di_687 = di_679 + 2;
							if ((bLoc03_1187 & 0x04) != 0x00)
							{
								*((byte) es_di_1627.u0 + 2) = dx_691;
								di_696 = di_679 + 4;
							}
						}
						di_1079 = ϕ(di_687, di_696, di_640);
						Mem1015 = ϕ(Mem686, Mem695, Mem633);
						goto l0800_08DD;
					}
					if (wLoc0A < 0x00)
					{
						fn0800_0CC1(&(ss->*(ss->*(fp - 2)).a0000).t0000, out di_655);
						return di_655;
					}
					else
					{
						fn0800_0CD9(&(ss->*(ss->*(fp - 2)).a0000).t0000, out di_665);
						return di_665;
					}
				case 0x13:
					bp_122 = fn0800_0A3F(fp - 2, ds, out di_1629);
					fn0800_0A3F(bp_122, ds, out di_137);
					return di_137;
				case 0x14:
					bLoc03_1116 = bLoc03_1114 & 223;
					break;
				case 0x15:
					bLoc03_1115 = bLoc03_1114 | 0x20;
					break;
				}
			}
			fn0800_0CC1(fp - 2, out di_98);
			return di_98;
		}
l0800_08ED:
		wArg0A_1617 = ϕ(wArg0A_1618, wArg0A_1113);
		si_851 = ϕ(si_58, si_82);
		di_832 = ϕ(di_833, di_807);
		al_829 = ϕ(al_59, al_830);
		v17_840 = (word16) wLoc08_1209 + 1;
		SEQ(0x0800, wArg02)();
		ax_831.u0 = (int16) al_829;
		wLoc08_1210 = v17_840;
		cx_865 = (ss->*sp_856).t0002;
		sp_866 = (struct Eq_1011 Eq_1004::*) ((char *) &sp_856->t0002 + 2);
		al_871 = (ss->*fp).b0002;
		if (ax_857 < 0x00)
		{
l0800_092B:
			fn0800_0CC1(fp - 2, out di_1001);
			return di_1001;
		}
		ax_872.u0 = (int16) al_871;
		di_873 = ax_831;
		if (ax_831 >= 0x00 && ds->*((word16) ax_831.u0 + 39448) == 0x01)
		{
			do
			{
				wLoc08_1231 = ϕ(wLoc08_1210, wLoc08_1233);
				sp_944 = ϕ(sp_866, sp_992);
				Mem934 = ϕ(Mem850, Mem981);
				ax_923 = ϕ(ax_872, ax_993);
				if ((byte) ax_923 < 0x00 || ds->*((word16) ax_923 + 39448) != 0x01)
				{
					sp_945 = sp_944 - 2;
					(ss->*sp_945).t0000 = wArg08;
					(ss->*sp_945).wFFFFFFFE = wArg06;
					(ss->*sp_945).tFFFFFFFC = ax_923;
					SEQ(0x0800, wArg04)();
					wLoc08_1232 = wLoc08_1231 - 0x01;
					goto l0800_08E0;
				}
				v26_973 = (word16) wLoc08_1231 + 1;
				sp_977 = sp_944 - 2;
				(ss->*sp_977).t0000 = wArg08;
				(ss->*sp_977).wFFFFFFFE = wArg06;
				SEQ(0x0800, wArg02)();
				wLoc08_1233 = v26_973;
				cx_991 = (ss->*sp_982).t0002;
				sp_992 = (struct Eq_1011 Eq_1004::*) ((char *) &sp_982->t0002 + 2);
				ax_993 = ax_983;
			} while (ax_983 > 0x00);
			goto l0800_092B;
		}
	} while (ax_872 == ax_831);
	(ss->*sp_856).t0002 = wArg08;
	(ss->*sp_856).w0000 = wArg06;
	(ss->*sp_856).tFFFFFFFE = ax_872;
	SEQ(0x0800, wArg04)();
	fn0800_0CC1(fp - 2, out di_914);
	return di_914;
}

// 0800:08C0: Register word16 fn0800_08C0(Sequence (ptr32 Eq_1252) ss_bp, Register Eq_2 ds, Register out Eq_2 esOut)
// Called from:
//      fn0800_08AC
word16 fn0800_08C0(struct Eq_1252 * ss_bp, Eq_2 ds, union Eq_2 & esOut)
{
	Eq_1860 es_di_7 = ss_bp->t0010;
	union Eq_1885 Eq_2::* di_12 = (word16) es_di_7;
	if ((ss_bp->bFFFFFFFF & 0x20) == 0x00)
	{
		word16 di_13 = *es_di_7;
		ss_bp->t0010 = (word32) ss_bp->t0010 + 2;
		esOut = ds;
		return di_13;
	}
	else
	{
		Eq_1885 es_di_22 = ds->*di_12;
		ss_bp->t0010 = (word32) ss_bp->t0010 + 4;
		esOut = SLICE(es_di_22, selector, 16);
		return (word16) es_di_22;
	}
}

// 0800:0A3F: Register word16 fn0800_0A3F(Sequence (ptr32 Eq_1173) ss_bp, Register Eq_2 ds, Register out ptr16 diOut)
// Called from:
//      fn0800_08AC
word16 fn0800_0A3F(struct Eq_1173 * ss_bp, Eq_2 ds, ptr16 & diOut)
{
	ptr16 di_12;
	word16 bp_11 = fn0800_0CE0(ss_bp, ds, out di_12);
	diOut = di_12;
	return bp_11;
}

// 0800:0B23: Register word16 fn0800_0B23(Sequence (ptr32 Eq_1173) ss_bp, Register Eq_2 ds, Register out ptr16 diOut)
// Called from:
//      fn0800_08AC
word16 fn0800_0B23(struct Eq_1173 * ss_bp, Eq_2 ds, ptr16 & diOut)
{
	ptr16 di_12;
	word16 bp_11 = fn0800_0CE0(ss_bp, ds, out di_12);
	diOut = di_12;
	return bp_11;
}

// 0800:0CC1: Register word16 fn0800_0CC1(Sequence (ptr32 Eq_1173) ss_bp, Register out ptr16 diOut)
// Called from:
//      fn0800_08AC
//      fn0800_0A3F
word16 fn0800_0CC1(struct Eq_1173 * ss_bp, ptr16 & diOut)
{
	SEQ(0x0800, ss_bp->ptr0006)();
	ss_bp->wFFFFFFFC -= ss_bp->wFFFFFFFC < 0x01;
	ptr16 di_29;
	word16 bp_28 = fn0800_0CD9(ss_bp, out di_29);
	diOut = di_29;
	return bp_28;
}

// 0800:0CD9: Register word16 fn0800_0CD9(Sequence (ptr32 Eq_1173) ss_bp, Register out ptr16 diOut)
// Called from:
//      fn0800_08AC
//      fn0800_0CC1
word16 fn0800_0CD9(struct Eq_1173 * ss_bp, ptr16 & diOut)
{
	word16 bp_14 = ss_bp->w0000;
	diOut = wArg02;
	return bp_14;
}

// 0800:0CE0: Register word16 fn0800_0CE0(Sequence (ptr32 Eq_1173) ss_bp, Register Eq_2 ds, Register out ptr16 diOut)
// Called from:
//      fn0800_0A3F
//      fn0800_0B23
word16 fn0800_0CE0(struct Eq_1173 * ss_bp, Eq_2 ds, ptr16 & diOut)
{
	struct Eq_1944 * ss = SLICE(ss_bp, selector, 16);
	word16 bp = (word16) ss_bp;
	mp16 sp_11 = fp;
	do
	{
		++ss_bp->wFFFFFFFA;
		struct Eq_1957 Eq_1944::* sp_12 = sp_11 - 2;
		(ss->*sp_12).w0000 = ss_bp->w000A;
		(ss->*sp_12).wFFFFFFFE = ss_bp->w0008;
		ci16 ax_21;
		SEQ(0x0800, ss_bp->t0004)();
		sp_11 = fp - 2;
		Eq_1975 al_44 = ss_bp->t0004;
		if (ax_21 <= 0x00)
		{
			if (ax_21 == 0x00)
				break;
			ptr16 di_37;
			word16 bp_36 = fn0800_0CC1(ss_bp, out di_37);
			diOut = di_37;
			return bp_36;
		}
		Eq_1975 ax_51 = ss_bp->t0004;
	} while (al_44 >= 0x00 && ds->*((word16) ax_51 + 39448) == 0x01);
	(*((word16) wLoc02 + 3))();
	diOut = di;
	return bp;
}

// 0800:0DA0: FlagGroup bool fn0800_0DA0(Register cu8 cl, Register Eq_2008 bl, Register out Eq_2009 bxOut)
// Called from:
//      fn0800_0DCB
bool fn0800_0DA0(cu8 cl, Eq_2008 bl, union Eq_2009 & bxOut)
{
	cu8 bl_8 = (byte) bx;
	Eq_2009 bx_38;
	bool C_40;
	cu8 bl_16 = bl_8 - 0x30;
	if (bl_8 >= 0x30)
	{
		if (bl_8 <= 0x39)
		{
l0800_0DBD:
			if (bl_16 < cl)
			{
				C_40 = false;
				bx_38.u0 = (uint16) bl_16;
l0800_0DCA:
				bxOut = bx_38;
				return C_40;
			}
			goto l0800_0DC8;
		}
		if (bl_8 <= 0x5A)
			bl_16 = bl_8 - 55;
		else
			bl_16 = bl_8 - 0x57;
		if (bl_16 > 0x09)
			goto l0800_0DBD;
	}
l0800_0DC8:
	bx_38 = bx;
	C_40 = true;
	goto l0800_0DCA;
}

// 0800:0DCB: Register Eq_2008 fn0800_0DCB(Register Eq_2 ds, Stack (memptr Eq_2 code) wArg02, Stack (memptr Eq_2 code) wArg04, Stack word16 wArg06, Stack Eq_2 wArg08, Stack uint16 wArg0A, Stack ci16 wArg0C, Stack (ptr32 word16) ptrArg0E, Stack (ptr32 word16) ptrArg12, Register out Eq_1407 dxOut, Register out Eq_2 diOut)
// Called from:
//      fn0800_08AC
Eq_2008 fn0800_0DCB(Eq_2 ds, <anonymous> Eq_2::* wArg02, <anonymous> Eq_2::* wArg04, word16 wArg06, Eq_2 wArg08, uint16 wArg0A, ci16 wArg0C, word16 * ptrArg0E, word16 * ptrArg12, union Eq_1407 & dxOut, union Eq_2 & diOut)
{
	union Eq_2 Eq_2074::* sp_119 = fp - 0x0C;
	byte bLoc03_538 = 0x00;
	word16 wLoc06_539 = 0x00;
	do
	{
		Eq_1407 dx_402;
		word16 wLoc08_566;
		Eq_2008 ax_490;
		word16 v8_23 = wLoc06_539 + 0x01;
		struct Eq_2071 Eq_2074::* sp_28 = sp_119 - 2;
		(ss->*sp_28).t0000 = wArg08;
		(ss->*sp_28).wFFFFFFFE = wArg06;
		struct Eq_2081 Eq_2074::* sp_36;
		Eq_2008 ax_38;
		SEQ(0x0800, wArg02)();
		wLoc06_539 = v8_23;
		sp_119 = (union Eq_2 Eq_2074::*) ((char *) &sp_36->t0002 + 2);
		Eq_2008 ax_120 = ax_38;
		byte al_51 = (ss->*fp).b0002;
		if (ax_38 < 0x00)
			goto l0800_0E64;
		Eq_2008 ax_52 = (int16) al_51;
	} while (((byte) ax_52 & 0x80) == 0x00 && (ds->*((word16) ax_52 + 0x000096E3) & 0x01) != 0x00);
	ax_120 = ax_52;
	byte al_77 = (byte) ax_52;
	--wArg0C;
	if (wArg0C < 0x01)
	{
l0800_0E6B:
		wLoc08_566 = 0x00;
l0800_0E70:
		struct Eq_2112 Eq_2074::* sp_216 = sp_119 - 2;
		(ss->*sp_216).t0000 = wArg08;
		(ss->*sp_216).wFFFFFFFE = wArg06;
		(ss->*sp_216).tFFFFFFFC = ax_120;
		word16 sp_241;
		SEQ(0x0800, wArg04)();
		sp_119 = sp_241 + 0x06;
		--wLoc06_539;
		ax_490.u0 = 0x00;
		dx_402.u0 = 0x00;
		goto l0800_0F3D;
	}
	if (al_77 != 0x2B)
	{
		if (al_77 != 0x2D)
			goto l0800_0E2A;
		bLoc03_538 = 0x01;
	}
	wArg0C -= 0x02;
	if (wArg0C < 0x02)
		goto l0800_0E6B;
	(ss->*sp_36).t0002 = wArg08;
	(ss->*sp_36).w0000 = wArg06;
	word16 sp_109;
	Eq_2008 ax_111;
	SEQ(0x0800, wArg02)();
	wLoc06_539 = v8_23 + 0x01;
	sp_119 = sp_109 + 4;
	ax_120 = ax_111;
	ax_52 = SEQ((ss->*fp).b0003, (ss->*fp).b0002);
	if (ax_111 < 0x00)
	{
l0800_0E64:
		wLoc08_566 = ~0x00;
		goto l0800_0E70;
	}
l0800_0E2A:
	Eq_2008 ax_156;
	byte al_134 = (byte) ax_52;
	Eq_2008 si_127 = 0x00;
	Eq_1407 di_129 = 0x00;
	cu8 cl_176 = (byte) wArg0A;
	if (wArg0A == 0x00)
	{
		wArg0A = 0x0A;
		if (al_134 == 0x30)
		{
			ci16 v70_139 = wArg0C - 0x01;
			wArg0C = v70_139;
			if (v70_139 >= 0x00)
			{
				word16 v71_143 = wLoc06_539 + 0x01;
				struct Eq_2343 Eq_2074::* sp_148 = sp_119 - 2;
				(ss->*sp_148).t0000 = wArg08;
				(ss->*sp_148).wFFFFFFFE = wArg06;
				word16 sp_154;
				SEQ(0x0800, wArg02)();
				wLoc06_539 = v71_143;
				byte al_166 = (ss->*fp).b0002;
				sp_119 = sp_154 + 4;
				wArg0A = 0x08;
				if (al_166 != 0x78 && al_166 != 88)
				{
l0800_0EE3:
					uint16 ax_305 = bx_298;
					uint16 bx_298;
					if (!fn0800_0DA0((byte) wArg0A, ax_156, out bx_298))
					{
l0800_0F1D:
						struct Eq_2229 Eq_2074::* sp_454 = sp_119 - 2;
						(ss->*sp_454).t0000 = wArg08;
						(ss->*sp_454).wFFFFFFFE = wArg06;
						(ss->*sp_454).wFFFFFFFC = ax_305;
						word16 sp_465;
						SEQ(0x0800, wArg04)();
						sp_119 = sp_465 + 0x06;
						--wLoc06_539;
l0800_0F2D:
						wLoc08_566 = 0x01;
						dx_402 = di_129;
						ax_490 = si_127;
						if (bLoc03_538 != 0x00)
						{
							ax_490 = -si_127;
							dx_402 = -di_129 - (ax_490 == 0x00);
						}
						goto l0800_0F3D;
					}
					uint32 di_si_531 = SEQ(di_129, bx_298) + wArg0A * si_127;
					si_127 = (word16) di_si_531;
					di_129 = SLICE(di_si_531, word16, 16);
					if (di_129 != 0x00)
					{
						do
						{
							ci16 v54_323 = wArg0C - 0x01;
							wArg0C = v54_323;
							if (v54_323 < 0x00)
								goto l0800_0F2D;
							struct Eq_2280 Eq_2074::* sp_332 = sp_119 - 2;
							(ss->*sp_332).t0000 = wArg08;
							(ss->*sp_332).wFFFFFFFE = wArg06;
							word16 v55_327 = wLoc06_539 + 0x01;
							word16 sp_340;
							Eq_2008 ax_342;
							SEQ(0x0800, wArg02)();
							wLoc06_539 = v55_327;
							sp_119 = sp_340 + 4;
							ax_305 = bx_356;
							uint16 bx_356;
							if (!fn0800_0DA0((byte) wArg0A, ax_342, out bx_356))
								goto l0800_0F1D;
							Eq_2302 dx_ax_376 = wArg0A * di_129;
							uint32 ax_si_534 = SEQ((word16) dx_ax_376, bx_356) + wArg0A * si_127;
							Eq_1407 ax_381 = SLICE(ax_si_534, word16, 16);
							si_127 = (word16) ax_si_534;
							di_129 = ax_381;
						} while ((bool) (ax_381 < 0x00) + (SLICE(dx_ax_376, byte, 16) + SLICE(dx_ax_376, byte, 24)) == 0x00);
						byte al_395 = bLoc03_538 + ~0x00;
						bool C_398 = SLICE(cond(al_395), bool, 1);
						dx_402 = SLICE(cond(C_398 + ~0x00), bool, 1) + 0x7FFF;
						wLoc08_566 = 0x02;
						ax_490 = SEQ(C_398 + ~0x00, al_395);
l0800_0F3D:
						*ptrArg0E += wLoc06_539;
						*ptrArg12 = wLoc08_566;
						Eq_2 di_522 = ss->*sp_119;
						dxOut = dx_402;
						diOut = di_522;
						return ax_490;
					}
l0800_0ED0:
					ci16 v44_411 = wArg0C - 0x01;
					wArg0C = v44_411;
					if (v44_411 < 0x00)
						goto l0800_0F2D;
					word16 v45_415 = wLoc06_539 + 0x01;
					struct Eq_2257 Eq_2074::* sp_423 = sp_119 - 2;
					(ss->*sp_423).t0000 = wArg08;
					(ss->*sp_423).wFFFFFFFE = wArg06;
					word16 sp_438;
					SEQ(0x0800, wArg02)();
					wLoc06_539 = v45_415;
					sp_119 = sp_438 + 4;
					goto l0800_0EE3;
				}
				wArg0A = 0x10;
l0800_0EB7:
				goto l0800_0ED0;
			}
			goto l0800_0E86;
		}
		goto l0800_0EB9;
	}
	ax_120 = ax_52;
	if (wArg0A > 0x24)
		goto l0800_0E6B;
	ax_120 = ax_52;
	if (cl_176 >= 0x02)
	{
		if (al_134 == 0x30)
		{
			if (cl_176 != 0x10)
				goto l0800_0EB7;
			ci16 v31_259 = wArg0C - 0x01;
			wArg0C = v31_259;
			if (v31_259 >= 0x00)
			{
				word16 v32_263 = wLoc06_539 + 0x01;
				struct Eq_2179 Eq_2074::* sp_267 = sp_119 - 2;
				(ss->*sp_267).t0000 = wArg08;
				(ss->*sp_267).wFFFFFFFE = wArg06;
				word16 sp_272;
				SEQ(0x0800, wArg02)();
				wLoc06_539 = v32_263;
				byte al_283 = (ss->*fp).b0002;
				sp_119 = sp_272 + 4;
				if (al_283 != 0x78 && al_283 != 88)
					goto l0800_0EE3;
				goto l0800_0EB7;
			}
l0800_0E86:
			goto l0800_0F2D;
		}
l0800_0EB9:
		ax_120 = bx_197;
		Eq_2008 bx_197;
		if (!fn0800_0DA0((byte) wArg0A, ax_52, out bx_197))
		{
			si_127 = bx_197;
			goto l0800_0ED0;
		}
		goto l0800_0E6B;
	}
	goto l0800_0E6B;
}

// 0800:0F6D: void fn0800_0F6D(Register Eq_2 es, Register Eq_2 ds, Stack word16 wArg02, Stack (ptr32 Eq_2369) ptrArg04)
// Called from:
//      fn0800_21F9
void fn0800_0F6D(Eq_2 es, Eq_2 ds, word16 wArg02, struct Eq_2369 * ptrArg04)
{
	ptrArg04->t0000 = es;
	ptrArg04->w0002 = wArg02;
	ptrArg04->ptr0004 = ss;
	ptrArg04->t0006 = ds;
}

// 0800:10B1: Register cui16 fn0800_10B1(Register Eq_2 ds, Stack (ptr32 Eq_2385) ptrArg04)
// Called from:
//      fn1197_09AC
//      fn2141_020E
cui16 fn0800_10B1(Eq_2 ds, struct Eq_2385 * ptrArg04)
{
	cui16 wArg04 = (word16) ptrArg04;
	cui16 wArg06 = SLICE(ptrArg04, word16, 16);
	fn0800_0410(fp - 0x06);
	fn0800_0423(fp - 0x0A);
	word16 dx_53;
	cui16 bx_104;
	word16 ax_50 = fn0800_3E5F(ds, fp - 0x06, fp - 0x0A, out dx_53, out bx_104);
	if ((wArg04 | wArg06) != 0x00)
	{
		ptrArg04->w0002 = dx_53;
		ptrArg04->w0000 = ax_50;
		bx_104 = wArg04;
	}
	return bx_104;
}

// 0800:1109: void fn0800_1109(Register Eq_2 ds, Stack Eq_2 wArg04)
// Called from:
//      fn1D10_0FB3
//      fn1ED0_0009
void fn0800_1109(Eq_2 ds, Eq_2 wArg04)
{
	word16 dx_27;
	word16 cx_48;
	word16 bx_49;
	fn0800_06AB(ds, wArg04, 0x00, 0x01, out cx_48, out dx_27, out bx_49);
}

// 0800:1123: void fn0800_1123(Register byte al, Register Eq_2 ds, Stack Eq_2 ptrArg04)
// Called from:
//      fn0800_2B50
void fn0800_1123(byte al, Eq_2 ds, Eq_2 ptrArg04)
{
	Eq_2 ax_21 = SEQ(0x41, al);
	if (msdos_delete_file(SLICE(ptrArg04, selector, 16), (word16) ptrArg04))
		fn0800_05AD(ds, ax_21);
}

// 0800:113B: Register word16 fn0800_113B(Sequence (ptr32 byte) es_di, Register byte dh, Register byte dl)
// Called from:
//      fn0800_1153
word16 fn0800_113B(byte * es_di, byte dh, byte dl)
{
	struct Eq_2464 * es = SLICE(es_di, selector, 16);
	word16 di_10 = fn0800_1142(es_di, dh);
	return fn0800_1142(di_10, dl);
}

// 0800:1142: Register word16 fn0800_1142(Sequence (ptr32 byte) es_di, Register byte al)
// Called from:
//      fn0800_113B
word16 fn0800_1142(byte * es_di, byte al)
{
	struct Eq_2476 * es = SLICE(es_di, selector, 16);
	word16 ax_5 = __aam(al);
	byte al_6 = (byte) ax_5;
	word16 di_15 = fn0800_114B(es_di, SLICE(ax_5, byte, 8));
	return fn0800_114B(di_15, al_6);
}

// 0800:114B: Register word16 fn0800_114B(Sequence (ptr32 byte) es_di, Register byte al)
// Called from:
//      fn0800_1142
word16 fn0800_114B(byte * es_di, byte al)
{
	word16 di = (word16) es_di;
	byte al_7 = (bool) __daa(al + 0x90, &(al + 0x90)) + (al + 0xD0);
	__daa(al_7, &al_7);
	*es_di = al_7;
	return di + 1;
}

// 0800:1153: Register word16 fn0800_1153(Register Eq_2 cx, Register Eq_2 dx, Register Eq_2 bx, Register Eq_2 ds, Stack (memptr Eq_2 Eq_2523) wArg02, Stack Eq_2524 wArg04)
// Called from:
//      fn0800_1867
//      fn0800_37D3
word16 fn0800_1153(Eq_2 cx, Eq_2 dx, Eq_2 bx, Eq_2 ds, struct Eq_2523 Eq_2::* wArg02, Eq_2524 wArg04)
{
	ci8 bLoc16_1446 = 0x50;
	struct Eq_2527 Eq_2::* sp_1012 = fp - 0x9E;
	byte Eq_2::* wLoc06_1228 = fp - 0x98;
l0800_11C0:
	byte Eq_2::* di_1004 = wLoc06_1228;
l0800_11C3:
	struct Eq_2739 * psegArg06_1720 = SLICE(ptrArg04, selector, 16);
	byte Eq_2::* si_1118 = (word16) ptrArg04;
	while (true)
	{
		byte al_37 = ds->*si_1118;
		++si_1118;
		byte al_1063 = al_37;
		if (al_37 == 0x00)
			break;
		if (al_37 == 0x25)
		{
			al_1063 = ds->*si_1118;
			++si_1118;
			if (al_1063 != 0x25)
			{
				wLoc06_1228 = di_1004;
				cu8 ch_1156 = 0x00;
				Eq_2 wLoc10_1233 = 0x00;
				cui16 wLoc04_1234 = 0x20;
				byte bLoc0D_1235 = 0x00;
				Eq_2 wLoc0A_1236 = ~0x00;
				Eq_2 wLoc0C_1237 = ~0x00;
				while (true)
				{
					Eq_2 ax_65 = (uint16) al_1063;
					cu8 bl_68 = (byte) ax_65;
					byte bh_73 = SLICE(ax_65, byte, 8);
					dx = ax_65;
					byte dl_133 = (byte) ax_65;
					bx = SEQ(bh_73, bl_68 - 0x20);
					cx = SEQ(ch_1156, 0x00);
					if (bl_68 >= 0x80)
						break;
					bx = SEQ(bh_73, ds->*((word32) bx + 0x00009A9F));
					cx = SEQ(ch_1156, 0x00);
					if (bx > 0x17)
						goto l0800_15B2;
					Eq_561 bx_1982;
					byte * es_di_1988;
					byte * es_di_1995;
					Eq_561 bx_2002;
					Eq_561 bx_1992;
					byte * es_di_1985;
					byte bLoc08_1277;
					Eq_2 cx_174;
					byte Eq_2633::* di_488;
					struct Eq_2633 * es_492;
					Eq_2 dx_347;
					Eq_565 ax_353;
					bx <<= 0x01;
					byte bl_447 = (byte) (bx << 0x01);
					cx = SEQ(ch_1156, 0x00);
					switch (bx << 0x01)
					{
					case 0x00:
						cx = SEQ(ch_1156, 0x00);
						if (ch_1156 > 0x00)
							goto l0800_1229;
						if (bLoc0D_1235 != 0x2B)
							bLoc0D_1235 = dl_133;
						goto l0800_1206;
					case 0x01:
						cx = SEQ(ch_1156, 0x00);
						if (ch_1156 > 0x00)
							goto l0800_1229;
						wLoc04_1234 |= 0x01;
						goto l0800_1206;
					case 0x02:
						Eq_2 ax_932 = (ss->*wArg02).t0000;
						++wArg02;
						if (ch_1156 >= 0x02)
						{
							cx = SEQ(ch_1156, 0x00);
							if (ch_1156 != 0x04)
								goto l0800_1274;
							wLoc0C_1237 = ax_932;
							++ch_1156;
							goto l0800_1206;
						}
						else
						{
							Eq_2 ax_942 = ax_932;
							if (ax_932 < 0x00)
							{
								ax_942 = -ax_932;
								wLoc04_1234 |= 0x02;
							}
							wLoc0A_1236 = ax_942;
							ch_1156 = 0x03;
							goto l0800_1295;
						}
					case 0x03:
						cx = SEQ(ch_1156, 0x00);
						if (ch_1156 > 0x00)
							goto l0800_1229;
						wLoc04_1234 |= 0x02;
						goto l0800_1206;
					case 0x04:
						cx = SEQ(ch_1156, 0x00);
						if (ch_1156 >= 0x04)
							goto l0800_1274;
						ch_1156 = 0x04;
						wLoc0C_1237 = (word32) wLoc0C_1237 + 1;
						goto l0800_1206;
					case 0x05:
l0800_12B2:
						Eq_2 ax_879 = (int16) ((byte) ax_65 - 0x30);
						if (ch_1156 <= 0x02)
						{
							ch_1156 = 0x02;
							wLoc0A_1236 = ax_879;
							if (wLoc0A_1236 < 0x00)
								goto l0800_1295;
							wLoc0A_1236 = (word32) ax_879 + ((wLoc0A_1236 << 0x03) + (wLoc0A_1236 << 0x01));
							goto l0800_1206;
						}
						cx = SEQ(ch_1156, 0x00);
						if (ch_1156 != 0x04)
						{
l0800_1274:
							goto l0800_15B2;
						}
						else
						{
							wLoc0C_1237 = ax_879;
							if (wLoc0C_1237 == 0x00)
								goto l0800_1295;
							wLoc0C_1237 = (word32) ax_879 + ((wLoc0C_1237 << 0x03) + (wLoc0C_1237 << 0x01));
							goto l0800_1206;
						}
					case 0x06:
						wLoc04_1234 |= 0x10;
						break;
					case 0x07:
						wLoc04_1234 |= 0x0100;
						goto l0800_12FC;
					case 0x08:
l0800_12FC:
						wLoc04_1234 &= ~0x10;
						break;
					case 0x09:
						if (ch_1156 > 0x00)
							goto l0800_12B2;
						if ((wLoc04_1234 & 0x02) == 0x00)
						{
							wLoc04_1234 |= 0x08;
							ch_1156 = 0x01;
						}
						else
						{
l0800_1295:
						}
						goto l0800_1206;
					case 0x0A:
						int32 dx_ax_359 = (int32) (ss->*wArg02).t0000;
						bLoc08_1277 = 0x01;
						ax_353 = (word16) dx_ax_359;
						dx_347 = SLICE(dx_ax_359, word16, 16);
						bx_1982 = SEQ(0x0A, bl_447);
						goto l0800_1335;
					case 11:
						bx_2002 = SEQ(0x08, bl_447);
						goto l0800_1311;
					case 0x0C:
						bx_1992 = SEQ(0x0A, bl_447);
						goto l0800_1315;
					case 0x0D:
						bx_2002 = SEQ(0x10, dl_133 + 233);
l0800_1311:
						bLoc0D_1235 = 0x00;
						bx_1992 = bx_2002;
l0800_1315:
						dx_347.u0 = 0x00;
						bLoc08_1277 = 0x00;
						ax_353 = (ss->*wArg02).t0000;
						bx_1982 = bx_1992;
l0800_1335:
						struct Eq_2856 Eq_2::* di_361 = &wArg02->t0001;
						byte bh_427 = SLICE(bx_1982, byte, 8);
						struct Eq_2523 Eq_2::* di_362 = &di_361->t0001;
						ptrArg04 = &(psegArg06_1720->*si_1118);
						if ((wLoc04_1234 & 0x10) != 0x00)
						{
							dx_347 = (ss->*di_361).t0001;
							di_362 = (struct Eq_2523 Eq_2::*) ((char *) &di_361->t0001 + 2);
						}
						wArg02 = di_362;
						if (ax_353 == 0x00 && dx_347 == 0x00)
						{
							if (wLoc0C_1237 == 0x00)
								goto l0800_1376;
						}
						else
							wLoc04_1234 |= 0x04;
						struct Eq_2904 Eq_2::* sp_410 = sp_1012 - 2;
						(ss->*sp_410).t0000 = dx_347;
						(ss->*sp_410).tFFFFFFFE = ax_353;
						(ss->*sp_410).tFFFFFFFC = ss;
						(ss->*sp_410).tFFFFFFFA = fp - 0x47;
						Eq_563 ax_432 = (int16) bh_427;
						(ss->*sp_410).tFFFFFFF8 = ax_432;
						(ss->*sp_410).tFFFFFFF6 = SEQ(SLICE(ax_432, byte, 8), bLoc08_1277);
						(ss->*sp_410).tFFFFFFF4 = bx_1982;
						fn0800_0609((ss->*sp_410).tFFFFFFF4, (ss->*sp_410).tFFFFFFF6, (ss->*sp_410).tFFFFFFF8, (ss->*sp_410).tFFFFFFFA, (ss->*sp_410).tFFFFFFFE, (ss->*sp_410).t0000);
l0800_1376:
						union Eq_2 Eq_2::* sp_464 = sp_1012 - 2;
						ss->*sp_464 = ss;
						Eq_2 es_467 = ss->*sp_464;
						sp_1012 = (struct Eq_2527 Eq_2::*) ((char *) sp_464 + 2);
						dx = wLoc0C_1237;
						if (wLoc0C_1237 >= 0x00)
						{
							es_di_1985 = SEQ(es_467, fp - 0x47);
							goto l0800_1484;
						}
						else
						{
							es_di_1995 = SEQ(es_467, fp - 0x47);
							goto l0800_1476;
						}
					case 0x0E:
						struct Eq_2725 Eq_2::* sp_267 = sp_1012 - 2;
						(ss->*sp_267).t0000 = (ss->*wArg02).t0000;
						byte Eq_2::* di_264 = fp - 0x48;
						++wArg02;
						ptrArg04 = &(psegArg06_1720->*si_1118);
						if ((wLoc04_1234 & 0x20) != 0x00)
						{
							word16 dx_275 = wArg02[1];
							(ss->*sp_267).tFFFFFFFE = ss;
							Eq_2 es_282 = (ss->*sp_267).tFFFFFFFE;
							byte Eq_2::* di_288 = fn0800_113B(SEQ(es_282, fp - 0x48), SLICE(dx_275, byte, 8), (byte) dx_275);
							es_282->*di_288 = 0x3A;
							Eq_2 sp_289 = <invalid>;
							wArg02 += 2;
							sp_267 = (struct Eq_2725 Eq_2::*) ((word32) sp_289 + 0x0000FFFE);
							di_264 = di_288 + 1;
						}
						struct Eq_3164 Eq_2::* sp_299 = sp_267 - 2;
						(ss->*sp_299).t0000 = ss;
						word16 dx_304 = (ss->*sp_299).w0002;
						Eq_2 es_302 = (ss->*sp_299).t0000;
						byte Eq_2::* di_311 = fn0800_113B(SEQ(es_302, di_264), SLICE(dx_304, byte, 8), (byte) dx_304);
						ss->*di_311 = 0x00;
						Eq_2 sp_312 = <invalid>;
						sp_1012 = (struct Eq_2527 Eq_2::*) ((word32) sp_312 + 0x0000FFFE);
						wLoc04_1234 &= ~0x04;
						Eq_2 di_325 = di_311 - (fp - 0x48);
						dx = wLoc0C_1237;
						if (wLoc0C_1237 <= di_325)
							dx = di_325;
						es_di_1995 = SEQ(es_302, fp - 0x48);
						goto l0800_1476;
					case 0x0F:
						Eq_2 cx_209 = wLoc0C_1237;
						ptrArg04 = &(psegArg06_1720->*si_1118);
						if (wLoc0C_1237 < 0x00)
							cx_209.u0 = 0x06;
						word16 ax_244;
						struct Eq_3131 Eq_2::* sp_215 = sp_1012 - 2;
						(ss->*sp_215).t0000 = ss;
						(ss->*sp_215).ptrFFFFFFFE = wArg02;
						(ss->*sp_215).tFFFFFFFC = cx_209;
						(ss->*sp_215).tFFFFFFFA = ss;
						(ss->*sp_215).wFFFFFFF8 = fp - 0x47;
						(ss->*sp_215).tFFFFFFF6 = ax_65;
						(ss->*sp_215).wFFFFFFF4 = wLoc04_1234 & 0x01;
						if ((wLoc04_1234 & 0x0100) != 0x00)
						{
							ax_244 = 0x08;
							wArg02 += 5;
						}
						else
						{
							wArg02 += 4;
							ax_244 = 0x06;
						}
						(ss->*sp_215).wFFFFFFF2 = ax_244;
						fn0800_2456(ds);
						(ss->*sp_215).tFFFFFFF0 = ss;
						sp_1012 = sp_215 - 0x0E;
						es_di_1995 = SEQ((ss->*sp_215).tFFFFFFF0, fp - 0x47);
l0800_1476:
						es_492 = SLICE(es_di_1995, selector, 16);
						di_488 = (word16) es_di_1995;
						if ((wLoc04_1234 & 0x08) != 0x00)
						{
							dx = wLoc0A_1236;
							es_di_1985 = es_di_1995;
							if (wLoc0A_1236 > 0x00)
							{
l0800_1484:
								es_492 = SLICE(es_di_1985, selector, 16);
								di_488 = (word16) es_di_1985;
								Eq_2 cx_496 = fn0800_116D(di_488, es_492);
								if (*es_di_1985 == 0x2D)
									--cx_496;
								dx -= cx_496;
								if (dx > 0x00)
									wLoc10_1233 = dx;
							}
						}
						if (es_492->*di_488 != 0x2D)
						{
							if (bLoc0D_1235 == 0x00)
								goto l0800_14B6;
							--di_488;
							es_492->*di_488 = bLoc0D_1235;
						}
						if (wLoc10_1233 > 0x00 && wLoc0C_1237 < 0x00)
							--wLoc10_1233;
l0800_14B6:
						cx_174 = fn0800_116D(di_488, es_492);
						es_di_1988 = &(es_492->*di_488);
						goto l0800_14B9;
					case 0x10:
						union Eq_2 Eq_2::* sp_193 = sp_1012 - 2;
						ss->*sp_193 = ss;
						++wArg02;
						sp_1012 = (struct Eq_2527 Eq_2::*) ((char *) sp_193 + 2);
						cx_174.u0 = 0x01;
						ptrArg04 = &(psegArg06_1720->*si_1118);
						es_di_1988 = SEQ(ss->*sp_193, fp - 0x47);
						goto l0800_14B9;
					case 0x11:
						byte * es_di_139;
						bool v69_1218;
						ptrArg04 = &(psegArg06_1720->*si_1118);
						if ((wLoc04_1234 & 0x20) == 0x00)
						{
							word16 di_148 = (ss->*wArg02).t0000;
							union Eq_2 Eq_2::* sp_151 = sp_1012 - 2;
							ss->*sp_151 = ds;
							++wArg02;
							v69_1218 = di_148 != 0x00;
							es_di_139 = SEQ(ss->*sp_151, di_148);
						}
						else
						{
							es_di_139 = (ds->*wArg02).t0000;
							wArg02 += 2;
							v69_1218 = (SLICE(es_di_139, selector, 16) | (word16) es_di_139) != 0x00;
						}
						byte * es_di_1999 = es_di_139;
						if (!v69_1218)
						{
							union Eq_2 Eq_2::* sp_162 = sp_1012 - 2;
							ss->*sp_162 = ds;
							es_di_1999 = SEQ(ss->*sp_162, 0x9A98);
						}
						cx_174 = fn0800_116D((word16) es_di_1999, SLICE(es_di_1999, selector, 16));
						if (cx_174 > wLoc0C_1237)
							cx_174 = wLoc0C_1237;
						es_di_1988 = es_di_1999;
l0800_14B9:
						byte Eq_2::* di_558 = (word16) es_di_1988;
						byte Eq_2::* si_1143 = di_558;
						Eq_2 bx_571 = wLoc0A_1236;
						if ((wLoc04_1234 & 0x05) == 0x05)
						{
							if (dl_133 != 111)
							{
								if (dl_133 == 0x78 || dl_133 == 88)
								{
									Eq_2 v39_592 = wLoc10_1233 - 0x02;
									wLoc04_1234 |= 0x40;
									bx_571 = wLoc0A_1236 - 0x02;
									wLoc10_1233 = v39_592;
									if (v39_592 < 0x00)
										wLoc10_1233.u0 = 0x00;
								}
l0800_14FC:
								cx = cx_174 + wLoc10_1233;
								if ((wLoc04_1234 & 0x02) == 0x00)
								{
									for (; bx_571 > cx; --bx_571)
									{
										di_1004 = fn0800_117A(SEQ(ss, fp - 2), 0x20, cx, dx, bx_571, di_1004);
										sp_1012 = (struct Eq_2527 Eq_2::*) ((char *) &sp_1012->t0000 + 0x0000FFFE);
									}
								}
								if ((wLoc04_1234 & 0x40) != 0x00)
								{
									di_1004 = fn0800_117A(SEQ(ss, fp - 2), dl_133, cx, dx, bx_571, fn0800_117A(SEQ(ss, fp - 2), 0x30, cx, dx, bx_571, di_1004));
									sp_1012 = (struct Eq_2527 Eq_2::*) ((char *) &sp_1012->t0000 + 0x0000FFFC);
								}
								dx = wLoc10_1233;
								if (wLoc10_1233 > 0x00)
								{
									Eq_2 cx_698 = cx - wLoc10_1233;
									bx_571 -= wLoc10_1233;
									byte al_715 = *es_di_1988;
									if (al_715 == 0x2D || (al_715 == 0x20 || al_715 == 0x2B))
									{
										si_1143 = di_558 + 1;
										di_1004 = fn0800_117A(SEQ(ss, fp - 2), ds->*di_558, cx_698, wLoc10_1233, bx_571, di_1004);
										sp_1012 = (struct Eq_2527 Eq_2::*) ((char *) &sp_1012->t0000 + 0x0000FFFE);
										--cx_698;
										--bx_571;
									}
									Eq_2 cx_773 = wLoc10_1233;
									if (wLoc10_1233 != 0x00)
									{
										do
										{
											di_1004 = fn0800_117A(SEQ(ss, fp - 2), 0x30, cx_773, cx_698, bx_571, di_1004);
											sp_1012 = (struct Eq_2527 Eq_2::*) ((char *) &sp_1012->t0000 + 0x0000FFFE);
											--cx_773;
										} while (cx_773 != 0x00);
									}
									dx = cx_773;
									cx = cx_698;
								}
								if (cx != 0x00)
								{
									bx_571 -= cx;
									do
									{
										ss->*di_1004 = ds->*si_1143;
										ci8 v43_810 = bLoc16_1446 - 0x01;
										++si_1143;
										++di_1004;
										bLoc16_1446 = v43_810;
										if (v43_810 <= 0x00)
											di_1004 = fn0800_1183(SEQ(ss, fp - 2), cx, dx, bx_571, di_1004);
										--cx;
									} while (cx != 0x00);
								}
								bx = bx_571;
								if (bx_571 > 0x00)
								{
									cx = bx_571;
									do
									{
										di_1004 = fn0800_117A(SEQ(ss, fp - 2), 0x20, cx, dx, bx_571, di_1004);
										sp_1012 = (struct Eq_2527 Eq_2::*) ((char *) &sp_1012->t0000 + 0x0000FFFE);
										--cx;
									} while (cx != 0x00);
								}
								goto l0800_11C3;
							}
							if (wLoc10_1233 <= 0x00)
								wLoc10_1233.u0 = 0x01;
						}
						goto l0800_14FC;
					case 0x12:
						struct Eq_2775 Eq_2::* di_102;
						Eq_2 es_109;
						ptrArg04 = &(psegArg06_1720->*si_1118);
						if ((wLoc04_1234 & 0x20) == 0x00)
						{
							di_102 = (ss->*wArg02).t0000;
							union Eq_2 Eq_2::* sp_107 = sp_1012 - 2;
							ss->*sp_107 = ds;
							++wArg02;
							es_109 = ss->*sp_107;
						}
						else
						{
							Eq_2795 es_di_98 = (ds->*wArg02).t0000;
							es_109 = SLICE(es_di_98, selector, 16);
							di_102 = (word16) es_di_98;
							wArg02 += 2;
						}
						(es_109->*di_102).w0000 = (uint16) (0x50 - bLoc16_1446);
						if ((wLoc04_1234 & 0x10) != 0x00)
							(es_109->*di_102).w0002 = 0x00;
						goto l0800_11C0;
					case 0x13:
					case 0x14:
					case 0x15:
l0800_15B2:
						dx = ax_65;
						byte Eq_2::* si_1015 = si_1118;
						byte al_1003 = 0x25;
						do
						{
							di_1004 = fn0800_117A(SEQ(ss, fp - 2), al_1003, cx, ax_65, bx, di_1004);
							byte al_1017 = ds->*si_1015;
							sp_1012 = (struct Eq_2527 Eq_2::*) ((char *) &sp_1012->t0000 + 0x0000FFFE);
							++si_1015;
							al_1003 = al_1017;
						} while (al_1017 != 0x00);
						goto l0800_15C6;
					case 22:
						wLoc04_1234 &= ~0x20;
						break;
					case 0x17:
						wLoc04_1234 |= 0x20;
						break;
					}
					ch_1156 = 0x05;
l0800_1206:
					al_1063 = ds->*si_1118;
					++si_1118;
				}
l0800_1229:
				goto l0800_15B2;
			}
		}
		ss->*di_1004 = al_1063;
		ci8 v16_1069 = bLoc16_1446 - 0x01;
		++di_1004;
		bLoc16_1446 = v16_1069;
		if (v16_1069 <= 0x00)
			di_1004 = fn0800_1183(SEQ(ss, fp - 2), cx, dx, bx, di_1004);
	}
l0800_15C6:
	if (bLoc16_1446 < 0x50)
		fn0800_1183(SEQ(ss, fp - 2), cx, dx, bx, di_1004);
	word16 Eq_2::* sp_1047 = (char *) &sp_1012->t0000 + 2;
	return ss->*sp_1047;
}

// 0800:116D: Register word16 fn0800_116D(Register (memptr (ptr16 Eq_2633) byte) di, Register (ptr16 Eq_2633) es)
// Called from:
//      fn0800_1153
word16 fn0800_116D(byte Eq_2633::* di, struct Eq_2633 * es)
{
	word16 cx_12 = ~0x00;
	while (cx_12 != 0x00)
	{
		di = di_45 + 1;
		--cx_12;
		di_45 = di;
		if (es->*di_45 != 0x00)
			return ~cx_12 - 0x01;
	}
	return ~cx_12 - 0x01;
}

// 0800:117A: Register (memptr Eq_2 byte) fn0800_117A(Sequence (ptr32 Eq_2567) ss_bp, Register byte al, Register Eq_2 cx, Register Eq_2 dx, Register Eq_2 bx, Register (memptr Eq_2 byte) di)
// Called from:
//      fn0800_1153
byte Eq_2::* fn0800_117A(struct Eq_2567 * ss_bp, byte al, Eq_2 cx, Eq_2 dx, Eq_2 bx, byte Eq_2::* di)
{
	Eq_2 ss = SLICE(ss_bp, selector, 16);
	ss->*di = al;
	Eq_3357 v8_10 = ss_bp->tFFFFFFEC - 0x01;
	ss_bp->tFFFFFFEC = v8_10;
	if (v8_10 != 0x00)
		return di + 1;
	return fn0800_1183(ss_bp, cx, dx, bx, di + 1);
}

// 0800:1183: Register (memptr Eq_2 byte) fn0800_1183(Sequence (ptr32 Eq_2567) ss_bp, Register Eq_2 cx, Register Eq_2 dx, Register Eq_2 bx, Register (memptr Eq_2 byte) di)
// Called from:
//      fn0800_1153
//      fn0800_117A
byte Eq_2::* fn0800_1183(struct Eq_2567 * ss_bp, Eq_2 cx, Eq_2 dx, Eq_2 bx, byte Eq_2::* di)
{
	word16 bp = (word16) ss_bp;
	word16 di_20 = di - (bp - 0x96);
	word16 ax_39;
	SEQ(0x0800, ss_bp->ptr000E)();
	if (ax_39 == 0x00)
		ss_bp->wFFFFFFEA = 0x01;
	ss_bp->tFFFFFFEC.u1 = 0x50;
	ss_bp->wFFFFFFEE += di_20;
	return bp - 0x96;
}

// 0800:16B5: void fn0800_16B5(Stack Eq_722 dwArg04, Stack Eq_2 dwArg08)
// Called from:
//      fn0800_06D4
void fn0800_16B5(Eq_722 dwArg04, Eq_2 dwArg08)
{
	word16 dx_87;
	fn0800_350E(dwArg04, dwArg08, (word16) fn0800_3E0F(dwArg08) + 1, out dx_87);
}

// 0800:16E9: void fn0800_16E9(Register Eq_2 ds, Stack byte bArg04)
// Called from:
//      fn268D_06AA
void fn0800_16E9(Eq_2 ds, byte bArg04)
{
	*((word32) ds + 39686) = *((word32) ds + 39686) & 0x70 | bArg04 & ~0x70;
}

// 0800:1867: void fn0800_1867(Register Eq_2 cx, Register Eq_2 bx, Register Eq_2 ds, Stack Eq_2524 dwArg04)
// Called from:
//      fn268D_06AA
void fn0800_1867(Eq_2 cx, Eq_2 bx, Eq_2 ds, Eq_2524 dwArg04)
{
	fn0800_1153(cx, 0x00, bx, ds, fp + 0x08, dwArg04);
}

// 0800:1A47: void fn0800_1A47()
// Called from:
//      fn0800_1A48
void fn0800_1A47()
{
}

// 0800:1A48: Register word16 fn0800_1A48()
// Called from:
//      fn0800_1A83
word16 fn0800_1A48()
{
	__cli();
	__outb(0x43, 0x00);
	fn0800_1A47();
	byte al_9 = __inb(0x40);
	fn0800_1A47();
	return ~SEQ(__inb(0x40), al_9);
}

// 0800:1A83: Register cup16 fn0800_1A83(Register Eq_2 ds, Stack uint16 wArg04)
// Called from:
//      fn209F_00DD
//      main
//      fn268D_05FB
cup16 fn0800_1A83(Eq_2 ds, uint16 wArg04)
{
	cup16 ax_14 = fn0800_1A48();
	word16 dx_177;
	fn0800_07F6(*((word32) ds + 0x00009B4C), 0x00, *((word32) ds + 0x00009B4E), wArg04, out dx_177);
	Eq_2 dx_ax_176 = <invalid>;
	uint32 bx_cx_114 = (word32) dx_ax_176 + (uint32) ax_14;
	cup16 si_22 = ax_14;
	cup16 cx_46 = (word16) bx_cx_114;
	cup16 wLoc04_120 = SLICE(bx_cx_114, word16, 16);
	while (true)
	{
		cup16 ax_53 = fn0800_1A48();
		if (wLoc04_120 <= 0x00 && (wLoc04_120 != 0x00 || ax_53 >= cx_46))
			break;
		if (ax_53 < si_22)
		{
			if (wLoc04_120 <= 0x01 && (wLoc04_120 < 0x01 || cx_46 < 0x00))
				return ax_53;
			wLoc04_120 = wLoc04_120 - 0x01 - (cx_46 < 0x00);
		}
		si_22 = ax_53;
	}
	return ax_53;
}

// 0800:1AF0: Register byte fn0800_1AF0(Register Eq_2 dx, Register out ptr16 cxOut, Register out ptr16 dxOut, Register out ptr16 bxOut)
// Called from:
//      fn0800_1C24
byte fn0800_1AF0(Eq_2 dx, ptr16 & cxOut, ptr16 & dxOut, ptr16 & bxOut)
{
	Eq_2 ds_35;
	Eq_2 wLoc02_67;
	if (dx != seg0800->t1AE4)
	{
		Eq_2 ds_9 = *((word32) dx + 2);
		if (*((word32) ds_9 + 2) != 0x00)
		{
			seg0800->t1AE6 = ds_9;
l0800_1B43:
			ds_35 = seg0800->t1AEA;
			wLoc02_67 = dx;
			goto l0800_1B4C;
		}
		if (ds_9 != seg0800->t1AE4)
		{
			seg0800->t1AE6 = *((word32) ds_9 + 8);
			fn0800_1BC4(ds_9);
			wLoc02_67 = ds_9;
			ds_35 = seg0800->t1AEA;
l0800_1B4C:
			ptr16 bx_57;
			ptr16 cx_58;
			ptr16 dx_59;
			uint16 ax_56 = (uint16) fn0800_1F8C(ds_35, 0x00, wLoc02_67, out cx_58, out dx_59, out bx_57);
			cxOut = cx_58;
			dxOut = dx_59;
			bxOut = bx_57;
			return (byte) ax_56;
		}
		dx = seg0800->t1AE4;
	}
	seg0800->t1AE4 = 0x00;
	seg0800->t1AE6 = 0x00;
	seg0800->t1AE8 = 0x00;
	goto l0800_1B43;
}

// 0800:1B53: Register byte fn0800_1B53(Register Eq_2 dx, Register out Eq_2 bxOut)
// Called from:
//      fn0800_1C24
byte fn0800_1B53(Eq_2 dx, union Eq_2 & bxOut)
{
	Eq_2 bx_17;
	Eq_2 es_9 = *((word32) dx + 2);
	((word32) dx + 2)->u0 = 0x00;
	*((word32) dx + 8) = es_9;
	Eq_2 wLoc02_67 = dx;
	if (dx != seg0800->t1AE4 && *((word32) es_9 + 2) == 0x00)
	{
		Eq_2 ax_25 = *dx;
		Mem31[es_9:0x00:word16] = Mem29[es_9:0x00:word16] + ax_25;
		bx_17 = dx;
		wLoc02_67 = es_9;
		word16 dx_33 = dx + ax_25;
		if (dx_33->t0002 == 0x00)
			dx_33->t0008 = es_9;
		else
			dx_33->t0002 = es_9;
	}
	else
		bx_17 = fn0800_1BED(dx);
	word16 ax_48 = wLoc02_67 + Mem43[wLoc02_67:0x00:word16];
	if (*((word16) ax_48 + 2) == 0x00)
	{
		Mem54[wLoc02_67:0x00:word16] = Mem43[wLoc02_67:0x00:word16] + Mem43[ax_48:0x00:word16];
		Mem60[ax_48 + Mem54[ax_48:0x00:word16]:0x02:word16] = wLoc02_67;
		bxOut = fn0800_1BC4(ax_48);
		return (byte) wLoc02_67;
	}
	else
	{
		bxOut = bx_17;
		return (byte) ax_48;
	}
}

// 0800:1BC4: Register word16 fn0800_1BC4(Register Eq_2 ds)
// Called from:
//      fn0800_1AF0
//      fn0800_1B53
//      fn0800_1D2E
word16 fn0800_1BC4(Eq_2 ds)
{
	if (ds == *((word32) ds + 6))
	{
		seg0800->t1AE8 = 0x00;
		return;
	}
	else
	{
		Eq_2 es_10 = *((word32) ds + 6);
		Eq_2 ds_11 = *((word32) ds + 4);
		*((word32) ds_11 + 6) = es_10;
		*((word32) es_10 + 4) = ds_11;
		seg0800->t1AE8 = ds_11;
		return;
	}
}

// 0800:1BED: Register (ptr16 Eq_3657) fn0800_1BED(Register Eq_2 ds)
// Called from:
//      fn0800_1B53
struct Eq_3657 * fn0800_1BED(Eq_2 ds)
{
	Eq_2 ax_5 = seg0800->t1AE8;
	if (ax_5 == 0x00)
	{
		seg0800->t1AE8 = ds;
		*((word32) ds + 4) = ds;
		*((word32) ds + 6) = ds;
		return bx;
	}
	else
	{
		__cli();
		Eq_2 es_21 = *((word32) ax_5 + 6);
		*((word32) ax_5 + 6) = ds;
		*((word32) ds + 4) = ax_5;
		*((word32) es_21 + 4) = ds;
		*((word32) ds + 6) = es_21;
		return ss;
	}
}

// 0800:1C24: Register byte fn0800_1C24(Register Eq_2 ds, Stack Eq_2 wArg06, Register out ptr16 cxOut, Register out Eq_2 dxOut, Register out ptr16 bxOut, Register out (ptr16 Eq_167) dsOut)
// Called from:
//      fn0800_0312
//      fn0800_2B50
//      fn0800_3C8A
//      fn0CE0_05FB
//      fn0CE0_08FC
//      fn1744_0972
//      fn1744_0A6F
//      fn1F0F_0BF7
//      fn209F_0149
//      fn209F_02E3
//      fn226D_00F9
//      fn2476_0362
//      fn268D_03E2
byte fn0800_1C24(Eq_2 ds, Eq_2 wArg06, ptr16 & cxOut, union Eq_2 & dxOut, ptr16 & bxOut, struct Eq_167 & dsOut)
{
	seg0800->t1AEA = ds;
	Eq_2 dx_18 = wArg06;
	if (wArg06 != 0x00)
	{
		if (wArg06 == seg0800->t1AE6)
			ax = (uint16) fn0800_1AF0(wArg06, out cx, out dx_18, out bx);
		else
			ax = (uint16) fn0800_1B53(wArg06, out bx);
	}
	struct Eq_167 * ds_43 = seg0800->t1AEA;
	cxOut = cx;
	dxOut = dx_18;
	bxOut = bx;
	dsOut = ds_43;
	return (byte) ax;
}

// 0800:1C4D: Register Eq_2 fn0800_1C4D(Register Eq_2 ax, Register out Eq_2 cxOut, Register out Eq_2 dxOut, Register out Eq_2 bxOut)
// Called from:
//      fn0800_1D2E
Eq_2 fn0800_1C4D(Eq_2 ax, union Eq_2 & cxOut, union Eq_2 & dxOut, union Eq_2 & bxOut)
{
	word16 dx_133;
	word16 cx_132;
	cui16 ax_16 = fn0800_1FCB(seg0800->t1AEA, 0x00, out cx_132, out dx_133);
	if ((ax_16 & 0x0F) != 0x00)
	{
		word16 cx_134;
		word16 dx_135;
		fn0800_1FCB(seg0800->t1AEA, (uint32) (0x10 - (ax_16 & 0x0F)), out cx_134, out dx_135);
	}
	word16 cx_74;
	Eq_2 dx_75;
	if (fn0800_1FCB(seg0800->t1AEA, SEQ((uint16) SLICE(ax, byte, 8) >> 0x04, ax << 0x04), out cx_74, out dx_75) == ~0x00)
	{
		cxOut.u0 = <invalid>;
		dxOut.u0 = 0x00;
		bxOut.u0 = <invalid>;
		return 0x00;
	}
	else
	{
		seg0800->t1AE4 = dx_75;
		seg0800->t1AE6 = dx_75;
		*dx_75 = ax;
		*((word32) dx_75 + 2) = dx_75;
		cxOut.u0 = <invalid>;
		dxOut = dx_75;
		bxOut.u0 = <invalid>;
		return 0x04;
	}
}

// 0800:1CB1: Register Eq_2 fn0800_1CB1(Register Eq_2 ax, Register out Eq_3775 cxOut, Register out (ptr16 Eq_3776) dxOut, Register out Eq_2 bxOut)
// Called from:
//      fn0800_1D2E
Eq_2 fn0800_1CB1(Eq_2 ax, union Eq_3775 & cxOut, struct Eq_3776 & dxOut, union Eq_2 & bxOut)
{
	byte ah_9 = SLICE(ax, byte, 8);
	Eq_2 ds_17 = seg0800->t1AEA;
	struct Eq_3776 * dx_25;
	Eq_3775 cx_101;
	cui16 ax_22 = fn0800_1FCB(ds_17, SEQ((uint16) ah_9 >> 0x04, ax << 0x04), out cx_101, out dx_25);
	if (ax_22 != ~0x00)
	{
		if ((ax_22 & 0x0F) == 0x00)
		{
l0800_1CD4:
			Eq_3775 cx_76 = seg0800->t1AE6;
			seg0800->t1AE6 = (<type-error>) dx_25;
			dx_25->t0000 = ax;
			dx_25->t0002 = cx_76;
			cxOut = cx_76;
			dxOut = dx_25;
			bxOut.u0 = <invalid>;
			return 0x04;
		}
		word16 dx_132;
		if (fn0800_1FCB(ds_17, (uint32) (-(ax_22 & 0x0F) + 0x10), out cx_101, out dx_132) != ~0x00)
		{
			dx_25 = (struct Eq_3776 *) ((char *) &dx_25->t0000 + 1);
			goto l0800_1CD4;
		}
	}
	cxOut = cx_101;
	dxOut = 0x00;
	bxOut.u0 = <invalid>;
	return 0x00;
}

// 0800:1D0B: Register Eq_2 fn0800_1D0B(Register Eq_2 ax, Register Eq_2 dx, Register Eq_2 ds, Register out (ptr16 Eq_3831) dxOut, Register out (ptr16 Eq_3832) bxOut)
// Called from:
//      fn0800_1D2E
Eq_2 fn0800_1D0B(Eq_2 ax, Eq_2 dx, Eq_2 ds, struct Eq_3831 & dxOut, struct Eq_3832 & bxOut)
{
	*ds -= ax;
	word16 dx_11 = dx + Mem10[ds:0x00:word16];
	dx_11->t0000 = ax;
	dx_11->t0002 = dx;
	word16 bx_16 = dx_11 + Mem14[dx_11:0x00:word16];
	bx_16->ptr0002 = dx_11;
	dxOut = dx_11;
	bxOut = bx_16;
	return 0x04;
}

// 0800:1D2E: Register word16 fn0800_1D2E(Register Eq_2 ds, Stack Eq_2 wArg04, Register out ptr16 dxOut, Register out ptr16 bxOut, Register out Eq_789 bpOut, Register out (ptr16 Eq_790) esOut, Register out (ptr16 Eq_791) dsOut)
// Called from:
//      fn0800_07B4
//      fn0800_3C8A
//      fn209F_0149
word16 fn0800_1D2E(Eq_2 ds, Eq_2 wArg04, ptr16 & dxOut, ptr16 & bxOut, union Eq_789 & bpOut, struct Eq_790 & esOut, struct Eq_791 & dsOut)
{
	Eq_789 bp_14;
	struct Eq_791 * ds_16;
	ptr16 dx_19;
	ptr16 bx_20;
	struct Eq_790 * es_21;
	word16 cx_33;
	word16 ax_18 = fn0800_1D41(wArg04, 0x00, ds, out cx_33, out dx_19, out bx_20, out bp_14, out es_21, out ds_16);
	dxOut = dx_19;
	bxOut = bx_20;
	bpOut = bp_14;
	esOut = es_21;
	dsOut = ds_16;
	return ax_18;
}

// 0800:1D38: Register word16 fn0800_1D38(Register Eq_2 ds, Stack Eq_2 wArg04, Stack Eq_2 wArg06, Register out ptr16 cxOut, Register out ptr16 dxOut, Register out ptr16 bxOut, Register out Eq_3886 bpOut, Register out (ptr16 Eq_3887) dsOut)
// Called from:
//      fn0CE0_05FB
//      fn0CE0_08FC
//      fn1744_0972
//      fn209F_0149
//      fn209F_02E3
//      fn226D_00F9
//      fn2476_0282
//      fn263F_00A6
//      fn263F_033E
word16 fn0800_1D38(Eq_2 ds, Eq_2 wArg04, Eq_2 wArg06, ptr16 & cxOut, ptr16 & dxOut, ptr16 & bxOut, union Eq_3886 & bpOut, struct Eq_3887 & dsOut)
{
	Eq_3886 bp_12;
	ptr16 cx_13;
	struct Eq_3887 * ds_14;
	ptr16 dx_17;
	ptr16 bx_18;
	struct Eq_3893 * es_32;
	word16 ax_16 = fn0800_1D41(wArg04, wArg06, ds, out cx_13, out dx_17, out bx_18, out bp_12, out es_32, out ds_14);
	cxOut = cx_13;
	dxOut = dx_17;
	bxOut = bx_18;
	bpOut = bp_12;
	dsOut = ds_14;
	return ax_16;
}

// 0800:1D41: Register Eq_2 fn0800_1D41(Register Eq_2 ax, Register Eq_2 dx, Register Eq_2 ds, Register out Eq_3865 cxOut, Register out Eq_2 dxOut, Register out Eq_2 bxOut, Register out ptr16 bpOut, Register out (ptr16 Eq_3869) esOut, Register out (ptr16 Eq_3870) dsOut)
// Called from:
//      fn0800_1D2E
//      fn0800_1D38
Eq_2 fn0800_1D41(Eq_2 ax, Eq_2 dx, Eq_2 ds, union Eq_3865 & cxOut, union Eq_2 & dxOut, union Eq_2 & bxOut, ptr16 & bpOut, struct Eq_3869 & esOut, struct Eq_3870 & dsOut)
{
	Eq_3865 cx_140 = ax | dx;
	seg0800->t1AEA = ds;
	byte ch_142 = SLICE(cx_140, byte, 8);
	if (cx_140 != 0x00)
	{
		word16 dx_23 = dx + (ax <u 0x13);
		if (dx_23 >= 0x00 && (dx_23 & ~0x0F) == 0x00)
		{
			uint16 ax_34 = (word32) ax + 19 >> 0x04;
			Eq_2 ax_45 = SEQ(SLICE(ax_34, byte, 8) | (byte) (dx_23 << 0x04), (byte) ax_34);
			cx_140 = SEQ(ch_142, 0x04);
			if (seg0800->t1AE4 != 0x00)
			{
				Eq_2 dx_56 = seg0800->t1AE8;
				dx = dx_56;
				if (dx_56 != 0x00)
				{
					do
					{
						if (*dx >= ax_45)
						{
							if (*dx <= ax_45)
							{
								fn0800_1BC4(dx);
								bx = *((word32) dx + 8);
								*((word32) dx + 2) = bx;
								ax.u0 = 0x04;
							}
							else
								ax = fn0800_1D0B(ax_45, dx, dx, out dx, out bx);
							goto l0800_1DAC;
						}
						dx = *((word32) dx + 6);
					} while (dx != dx_56);
				}
				ax = fn0800_1CB1(ax_45, out cx_140, out dx, out bx);
			}
			else
				ax = fn0800_1C4D(ax_45, out cx_140, out dx, out bx);
		}
		else
		{
			ax.u0 = 0x00;
			dx.u0 = 0x00;
		}
	}
l0800_1DAC:
	struct Eq_3870 * ds_106 = seg0800->t1AEA;
	cxOut = cx_140;
	dxOut = dx;
	bxOut = bx;
	bpOut = wArg00;
	esOut = es;
	dsOut = ds_106;
	return ax;
}

// 0800:1F16: Register word16 fn0800_1F16(Register Eq_2 ds, Stack Eq_372 wArg02, Stack Eq_2 wArg04, Register out Eq_3989 cxOut, Register out Eq_372 dxOut, Register out ptr16 bxOut)
// Called from:
//      fn0800_1F8C
//      fn0800_1FCB
word16 fn0800_1F16(Eq_2 ds, Eq_372 wArg02, Eq_2 wArg04, union Eq_3989 & cxOut, union Eq_372 & dxOut, ptr16 & bxOut)
{
	Eq_372 dx_113;
	word16 ax_57;
	uint16 si_18 = (word32) wArg04 + 1 - *((word32) ds + 0x007B) + 0x3F >> 0x06;
	Eq_3989 cx_107 = SEQ(ch, 0x06);
	if (si_18 != *((word32) ds + 0x00009B50))
	{
		uint16 ax_25 = *((word32) ds + 0x007B) + (si_18 << 0x06);
		Eq_3989 si_22 = si_18 << 0x06;
		uint16 dx_23 = *((word32) ds + 0x0091);
		byte al_41 = (byte) ax_25;
		if (ax_25 > dx_23)
			si_22 = dx_23 - *((word32) ds + 0x007B);
		Eq_372 ax_42 = fn0800_28E6(al_41, ds, *((word32) ds + 0x007B), si_22, out bx);
		cx_107 = si_22;
		byte ch_111 = SLICE(si_22, byte, 8);
		dx_113 = ax_42;
		if (ax_42 != ~0x00)
		{
			Mem55[ds:0x91:word16] = Mem39[ds:0x7B:word16] + ax_42;
			*((word32) ds + 0x008F) = 0x00;
			ax_57 = 0x00;
l0800_1F87:
			cxOut = cx_107;
			dxOut = dx_113;
			bxOut = bx;
			return ax_57;
		}
		*((word32) ds + 0x00009B50) = si_22 >> 0x06;
		cx_107 = SEQ(ch_111, 0x06);
	}
	*((word32) ds + 141) = wArg04;
	*((word32) ds + 0x008B) = wArg02;
	dx_113 = wArg02;
	ax_57 = 0x01;
	goto l0800_1F87;
}

// 0800:1F8C: Register byte fn0800_1F8C(Register Eq_2 ds, Stack Eq_372 wArg02, Stack Eq_2 wArg04, Register out ptr16 cxOut, Register out ptr16 dxOut, Register out ptr16 bxOut)
// Called from:
//      fn0800_1AF0
byte fn0800_1F8C(Eq_2 ds, Eq_372 wArg02, Eq_2 wArg04, ptr16 & cxOut, ptr16 & dxOut, ptr16 & bxOut)
{
	word16 ax_55;
	ptr16 bx_15;
	ptr16 cx_16;
	ptr16 dx_17;
	fn0800_080D(wArg02, *((word32) ds + 0x0089), wArg04, *((word32) ds + 0x0087), out cx_16, out dx_17, out bx_15);
	Eq_2 C_19 = <invalid>;
	if (!C_19)
	{
		fn0800_080D(wArg02, *((word32) ds + 0x0091), wArg04, *((word32) ds + 0x008F), out cx_16, out dx_17, out bx_15);
		Eq_2 Z_32 = <invalid>;
		Eq_2 C_31 = <invalid>;
		if (!(Z_32 | C_31) && fn0800_1F16(ds, wArg02, wArg04, out cx_16, out dx_17, out bx_15) != 0x00)
		{
			ax_55 = 0x00;
l0800_1FC9:
			cxOut = cx_16;
			dxOut = dx_17;
			bxOut = bx_15;
			return (byte) ax_55;
		}
	}
	ax_55 = ~0x00;
	goto l0800_1FC9;
}

// 0800:1FCB: Register Eq_372 fn0800_1FCB(Register Eq_2 ds, Stack uint32 dwArg02, Register out ptr16 cxOut, Register out Eq_2 dxOut)
// Called from:
//      fn0800_1C4D
//      fn0800_1CB1
Eq_372 fn0800_1FCB(Eq_2 ds, uint32 dwArg02, ptr16 & cxOut, union Eq_2 & dxOut)
{
	ci16 wArg04_123 = SLICE(dwArg02, word16, 16);
	cup16 wArg02_125 = (word16) dwArg02;
	Eq_2 dx_105;
	Eq_372 ax_106;
	byte cl_18;
	word16 dx_19;
	uint16 ax_25 = (word32) *((word32) ds + 0x008B) + fn0800_0504(*((word32) ds + 141), 0x04, 0x00, out cl_18, out dx_19);
	ui32 dx_ax_119 = SEQ(dx_19 + (ax_25 < 0x00), ax_25) + dwArg02;
	cup16 ax_29 = (word16) dx_ax_119;
	ci16 dx_32 = SLICE(dx_ax_119, word16, 16);
	ptr16 cx_140 = SEQ(ch, cl_18);
	if (dx_32 < 0x0F || dx_32 <= 0x0F && ax_29 <= ~0x00)
	{
		Eq_2 dx_48;
		Eq_372 ax_46 = fn0800_0525(*((word32) ds + 0x008B), wArg04_123, *((word32) ds + 141), wArg02_125, out dx_48);
		word16 dx_167;
		word16 bx_168;
		fn0800_080D(ax_46, *((word32) ds + 0x0089), dx_48, *((word32) ds + 0x0087), out cx_140, out dx_167, out bx_168);
		Eq_2 sp_50 = <invalid>;
		Eq_2 C_65 = <invalid>;
		if (!C_65)
		{
			word16 dx_169;
			word16 bx_170;
			fn0800_080D(ax_46, *((word32) ds + 0x0091), dx_48, *((word32) ds + 0x008F), out cx_140, out dx_169, out bx_170);
			Eq_2 Z_78 = <invalid>;
			Eq_2 C_77 = <invalid>;
			if (!(Z_78 | C_77))
			{
				Eq_2 ax_81 = *((word32) ds + 141);
				Eq_372 dx_82 = *((word32) ds + 0x008B);
				ss->*((word32) sp_50 - 2) = dx_48;
				ss->*((word32) sp_50 - 4) = ax_46;
				word16 dx_171;
				word16 bx_172;
				if (fn0800_1F16(ds, ss->*((word32) sp_50 - 4), ss->*((word32) sp_50 - 2), out cx_140, out dx_171, out bx_172) != 0x00)
				{
					dx_105 = ax_81;
					ax_106 = dx_82;
l0800_2052:
					cxOut = cx_140;
					dxOut = dx_105;
					return ax_106;
				}
			}
		}
	}
	dx_105.u0 = ~0x00;
	ax_106.u0 = ~0x00;
	goto l0800_2052;
}

// 0800:2056: Register word16 fn0800_2056(Register Eq_2 ds, Register out ptr16 dxOut, Register out ptr16 bxOut)
// Called from:
//      fn2331_0167
//      fn2425_01E8
//      fn263F_043F
//      main
word16 fn0800_2056(Eq_2 ds, ptr16 & dxOut, ptr16 & bxOut)
{
	ptr16 bx_19;
	ptr16 dx_22;
	word16 cx_88;
	cup16 ax_18 = fn0800_0585(*((word32) ds + 0x008F), *((word32) ds + 141), *((word32) ds + 0x0091), *((word32) ds + 0x008B), out cx_88, out dx_22, out bx_19);
	ptr16 wLoc04_64 = dx_22;
	if (dx_22 >= 0x00 && (dx_22 > 0x00 || ax_18 > 0x10))
		wLoc04_64 = dx_22 - (ax_18 < 0x10);
	dxOut = wLoc04_64;
	bxOut = bx_19;
	return cx_88;
}

// 0800:20A6: void fn0800_20A6(Register Eq_2 ds)
// Called from:
//      fn0CE0_05FB
//      fn1D10_02AE
//      fn209F_0002
//      fn2331_0167
//      fn263F_03F3
//      fn263F_043F
//      main
//      fn268D_034A
//      fn268D_03E2
void fn0800_20A6(Eq_2 ds)
{
	if (*((word32) ds + 0x00009B52) != 0x00)
		*((word32) ds + 0x00009B52) = 0x00;
	else
		msdos_direct_character_input_without_echo();
}

// 0800:21F9: Register word16 fn0800_21F9(Register Eq_2 es, Register Eq_2 ds, Stack word16 wArg04, Stack (ptr32 Eq_4258) dwArg06, Stack (ptr32 Eq_4259) dwArg0A, Register out ptr16 dxOut, Register out ptr16 bxOut, Register out (ptr16 Eq_4262) dsOut)
// Called from:
//      fn2425_0286
//      fn2476_0104
//      fn2476_03E6
//      fn268D_034A
//      fn268D_03E2
word16 fn0800_21F9(Eq_2 es, Eq_2 ds, word16 wArg04, struct Eq_4258 * dwArg06, struct Eq_4259 * dwArg0A, ptr16 & dxOut, ptr16 & bxOut, struct Eq_4262 & dsOut)
{
	fn0800_0F6D(es, ds, wLoc10, fp - 0x0A);
	ptr16 bx_45;
	struct Eq_4262 * ds_48;
	ptr16 dx_49;
	word16 cx_46 = fn0800_222A(wArg04, dwArg06, dwArg0A, fp - 0x0A, out dx_49, out bx_45, out ds_48);
	dxOut = dx_49;
	bxOut = bx_45;
	dsOut = ds_48;
	return cx_46;
}

// 0800:222A: Register word16 fn0800_222A(Stack word16 wArg04, Stack (ptr32 Eq_4258) ptrArg06, Stack (ptr32 Eq_4259) ptrArg0A, Stack (ptr32 Eq_4281) ptrArg0E, Register out ptr16 dxOut, Register out ptr16 bxOut, Register out Eq_2 dsOut)
// Called from:
//      fn0800_21F9
word16 fn0800_222A(word16 wArg04, struct Eq_4258 * ptrArg06, struct Eq_4259 * ptrArg0A, struct Eq_4281 * ptrArg0E, ptr16 & dxOut, ptr16 & bxOut, union Eq_2 & dsOut)
{
	cu8 al_25 = (byte) wArg04;
	<anonymous> * ptrLoc06_152 = fp - 0x10;
	word16 v15_42 = ptrArg0E->w0000;
	word16 v16_46 = ptrArg0E->w0006;
	struct Eq_4311 Eq_4296::* sp_63;
	word16 cx_64;
	Eq_2 ax_65;
	ptr16 bx_66;
	ptr16 dx_67;
	Eq_2 SCZDOP_69;
	ptrLoc06_152();
	word16 di_56 = ptrArg06->w000A;
	word16 si_57 = ptrArg06->w0008;
	(ss->*sp_63).tFFFFFFFE = SCZDOP_69;
	(ss->*sp_63).tFFFFFFFC = SCZDOP_69;
	(ss->*sp_63).wFFFFFFFA = si_57;
	(ss->*sp_63).wFFFFFFF8 = v16_46;
	(ss->*sp_63).wFFFFFFF6 = v15_42;
	ptrArg0E->w0000 = (ss->*sp_63).wFFFFFFF6;
	ptrArg0E->w0006 = (ss->*sp_63).wFFFFFFF8;
	ptrArg0A->w0008 = (ss->*sp_63).wFFFFFFFA;
	ptrArg0A->t000E = (ss->*sp_63).tFFFFFFFC;
	ptrArg0A->t000C = (ss->*sp_63).tFFFFFFFE;
	ptrArg0A->t000C &= 0x01;
	ptrArg0A->w000A = di_56;
	ptrArg0A->ptr0006 = dx_67;
	ptrArg0A->w0004 = cx_64;
	ptrArg0A->ptr0002 = bx_66;
	ptrArg0A->t0000 = ax_65;
	Eq_2 ds_105 = (ss->*sp_63).t0000;
	if (ptrArg0A->t000C != 0x00)
	{
		(ss->*sp_63).t0000 = ax_65;
		(ss->*sp_63).tFFFFFFFE = ax_65;
		fn0800_05AD(ds_105, (ss->*sp_63).tFFFFFFFE);
	}
	dxOut = dx_67;
	bxOut = bx_66;
	dsOut = ds_105;
	return cx_64;
}

// 0800:22C3: Register word16 fn0800_22C3(Stack word16 wArg04, Stack Eq_4417 ptrArg06, Register out (ptr16 Eq_4418) dsOut)
// Called from:
//      fn2425_000A
word16 fn0800_22C3(word16 wArg04, Eq_4417 ptrArg06, struct Eq_4418 & dsOut)
{
	cu8 al_33 = (byte) wArg04;
	<anonymous> * ptrLoc06_151 = fp - 0x14;
	if (al_33 < 0x25 || al_33 > 0x26)
		;
	struct Eq_4431 Eq_4422::* sp_74;
	word16 cx_75;
	word16 ax_76;
	word16 bx_77;
	word16 dx_78;
	Eq_4436 SCZDOP_80;
	ptrLoc06_151();
	Eq_4437 ds_di_69 = *((word32) ptrArg06 + 0x0C);
	word16 si_67 = *((word32) ptrArg06 + 0x0A);
	struct Eq_4445 * es_68 = *((word32) ptrArg06 + 16);
	(ss->*sp_74).ptrFFFFFFFE = SLICE(ds_di_69, selector, 16);
	(ss->*sp_74).wFFFFFFFC = (word16) ds_di_69;
	(ss->*sp_74).wFFFFFFFA = fp - 2;
	(ss->*sp_74).tFFFFFFF8 = SCZDOP_80;
	struct Eq_4465 * ds_di_90 = (ss->*sp_74).ptr0000;
	ds_di_90->w0000 = ax_76;
	ds_di_90->w0002 = bx_77;
	ds_di_90->w0004 = cx_75;
	ds_di_90->w0006 = dx_78;
	ds_di_90->w000A = si_67;
	ds_di_90->ptr0010 = es_68;
	ds_di_90->t0012 = (ss->*sp_74).tFFFFFFF8;
	ds_di_90->w0008 = (ss->*sp_74).wFFFFFFFA;
	ds_di_90->w000C = (ss->*sp_74).wFFFFFFFC;
	ds_di_90->ptr000E = (ss->*sp_74).ptrFFFFFFFE;
	fn0800_2309();
	Eq_2 sp_109 = <invalid>;
	word16 bp_122 = ss->*(ss->*((word32) sp_109 + 2));
	dsOut = ss->*sp_109;
	return bp_122;
}

// 0800:2309: void fn0800_2309()
// Called from:
//      fn0800_22C3
void fn0800_2309()
{
}

// 0800:2367: Register Eq_2 fn0800_2367(Register Eq_2 ds, Stack word16 wArg06, Register out ptr16 cxOut, Register out Eq_2 dxOut, Register out ptr16 bxOut)
// Called from:
//      fn0800_3615
Eq_2 fn0800_2367(Eq_2 ds, word16 wArg06, ptr16 & cxOut, union Eq_2 & dxOut, ptr16 & bxOut)
{
	byte bArg06 = (byte) wArg06;
	msdos_unknown_2144();
	Eq_2 dx_31 = (word16) ptrArg08;
	Eq_2 ax_21 = SEQ(0x44, bArg06);
	if (!C)
	{
		if (wArg06 == 0x00)
			ax_21 = dx_31;
	}
	else
		ax_21 = fn0800_05AD(ds, ax_21);
	cxOut = wArg0C;
	dxOut = dx_31;
	bxOut = wArg04;
	return ax_21;
}

// 0800:2390: Register int16 fn0800_2390(Register Eq_947 al, Register Eq_2 ds)
// Called from:
//      fn0CE0_05FB
//      fn1D10_02AE
//      fn2331_0167
//      fn268D_03E2
int16 fn0800_2390(Eq_947 al, Eq_2 ds)
{
	int16 ax_10;
	if (*((word32) ds + 0x00009B52) != 0x00)
		ax_10 = 0x01;
	else
	{
		msdos_get_stdin_status();
		ax_10 = (int16) al;
	}
	return ax_10;
}

// 0800:2456: void fn0800_2456(Register Eq_2 ds)
// Called from:
//      fn0800_1153
void fn0800_2456(Eq_2 ds)
{
	(*((word32) ds + 0x00009BAE))();
}

// 0800:245A: void fn0800_245A(Register Eq_2 ds)
// Called from:
//      fn0800_08AC
void fn0800_245A(Eq_2 ds)
{
	(*((word32) ds + 0x00009BB0))();
}

// 0800:245E: void fn0800_245E(Register Eq_2 ds)
// Called from:
//      fn0800_08AC
void fn0800_245E(Eq_2 ds)
{
	(*((word32) ds + 0x00009BB2))();
}

// 0800:2462: void fn0800_2462(Register Eq_2 ds)
// Called from:
//      fn0800_08AC
void fn0800_2462(Eq_2 ds)
{
	(*((word32) ds + 0x00009BB4))();
}

// 0800:28E6: Register ptr16 fn0800_28E6(Register byte al, Register Eq_2 ds, Stack (ptr16 Eq_3998) psegArg04, Stack Eq_3989 wArg06, Register out ptr16 bxOut)
// Called from:
//      fn0800_1F16
ptr16 fn0800_28E6(byte al, Eq_2 ds, struct Eq_3998 * psegArg04, Eq_3989 wArg06, ptr16 & bxOut)
{
	ptr16 ax_27;
	Eq_2 ax_18 = SEQ(0x4A, al);
	ptr16 bx_12;
	if (!msdos_resize_memory_block(psegArg04, wArg06, out bx_12))
		ax_27 = ~0x00;
	else
	{
		fn0800_05AD(ds, ax_18);
		ax_27 = bx_12;
	}
	bxOut = bx_12;
	return ax_27;
}

// 0800:295A: void fn0800_295A(Stack Eq_4586 wArg04)
// Called from:
//      fn268D_05FB
void fn0800_295A(Eq_4586 wArg04)
{
	if (wArg04 > 0x12)
	{
		uint16 ax_17 = (uint16) (1193181 /u wArg04);
		byte bl_28 = (byte) ax_17;
		byte bh_31 = SLICE(ax_17, byte, 8);
		byte al_19 = __inb(0x61);
		if ((al_19 & 0x03) == 0x00)
		{
			__outb(0x61, al_19 | 0x03);
			__outb(0x43, ~0x49);
		}
		__outb(66, bl_28);
		__outb(66, bh_31);
	}
}

// 0800:2986: void fn0800_2986()
// Called from:
//      fn268D_05FB
void fn0800_2986()
{
	__outb(0x61, __inb(0x61) & 252);
}

// 0800:29B9: Register Eq_4628 fn0800_29B9(Register Eq_2 ds, Stack Eq_2 wArg08)
// Called from:
//      fn0F2B_153F
Eq_4628 fn0800_29B9(Eq_2 ds, Eq_2 wArg08)
{
	word16 cx_76;
	word16 dx_77;
	Eq_4628 ax_21 = fn0800_2A76(ds, 0x00, out cx_76, out dx_77);
	if (ax_21 != ~0x00)
	{
		if ((wArg08 & 0x02) != 0x00 && (ax_21 & 0x01) != 0x00)
		{
			*((word32) ds + 0x007F) = 0x05;
			ax_21.u0 = ~0x00;
		}
		else
			ax_21.u0 = 0x00;
	}
	return ax_21;
}

// 0800:29F0: Register uint16 fn0800_29F0(Register Eq_2 ds, Stack Eq_4661 ptrArg04, Register out Eq_4662 dxOut)
// Called from:
//      fn0800_418D
//      fn268D_000F
//      fn268D_0974
uint16 fn0800_29F0(Eq_2 ds, Eq_4661 ptrArg04, union Eq_4662 & dxOut)
{
	struct Eq_4663 * es_162 = SLICE(ptrArg04, selector, 16);
	byte Eq_4663::* si_163 = (word16) ptrArg04;
	uint16 ax_113 = 0x00;
	Eq_4662 dx_116 = 0x00;
	do
	{
		cu8 bl_31 = es_162->*si_163;
		++si_163;
	} while ((Mem19[ds:CONVERT(bl_31, byte, uint16) + ~0x691C:byte] & 0x01) != 0x00);
	ci16 bp_119 = 0x00;
	if (bl_31 != 0x2B)
	{
		if (bl_31 != 0x2D)
		{
l0800_2A21:
			Mem151 = Mem19;
			if (bl_31 > 0x39)
			{
l0800_2A55:
				if (bp_119 >= 0x01)
				{
					ax_113 = -ax_113;
					dx_116 = -dx_116 - (ax_113 == 0x00);
				}
				dxOut = dx_116;
				return ax_113;
			}
			cu8 bl_56 = bl_31 - 0x30;
			uint16 bx_70 = (uint16) bl_56;
			if (bl_56 < 0x00)
				goto l0800_2A55;
			Eq_4710 dx_ax_66 = ax_113 * 0x0A;
			ui8 dh_74 = SLICE(dx_ax_66, byte, 24);
			ui24 dl_ax_169 = (word24) dx_ax_66 + SEQ(dh_74, bx_70);
			uint8 dl_76 = SLICE(dl_ax_169, byte, 16);
			ax_113 = (word16) dl_ax_169;
			dx_116 = SEQ(dh_74, dl_76);
			if (dl_76 != 0x00)
			{
				while (true)
				{
					cu8 bl_82 = es_162->*si_163;
					++si_163;
					if (bl_82 > 0x39)
						break;
					uint16 bx_112 = (uint16) (bl_82 - 0x30);
					if (bl_82 < 0x30)
						break;
					Eq_4743 dx_ax_93 = ax_113 * 0x0A;
					int32 dx_ax_172 = SEQ((word16) (dx_116 * 0x0A), (word16) dx_ax_93) + SEQ(SLICE(dx_ax_93, word16, 16), bx_112);
					ax_113 = (word16) dx_ax_172;
					dx_116 = SLICE(dx_ax_172, word16, 16);
				}
				goto l0800_2A55;
			}
			goto l0800_2A1D;
		}
		bp_119 = 0x01;
	}
l0800_2A1D:
	bl_31 = es_162->*si_163;
	++si_163;
	goto l0800_2A21;
}

// 0800:2A76: Register Eq_2 fn0800_2A76(Register Eq_2 ds, Stack byte bArg08, Register out Eq_2 cxOut, Register out ptr16 dxOut)
// Called from:
//      fn0800_29B9
//      fn0800_3615
Eq_2 fn0800_2A76(Eq_2 ds, byte bArg08, union Eq_2 & cxOut, ptr16 & dxOut)
{
	Eq_2 ax_22;
	msdos_unknown_2143();
	Eq_2 cx_12 = wArg0A;
	ptr16 dx_48 = (word16) ptrArg04;
	Eq_2 ax_20 = SEQ(0x43, bArg08);
	if (!C)
	{
		cx_12 = ax_20;
		ax_22 = wArg0A;
	}
	else
		ax_22 = fn0800_05AD(ds, ax_20);
	cxOut = cx_12;
	dxOut = dx_48;
	return ax_22;
}

// 0800:2A93: Register Eq_2 fn0800_2A93(Register byte al, Register Eq_2 ds, Stack Eq_2 wArg04, Register out Eq_2 dxOut, Register out ptr16 bxOut)
// Called from:
//      fn0800_2B50
//      fn0CE0_0007
//      fn0CE0_08FC
//      fn0E31_0002
//      fn0F2B_153F
//      fn209F_02E3
//      fn209F_08D2
//      fn2476_0630
//      fn2504_094D
//      fn263F_033E
//      fn268D_03E2
Eq_2 fn0800_2A93(byte al, Eq_2 ds, Eq_2 wArg04, union Eq_2 & dxOut, ptr16 & bxOut)
{
	Eq_2 ax_20;
	if (wArg04 >= *((word32) ds + 0x00009980))
		ax_20 = fn0800_05AD(ds, 0x06);
	else
	{
		SEQ(ds, 0x9982)[wArg04 * 0x02] = 0x00;
		ax_20 = fn0800_2ABB(al, ds, wArg04, out bx);
	}
	dxOut = wArg04;
	bxOut = bx;
	return ax_20;
}

// 0800:2ABB: Register Eq_2 fn0800_2ABB(Register byte al, Register Eq_2 ds, Stack Eq_2 wArg04, Register out Eq_2 bxOut)
// Called from:
//      fn0800_2A93
//      fn0800_3615
Eq_2 fn0800_2ABB(byte al, Eq_2 ds, Eq_2 wArg04, union Eq_2 & bxOut)
{
	Eq_2 ax_17;
	Eq_2 bx_10 = wArg04;
	Eq_2 ax_14 = SEQ(0x3E, al);
	if (!msdos_close_file(wArg04))
	{
		SEQ(ds, 0x9982)[wArg04 * 0x02] = 0x00;
		bx_10 = wArg04 << 0x01;
		ax_17.u0 = 0x00;
	}
	else
		ax_17 = fn0800_05AD(ds, ax_14);
	bxOut = bx_10;
	return ax_17;
}

// 0800:2AD9: Register Eq_2 fn0800_2AD9(Register Eq_2 ds, Stack Eq_2 wArg04, Register out ptr16 dxOut)
// Called from:
//      fn0800_3334
//      fn1D10_0FB3
Eq_2 fn0800_2AD9(Eq_2 ds, Eq_2 wArg04, ptr16 & dxOut)
{
	Eq_2 wLoc08_109;
	Eq_2 ax_118;
	if (wArg04 >= *((word32) ds + 0x00009980))
	{
		wLoc08_109.u0 = 0x06;
		goto l0800_2B49;
	}
	if ((SEQ(ds, 0x9982)[wArg04 * 0x02] & 0x0200) != 0x00)
	{
l0800_2AFB:
		ax_118.u0 = 0x01;
		goto l0800_2B4C;
	}
	Eq_2 ax_19 = 0x4400;
	byte dl_23 = (byte) dx;
	if (!msdos_ioctl_get_device_info(wArg04, out dx))
	{
		if ((dl_23 & 0x80) != 0x00)
		{
l0800_2B44:
			ax_118.u0 = 0x00;
l0800_2B4C:
			dxOut = dx;
			return ax_118;
		}
		ax_19.u0 = 0x4201;
		dx = 0x00;
		if (!msdos_set_file_position(wArg04, 0x00, 0x01, 0x4201))
		{
			ax_19.u0 = 0x4202;
			dx = 0x4201;
			if (!msdos_set_file_position(wArg04, 0x00, 0x02, 0x4202))
			{
				ax_19.u0 = 0x4200;
				if (!msdos_set_file_position(wArg04, 0x4201, 0x00, 0x42014200))
				{
					if (true && (false || true))
						goto l0800_2AFB;
					goto l0800_2B44;
				}
			}
		}
	}
	wLoc08_109 = ax_19;
l0800_2B49:
	ax_118 = fn0800_05AD(ds, wLoc08_109);
	goto l0800_2B4C;
}

// 0800:2B50: Register byte fn0800_2B50(Register Eq_2 ds, Stack Eq_2 ptrArg04, Register out Eq_4901 bxOut, Register out Eq_2 dsOut)
// Called from:
//      fn0800_2F10
//      fn263F_00A6
//      fn268D_000F
byte fn0800_2B50(Eq_2 ds, Eq_2 ptrArg04, union Eq_4901 & bxOut, union Eq_2 & dsOut)
{
	Eq_4901 wArg04 = (word16) ptrArg04;
	Eq_2 wArg06 = SLICE(ptrArg04, word16, 16);
	if ((wArg04 | wArg06) != 0x00)
	{
		bx = wArg04;
		if (*((word32) ptrArg04 + 18) != wArg04)
			goto l0800_2C03;
		if (*((word32) ptrArg04 + 6) != 0x00)
		{
			if (*ptrArg04 < 0x00)
			{
				cx = wArg06;
				if (fn0800_2C08(ds, ptrArg04, out bx) != 0x00)
					goto l0800_2C03;
			}
			if ((*((word32) ptrArg04 + 2) & 0x04) != 0x00)
			{
				Eq_2 v17_63 = *((word32) ptrArg04 + 0x0A);
				word16 cx_258;
				word16 dx_259;
				word16 bx_260;
				fn0800_1C24(ds, v17_63, out cx_258, out dx_259, out bx_260, out ds);
				cx = v17_63;
			}
		}
		if (*((word32) ptrArg04 + 4) >= 0x00)
		{
			Eq_2 ax_94 = (int16) *((word32) ptrArg04 + 4);
			word16 dx_261;
			word16 bx_262;
			fn0800_2A93((byte) ax_94, ds, ax_94, out dx_261, out bx_262);
			cx = ax_94;
		}
		((word32) ptrArg04 + 2)->u0 = 0x00;
		((word32) ptrArg04 + 6)->u0 = 0x00;
		ptrArg04->u0 = 0x00;
		((word32) ptrArg04 + 4)->u0 = ~0x00;
		bx = (word16) ptrArg04;
		if (*((word32) ptrArg04 + 16) != 0x00)
		{
			fn0800_06D4(ds, *((word32) ptrArg04 + 16), 0x00, 0x00, 0x00);
			Eq_2 dx_ax_255 = <invalid>;
			fn0800_1123((byte) (word16) dx_ax_255, ds, dx_ax_255);
			((word32) ptrArg04 + 16)->u0 = 0x00;
			cx = SLICE(dx_ax_255, word16, 16);
			bx = (word16) ptrArg04;
		}
	}
l0800_2C03:
	bxOut = bx;
	dsOut = ds;
	return SLICE(cx, byte, 8);
}

// 0800:2C08: Register word16 fn0800_2C08(Register Eq_2 ds, Stack Eq_2 ptrArg04, Register out Eq_4943 bxOut)
// Called from:
//      fn0800_2B50
//      fn0800_2E12
//      fn0800_3106
//      fn0800_3266
//      fn0800_380A
word16 fn0800_2C08(Eq_2 ds, Eq_2 ptrArg04, union Eq_4943 & bxOut)
{
	Eq_4943 wArg04 = (word16) ptrArg04;
	cui16 wArg06 = SLICE(ptrArg04, word16, 16);
	Eq_4943 bx_106;
	word16 ax_103;
	if ((wArg04 | wArg06) == 0x00)
	{
		bx_106 = fn0800_2E12(ds);
		goto l0800_2CD0;
	}
	if (*((word32) ptrArg04 + 18) == wArg04)
	{
		bx_106 = wArg04;
		if (*ptrArg04 >= 0x00)
		{
			if ((*((word32) ptrArg04 + 2) & 0x08) != 0x00 || *((word32) ptrArg04 + 0x0E) == wArg06 && *((word32) ptrArg04 + 0x0C) == (word16) wArg04.u0 + 5)
			{
				ptrArg04->u1 = 0x00;
				bx_106 = wArg04;
				if (*((word32) ptrArg04 + 0x0E) == wArg06 && *((word32) ptrArg04 + 0x0C) == (word16) wArg04.u0 + 5)
				{
					cui16 dx_100 = *((word32) ptrArg04 + 8);
					*((word32) ptrArg04 + 0x0E) = *((word32) ptrArg04 + 0x0A);
					*((word32) ptrArg04 + 0x0C) = dx_100;
				}
			}
		}
		else
		{
			word16 ax_32 = Mem11[ptrArg04 + 0x06:word16] + Mem11[ptrArg04 + 0x00:word16];
			ptrArg04->u1 = *ptrArg04 - (ax_32 + 0x01);
			cui16 ax_40 = *((word32) ptrArg04 + 0x0A);
			cui16 dx_41 = *((word32) ptrArg04 + 8);
			*((word32) ptrArg04 + 0x0E) = ax_40;
			*((word32) ptrArg04 + 0x0C) = dx_41;
			if (fn0800_44C8(ds, (int16) *((word32) ptrArg04 + 4), SEQ(ax_40, dx_41), ax_32 + 0x01, out bx_106) != ax_32 + 0x01)
			{
				bx_106 = wArg04;
				if ((*((word32) ptrArg04 + 2) & 0x0200) == 0x00)
				{
					*((word32) ptrArg04 + 2) |= 0x10;
					goto l0800_2C28;
				}
			}
		}
l0800_2CD0:
		ax_103 = 0x00;
		goto l0800_2CD2;
	}
	else
	{
l0800_2C28:
		bx_106 = wArg04;
		ax_103 = ~0x00;
l0800_2CD2:
		bxOut = bx_106;
		return ax_103;
	}
}

// 0800:2CD5: void fn0800_2CD5(Register Eq_2 ds, Stack Eq_2 dwArg04, Stack Eq_5151 wArg08, Stack Eq_2 ptrArg0A)
// Called from:
//      fn263F_0008
void fn0800_2CD5(Eq_2 ds, Eq_2 dwArg04, Eq_5151 wArg08, Eq_2 ptrArg0A)
{
	word16 wArg06 = SLICE(dwArg04, word16, 16);
	word16 wArg04 = (word16) dwArg04;
	Eq_5151 di_16 = wArg08;
	uint16 cx_17 = 0x00;
	Eq_2 ptrLoc06_151 = dwArg04;
	while (true)
	{
		word16 wLoc06_152 = (word16) ptrLoc06_151;
		word16 wLoc04_155 = SLICE(ptrLoc06_151, word16, 16);
		if (cx_17 == 0x0A)
			break;
		--di_16;
		if (di_16 <= 0x00)
			break;
		uint16 ax_48;
		Eq_2 v17_36 = *ptrArg0A - 0x01;
		*ptrArg0A = v17_36;
		if (v17_36 >= 0x00)
		{
			Eq_2 ax_61 = *((word32) ptrArg0A + 0x0E);
			Eq_2 si_62 = *((word32) ptrArg0A + 0x0C);
			*((word32) ptrArg0A + 0x0C) = (word32) *((word32) ptrArg0A + 0x0C) + 1;
			ax_48 = (uint16) (ax_61->*si_62);
		}
		else
			ax_48 = fn0800_331C(ds, ptrArg0A);
		cx_17 = ax_48;
		Eq_2 cl_78 = (byte) ax_48;
		if (ax_48 == ~0x00)
			break;
		*ptrLoc06_151 = cl_78;
		ptrLoc06_151 = SEQ(wLoc04_155, wLoc06_152 + 0x01);
	}
	if (cx_17 != ~0x00 || (wLoc04_155 != wArg06 || wLoc06_152 != wArg04))
	{
		ptrLoc06_151->u0 = 0x00;
		(*((word32) ptrArg0A + 2) & 0x10) == 0x00;
	}
}

// 0800:2D71: Register Eq_2 fn0800_2D71(Register byte al, Register Eq_2 ds, Stack segptr32 ptrArg04, Stack Eq_5237 ptrArg08, Stack word16 wArg0C)
// Called from:
//      fn263F_00A6
Eq_2 fn0800_2D71(byte al, Eq_2 ds, segptr32 ptrArg04, Eq_5237 ptrArg08, word16 wArg0C)
{
	Eq_2 ax_53;
	word32 es_bx_12 = msdos_get_disk_transfer_area_address();
	msdos_set_DTA(SLICE(ptrArg08, selector, 16), (word16) ptrArg08);
	msdos_find_first_file(wArg0C, SLICE(ptrArg04, selector, 16), (word16) ptrArg04);
	msdos_set_DTA(SLICE(es_bx_12, selector, 16), (word16) es_bx_12);
	Eq_2 ax_36 = SEQ(0x4E, al);
	if (!(fp - 6))
		ax_53.u0 = 0x00;
	else
		ax_53 = fn0800_05AD(ds, ax_36);
	return ax_53;
}

// 0800:2DA4: Register Eq_2 fn0800_2DA4(Register byte al, Register Eq_2 ds, Stack segptr32 ptrArg04)
// Called from:
//      fn263F_00A6
Eq_2 fn0800_2DA4(byte al, Eq_2 ds, segptr32 ptrArg04)
{
	Eq_2 ax_49;
	word32 es_bx_12 = msdos_get_disk_transfer_area_address();
	msdos_set_DTA(SLICE(ptrArg04, selector, 16), (word16) ptrArg04);
	msdos_find_next_file();
	msdos_set_DTA(SLICE(es_bx_12, selector, 16), (word16) es_bx_12);
	Eq_2 ax_32 = SEQ(0x4F, al);
	if (!(fp - 6))
		ax_49.u0 = 0x00;
	else
		ax_49 = fn0800_05AD(ds, ax_32);
	return ax_49;
}

// 0800:2DD1: Register word16 fn0800_2DD1(Register Eq_2 ds, Stack Eq_2 wArg04)
// Called from:
//      fn2504_094D
//      fn268D_03E2
word16 fn0800_2DD1(Eq_2 ds, Eq_2 wArg04)
{
	word16 ax_57;
	Eq_2 ax_10 = 0x4201;
	if (!msdos_set_file_position(wArg04, 0x00, 0x01, 0x4201))
	{
		ax_10.u0 = 0x4202;
		if (!msdos_set_file_position(wArg04, 0x00, 0x02, 0x4202))
		{
			ax_10.u0 = 0x4200;
			if (!msdos_set_file_position(wArg04, 0x4201, 0x00, 0x42014200))
			{
				ax_57 = 0x4202;
				return ax_57;
			}
		}
	}
	ax_57 = (word16) (word32) fn0800_05AD(ds, ax_10);
	return ax_57;
}

// 0800:2E12: Register Eq_2 fn0800_2E12(Register Eq_2 ds)
// Called from:
//      fn0800_2C08
Eq_2 fn0800_2E12(Eq_2 ds)
{
	Eq_2 si_20 = *((word32) ds + 0x00009980);
	struct Eq_5357 * ptrLoc06_83 = SEQ(ds, ~0x680F);
	while (true)
	{
		word16 wLoc04_84 = SLICE(ptrLoc06_83, word16, 16);
		word16 wLoc06_86 = (word16) ptrLoc06_83;
		--si_20;
		if (si_20 == 0x00)
			break;
		bx = (word16) ptrLoc06_83;
		if ((ptrLoc06_83->w0002 & 0x03) != 0x00)
			fn0800_2C08(ds, bx, out bx);
		ptrLoc06_83 = SEQ(wLoc04_84, wLoc06_86 + 0x14);
	}
	return bx;
}

// 0800:2E54: Register cui16 fn0800_2E54(Register Eq_2 ds, Stack (ptr32 word16) ptrArg02, Stack (ptr32 cui16) ptrArg06, Stack Eq_5386 ptrArg0A, Register out Eq_5387 clOut)
// Called from:
//      fn0800_2F10
cui16 fn0800_2E54(Eq_2 ds, word16 * ptrArg02, cui16 * ptrArg06, Eq_5386 ptrArg0A, union Eq_5387 & clOut)
{
	word16 wArg0A_163 = (word16) ptrArg0A;
	word16 wArg0C_166 = SLICE(ptrArg0A, word16, 16);
	cui16 ax_142;
	cui16 si_107;
	cui16 dx_32;
	word16 di_135 = 0x00;
	Eq_5387 cl_21 = *ptrArg0A;
	union Eq_5387 * ptrArg0A_167 = SEQ(wArg0C_166, wArg0A_163 + 0x01);
	if (cl_21 == 114)
	{
		dx_32 = 0x01;
		si_107 = 0x01;
	}
	else
	{
		if (cl_21 == 0x77)
			dx_32 = 770;
		else
		{
			if (cl_21 != 0x61)
			{
				ax_142 = 0x00;
l0800_2F0A:
				clOut = cl_21;
				return ax_142;
			}
			dx_32 = 0x0902;
		}
		di_135 = 0x80;
		si_107 = 0x02;
	}
	cl_21 = *ptrArg0A_167;
	union Eq_5387 * ptrArg0A_172 = SEQ(wArg0C_166, wArg0A_163 + 0x02);
	if (cl_21 == 0x2B || *ptrArg0A_172 == 0x2B && (cl_21 == 116 || cl_21 == 0x62))
	{
		if (cl_21 == 0x2B)
			cl_21 = *ptrArg0A_172;
		dx_32 = dx_32 & ~0x03 | 0x04;
		di_135 = 0x0180;
		si_107 = 0x03;
	}
	cui16 dx_103;
	if (cl_21 == 116)
	{
		dx_103 = dx_32 | 0x4000;
		goto l0800_2EF0;
	}
	if (cl_21 == 0x62)
		dx_103 = dx_32 | 0x8000;
	else
	{
		dx_103 = dx_32 | *((word32) ds + 0x000099AA) & 0xC000;
		if ((dx_103 & 0x8000) == 0x00)
			goto l0800_2EF0;
	}
	si_107 |= 0x40;
l0800_2EF0:
	((word32) ds + 38890)->u0 = 0x0800;
	((word32) ds + 38888)->u0 = 18008;
	*ptrArg06 = dx_103;
	*ptrArg02 = di_135;
	ax_142 = si_107;
	goto l0800_2F0A;
}

// 0800:2F10: Register word16 fn0800_2F10(Register Eq_2 ds, Stack cui16 wArg02, Stack Eq_5386 dwArg04, Stack Eq_2 dwArg08, Stack Eq_2 ptrArg0C, Register out ptr16 cxOut, Register out ptr16 dxOut, Register out ptr16 bxOut, Register out Eq_2 dsOut)
// Called from:
//      fn0800_302B
word16 fn0800_2F10(Eq_2 ds, cui16 wArg02, Eq_5386 dwArg04, Eq_2 dwArg08, Eq_2 ptrArg0C, ptr16 & cxOut, ptr16 & dxOut, ptr16 & bxOut, union Eq_2 & dsOut)
{
	ptr16 wArg0E_244 = SLICE(ptrArg0C, word16, 16);
	ptr16 dx_170;
	ptr16 bx_168;
	word16 ax_171;
	byte cl_30;
	Eq_2 ax_28 = fn0800_2E54(ds, fp - 0x06, fp - 0x04, dwArg04, out cl_30);
	*((word32) ptrArg0C + 2) = ax_28;
	ptr16 cx_155 = SEQ(ch, cl_30);
	if (ax_28 == 0x00)
	{
l0800_2F5E:
		((word32) ptrArg0C + 4)->u0 = ~0x00;
		((word32) ptrArg0C + 2)->u0 = 0x00;
		bx_168 = (word16) ptrArg0C;
		goto l0800_2F6C;
	}
	else
	{
		if (*((word32) ptrArg0C + 4) < 0x00)
		{
			word16 dx_299;
			word16 bx_300;
			Eq_2 al_73 = (byte) fn0800_3615(ds, dwArg08, wLoc04 | wArg02, wLoc06, out cx_155, out dx_299, out bx_300);
			*((word32) ptrArg0C + 4) = al_73;
			if (al_73 < 0x00)
				goto l0800_2F5E;
		}
		if (fn0800_05F8((int16) *((word32) ptrArg0C + 4)) != 0x00)
			*((word32) ptrArg0C + 2) |= 0x0200;
		ci16 ax_124;
		if ((*((word32) ptrArg0C + 2) & 0x0200) != 0x00)
			ax_124 = 0x01;
		else
			ax_124 = 0x00;
		ptr16 wArg0E_252 = SLICE(ptrArg0C, word16, 16);
		word16 wArg0C_253 = (word16) ptrArg0C;
		if (fn0800_3C8A(ds, ptrArg0C, 0x00, 0x00, ax_124, 0x0200, out cx_155, out ds) == 0x00)
		{
			((word32) ptrArg0C + 16)->u0 = 0x00;
			bx_168 = (word16) ptrArg0C;
			dx_170 = wArg0E_252;
			ax_171 = wArg0C_253;
			goto l0800_2FDB;
		}
		fn0800_2B50(ds, ptrArg0C, out bx_168, out ds);
		cx_155 = wArg0E_244;
l0800_2F6C:
		dx_170 = 0x00;
		ax_171 = 0x00;
l0800_2FDB:
		cxOut = cx_155;
		dxOut = dx_170;
		bxOut = bx_168;
		dsOut = ds;
		return ax_171;
	}
}

// 0800:2FE1: Register word16 fn0800_2FE1(Register Eq_2 ds)
// Called from:
//      fn0800_302B
word16 fn0800_2FE1(Eq_2 ds)
{
	struct Eq_5617 * ptrLoc06_61 = SEQ(ds, ~0x680F);
	do
	{
		cup16 wLoc06_62 = (word16) ptrLoc06_61;
		word16 wLoc04_66 = SLICE(ptrLoc06_61, word16, 16);
		if (ptrLoc06_61->b0004 < 0x00)
			break;
		ptrLoc06_61 = SEQ(wLoc04_66, wLoc06_62 + 0x14);
	} while (wLoc06_62 < (word16) (*((word32) ds + 0x00009980) *s 0x14) + ~0x680F);
	word16 bx_43 = (word16) ptrLoc06_61;
	ptrLoc06_61->b0004 < 0x00;
	return bx_43;
}

// 0800:302B: Register word16 fn0800_302B(Register Eq_2 ds, Stack Eq_2 dwArg04, Stack Eq_5386 dwArg08, Register out ptr16 cxOut, Register out ptr16 dxOut, Register out ptr16 bxOut, Register out Eq_2 dsOut)
// Called from:
//      fn263F_00A6
//      fn268D_000F
word16 fn0800_302B(Eq_2 ds, Eq_2 dwArg04, Eq_5386 dwArg08, ptr16 & cxOut, ptr16 & dxOut, ptr16 & bxOut, union Eq_2 & dsOut)
{
	ptr16 dx_52;
	word16 ax_49;
	Eq_2 dx_ax_105 = <invalid>;
	ptr16 bx_13 = fn0800_2FE1(ds);
	if (((word16) dx_ax_105 | SLICE(dx_ax_105, word16, 16)) == 0x00)
	{
		dx_52 = 0x00;
		ax_49 = 0x00;
	}
	else
		ax_49 = fn0800_2F10(ds, 0x00, dwArg08, dwArg04, dx_ax_105, out cx, out dx_52, out bx_13, out ds);
	cxOut = cx;
	dxOut = dx_52;
	bxOut = bx_13;
	dsOut = ds;
	return ax_49;
}

// 0800:3060: Register Eq_962 fn0800_3060(Register Eq_962 di, Register Eq_2 ds, Stack word16 wArg04, Stack Eq_2 wArg06, Stack (memptr Eq_2 Eq_968) wArg08, Stack Eq_2 wArg0A)
// Called from:
//      fn268D_000F
Eq_962 fn0800_3060(Eq_962 di, Eq_2 ds, word16 wArg04, Eq_2 wArg06, struct Eq_968 Eq_2::* wArg08, Eq_2 wArg0A)
{
	return fn0800_08AC(di, ds, 0x3331, 0x445A, wArg04, wArg06, wArg08, wArg0A);
}

// 0800:3084: Register ui16 fn0800_3084(Stack Eq_2 ptrArg02)
// Called from:
//      fn0800_3106
ui16 fn0800_3084(Eq_2 ptrArg02)
{
	ui16 cx_108;
	ui16 si_29;
	if (*ptrArg02 < 0x00)
	{
		word16 cx_31 = Mem12[ptrArg02 + 0x06:word16] + Mem12[ptrArg02 + 0x00:word16];
		cx_108 = cx_31 + 0x01;
		si_29 = cx_31 + 0x01;
	}
	else
	{
		int32 dx_ax_22 = (int32) *ptrArg02;
		ui16 dx_24 = SLICE(dx_ax_22, word16, 16);
		ui16 ax_26 = ((word16) dx_ax_22 ^ dx_24) - dx_24;
		cx_108 = ax_26;
		si_29 = ax_26;
	}
	if ((*((word32) ptrArg02 + 2) & 0x40) == 0x00)
	{
		Eq_2 dx_49 = *((word32) ptrArg02 + 0x0C);
		Eq_2 ax_48 = *((word32) ptrArg02 + 0x0E);
		Eq_2 wLoc06_114 = dx_49;
		byte * ptrLoc06_115 = SEQ(ax_48, dx_49);
		if (*ptrArg02 < 0x00)
		{
			while (true)
			{
				--cx_108;
				if (cx_108 == 0x00)
					break;
				Eq_2 v18_84 = wLoc06_114 - 0x01;
				wLoc06_114 = v18_84;
				if (*SEQ(ax_48, v18_84) == 0x0A)
					++si_29;
			}
		}
		else
		{
			while (true)
			{
				word16 wLoc06_116 = (word16) ptrLoc06_159;
				word16 wLoc04_131 = SLICE(ptrLoc06_159, word16, 16);
				--cx_108;
				if (cx_108 == 0x00)
					break;
				ptrLoc06_115 = SEQ(wLoc04_131, wLoc06_116 + 0x01);
				ptrLoc06_159 = ptrLoc06_115;
				if (*ptrLoc06_159 == 0x0A)
					++si_29;
			}
		}
	}
	return si_29;
}

// 0800:3106: Register word16 fn0800_3106(Register Eq_2 ds, Stack Eq_2 ptrArg04, Stack Eq_2 dwArg08, Stack word16 wArg0C)
// Called from:
//      fn0800_3C8A
word16 fn0800_3106(Eq_2 ds, Eq_2 ptrArg04, Eq_2 dwArg08, word16 wArg0C)
{
	word16 wArg06 = SLICE(ptrArg04, word16, 16);
	word16 cx_101 = wArg06;
	word16 bx_199;
	if (fn0800_2C08(ds, ptrArg04, out bx_199) == 0x00)
	{
		if (wArg0C == 0x01 && *ptrArg04 > 0x00)
			dwArg08 -= (int32) fn0800_3084(ptrArg04);
		*((word32) ptrArg04 + 2) &= ~0x01A0;
		ptrArg04->u0 = 0x00;
		Eq_2 dx_81 = *((word32) ptrArg04 + 8);
		*((word32) ptrArg04 + 0x0E) = *((word32) ptrArg04 + 0x0A);
		*((word32) ptrArg04 + 0x0C) = dx_81;
		word16 dx_102;
		word16 bx_200;
		Eq_915 ax_99 = fn0800_06AB(ds, (int16) *((word32) ptrArg04 + 4), dwArg08, (byte) wArg0C, out cx_101, out dx_102, out bx_200);
		if (dx_102 != ~0x00 || ax_99 != ~0x00)
			;
	}
	return cx_101;
}

// 0800:3266: void fn0800_3266(Register Eq_2 ds)
// Called from:
//      fn0800_32A4
//      fn0800_3334
void fn0800_3266(Eq_2 ds)
{
	word16 si_14 = 0x14;
	Eq_2 ptrLoc06_72 = SEQ(ds, ~0x680F);
	while (true)
	{
		word16 wLoc04_73 = SLICE(ptrLoc06_72, word16, 16);
		word16 wLoc06_78 = (word16) ptrLoc06_72;
		--si_14;
		if (si_14 == 0x00)
			break;
		if ((*((word32) ptrLoc06_72 + 2) & 0x0300) == 0x0300)
		{
			word16 bx_103;
			fn0800_2C08(ds, ptrLoc06_72, out bx_103);
		}
		ptrLoc06_72 = SEQ(wLoc04_73, wLoc06_78 + 0x14);
	}
}

// 0800:32A4: Register word16 fn0800_32A4(Register Eq_2 ds, Stack Eq_2 ptrArg02, Register out Eq_5876 bpOut)
// Called from:
//      fn0800_3334
word16 fn0800_32A4(Eq_2 ds, Eq_2 ptrArg02, union Eq_5876 & bpOut)
{
	Eq_5876 wArg02_110 = (word16) ptrArg02;
	if ((*((word32) ptrArg02 + 2) & 0x0200) != 0x00)
		fn0800_3266(ds);
	word16 ax_112;
	Eq_915 v11_31 = *((word32) ptrArg02 + 6);
	word16 ax_35 = *((word32) ptrArg02 + 0x0A);
	word16 dx_36 = *((word32) ptrArg02 + 8);
	*((word32) ptrArg02 + 0x0E) = ax_35;
	*((word32) ptrArg02 + 0x0C) = dx_36;
	word16 bx_146;
	word16 dx_145;
	word16 cx_144;
	ci16 ax_48 = fn0800_3BB6(ds, (int16) *((word32) ptrArg02 + 4), SEQ(ax_35, dx_36), v11_31, out cx_144, out dx_145, out bx_146);
	ptrArg02->u1 = ax_48;
	if (ax_48 > 0x00)
	{
		*((word32) ptrArg02 + 2) &= ~0x20;
		ax_112 = 0x00;
	}
	else
	{
		if (*ptrArg02 == 0x00)
			*((word32) ptrArg02 + 2) = *((word32) ptrArg02 + 2) & 65151 | 0x20;
		else
		{
			ptrArg02->u1 = 0x00;
			*((word32) ptrArg02 + 2) |= 0x10;
		}
		ax_112 = ~0x00;
	}
	bpOut = wArg02_110;
	return ax_112;
}

// 0800:331C: Register word16 fn0800_331C(Register Eq_2 ds, Stack Eq_2 ptrArg04)
// Called from:
//      fn0800_2CD5
word16 fn0800_331C(Eq_2 ds, Eq_2 ptrArg04)
{
	*ptrArg04 = (word32) *ptrArg04 + 1;
	return fn0800_3334(ds, ptrArg04);
}

// 0800:3334: Register uint16 fn0800_3334(Register Eq_2 ds, Stack Eq_2 ptrArg04)
// Called from:
//      fn0800_331C
uint16 fn0800_3334(Eq_2 ds, Eq_2 ptrArg04)
{
	cui16 wArg04 = (word16) ptrArg04;
	cui16 wArg06 = SLICE(ptrArg04, word16, 16);
	uint16 ax_193;
	struct Eq_5992 Eq_6015::* bp_161 = fp - 2;
	struct Eq_5996 Eq_6015::* sp_62 = fp - 4;
	if ((wArg04 | wArg06) == 0x00)
	{
l0800_3340:
		ax_193 = ~0x00;
		return ax_193;
	}
	byte al_115;
	if (*ptrArg04 <= 0x00)
	{
		if (*ptrArg04 < 0x00 || ((*((word32) ptrArg04 + 2) & 0x0110) != 0x00 || (*((word32) ptrArg04 + 2) & 0x01) == 0x00))
		{
l0800_33E1:
			*((word32) ptrArg04 + 2) |= 0x10;
			goto l0800_3340;
		}
		*((word32) ptrArg04 + 2) |= 0x80;
		if (*((word32) ptrArg04 + 6) == 0x00)
		{
			do
			{
				if ((*((word32) ptrArg04 + 2) & 0x0200) != 0x00)
					fn0800_3266(ds);
				struct Eq_6095 Eq_6015::* sp_63 = sp_62 - 2;
				(ss->*sp_63).t0000.u0 = 0x01;
				(ss->*sp_63).tFFFFFFFE = ds;
				(ss->*sp_63).tFFFFFFFC.u0 = 43854;
				(ss->*sp_63).tFFFFFFFA = (int16) *((word32) ptrArg04 + 4);
				sp_62 = (struct Eq_5996 Eq_6015::*) ((char *) &sp_63->t0004 + 2);
				word16 cx_310;
				word16 bx_312;
				word16 dx_311;
				if (fn0800_3BB6(ds, (ss->*sp_63).tFFFFFFFA, (ss->*sp_63).tFFFFFFFC, (ss->*sp_63).t0000, out cx_310, out dx_311, out bx_312) == 0x00)
				{
					(ss->*sp_63).t0004 = (int16) *((word32) ptrArg04 + 4);
					word16 dx_313;
					if (fn0800_2AD9(ds, (ss->*sp_63).t0004, out dx_313) != 0x01)
						goto l0800_33E1;
					*((word32) ptrArg04 + 2) = *((word32) ptrArg04 + 2) & 65151 | 0x20;
					goto l0800_3340;
				}
			} while (*((word32) ds + 43854) == 0x0D && (*((word32) ptrArg04 + 2) & 0x40) == 0x00);
			*((word32) ptrArg04 + 2) &= ~0x20;
			al_115 = *((word32) ds + 43854);
l0800_341D:
			ax_193 = (uint16) al_115;
			return ax_193;
		}
		if (fn0800_32A4(ds, ptrArg04, out bp_161) != 0x00)
			goto l0800_3340;
	}
	struct Eq_6014 * es_bx_180 = (ss->*bp_161).ptr0006;
	--es_bx_180->w0000;
	struct Eq_6027 * ax_185 = es_bx_180->ptr000E;
	byte Eq_6027::* si_186 = es_bx_180->ptr000C;
	++es_bx_180->ptr000C;
	al_115 = ax_185->*si_186;
	goto l0800_341D;
}

// 0800:342E: void fn0800_342E(Register Eq_2 ds, Stack (ptr32 byte) ptrArg04)
// Called from:
//      fn0800_418D
void fn0800_342E(Eq_2 ds, byte * ptrArg04)
{
	struct Eq_6188 * es_17 = SLICE(ptrArg04, selector, 16);
	Eq_6190 di_19 = (word16) ptrArg04;
	if ((es_17 | di_19) != 0x00)
	{
		byte ah_25 = *ptrArg04;
		word16 cx_26 = ~0x00;
		while (cx_26 != 0x00)
		{
			di_19 = (word16) di_260 + 1;
			--cx_26;
			di_260 = di_19;
			if (es_17->*di_260 != 0x00)
				break;
		}
		int16 cx_38 = ~cx_26;
		if (cx_38 != 0x01)
		{
			Eq_6217 es_di_46 = *((word32) ds + 0x00009B64);
			Eq_6220 di_151 = (word16) es_di_46;
			Eq_6220 wLoc06_170 = di_151;
			if ((SLICE(es_di_46, selector, 16) | di_151) != 0x00)
			{
				while (true)
				{
					Eq_6227 es_di_63 = ds->*di_151;
					struct Eq_6231 * es_64 = SLICE(es_di_63, selector, 16);
					Eq_6233 di_66 = (word16) es_di_63;
					word16 cx_79 = cx_38 - 0x01;
					if ((es_64 | di_66) == 0x00)
						break;
					byte al_71 = *es_di_63;
					if (al_71 == 0x00)
						break;
					if (ah_25 == al_71)
					{
						bool v25_161 = *((word32) es_di_63 + (cx_38 - 0x01)) != 0x3D;
						if (*((word32) es_di_63 + (cx_38 - 0x01)) == 0x3D)
						{
							struct Eq_6260 * ds_159 = SLICE(ptrArg04, selector, 16);
							byte Eq_6260::* si_160 = (word16) ptrArg04;
							while (cx_79 != 0x00)
							{
								v25_161 = ds_159->*si_261 != es_64->*di_262;
								si_160 = si_261 + 1;
								di_66 = (word16) di_262 + 1;
								--cx_79;
								si_261 = si_160;
								di_262 = di_66;
								if (ds_159->*si_261 == es_64->*di_262)
									break;
							}
							if (!v25_161)
								return;
						}
					}
					Eq_6220 v23_120 = (word16) wLoc06_170 + 4;
					wLoc06_170 = v23_120;
					di_151 = v23_120;
				}
			}
		}
	}
}

// 0800:350E: Register uint16 fn0800_350E(Stack Eq_722 ptrArg04, Stack Eq_2 ptrArg08, Stack Eq_915 wArg0C, Register out ptr16 dxOut)
// Called from:
//      fn0800_16B5
//      fn0F2B_130A
//      fn1D10_1A8F
//      fn209F_0516
//      fn209F_06D8
//      fn226D_00F9
//      fn226D_057F
uint16 fn0800_350E(Eq_722 ptrArg04, Eq_2 ptrArg08, Eq_915 wArg0C, ptr16 & dxOut)
{
	ptr16 wArg06_78 = SLICE(ptrArg04, word16, 16);
	struct Eq_6291 * es_60 = SLICE(ptrArg04, selector, 16);
	union Eq_6293 Eq_6291::* di_30 = (word16) ptrArg04;
	struct Eq_6295 * ds_58 = SLICE(ptrArg08, selector, 16);
	union Eq_6297 Eq_6295::* si_26 = (word16) ptrArg08;
	uint16 cx_20;
	for (cx_20 = wArg0C >> 0x01; cx_20 != 0x00; --cx_20)
	{
		es_60->*di_30 = ds_58->*si_26;
		si_26 = (union Eq_6297 Eq_6295::*) ((char *) si_26 + 2);
		di_30 = (union Eq_6293 Eq_6291::*) ((char *) di_30 + 2);
	}
	if (wArg0C >> 0x01 < 0x00)
		es_60->*di_30 = ds_58->*si_26;
	dxOut = wArg06_78;
	return cx_20;
}

// 0800:3532: Register uint16 fn0800_3532(Stack Eq_722 ptrArg04, Stack uint16 wArg08, Stack byte bArg0A, Register out (ptr16 Eq_6329) esOut)
// Called from:
//      fn0800_3556
uint16 fn0800_3532(Eq_722 ptrArg04, uint16 wArg08, byte bArg0A, struct Eq_6329 & esOut)
{
	Eq_6330 di_17 = (word16) ptrArg04;
	struct Eq_6329 * es_21 = SLICE(ptrArg04, selector, 16);
	uint16 cx_13 = wArg08;
	if ((di_17 & 0x01) != 0x00)
	{
		if (wArg08 == 0x00)
			goto l0800_3553;
		*ptrArg04 = bArg0A;
		di_17 = (word16) di_17 + 1;
		cx_13 = wArg08 - 0x01;
	}
	uint16 cx_27 = cx_13 >> 0x01;
	cx_13 = cx_27;
	while (true)
	{
		word16 ax_47 = SEQ(bArg0A, bArg0A);
		if (cx_13 == 0x00)
			break;
		es_21->*di_17 = ax_47;
		di_17 = (word16) di_17 + 2;
		--cx_13;
	}
	if (cx_27 < 0x00)
		es_21->*di_17 = bArg0A;
l0800_3553:
	esOut = es_21;
	return cx_13;
}

// 0800:3556: Register word16 fn0800_3556(Stack Eq_722 dwArg04, Stack byte bArg08, Stack uint16 wArg0A, Register out ptr16 dxOut, Register out (ptr16 Eq_6372) esOut)
// Called from:
//      fn0800_418D
//      fn1D10_1A8F
//      fn209F_02A7
//      fn209F_08D2
word16 fn0800_3556(Eq_722 dwArg04, byte bArg08, uint16 wArg0A, ptr16 & dxOut, struct Eq_6372 & esOut)
{
	ptr16 wArg06 = SLICE(dwArg04, word16, 16);
	struct Eq_6372 * es_25;
	word16 cx_24 = fn0800_3532(dwArg04, wArg0A, bArg08, out es_25);
	dxOut = wArg06;
	esOut = es_25;
	return cx_24;
}

// 0800:35E8: Register Eq_2 fn0800_35E8(Register Eq_2 ds, Stack Eq_4628 wArg02, Stack Eq_2 ptrArg04, Register out Eq_4628 cxOut, Register out Eq_6386 dxOut)
// Called from:
//      fn0800_3615
Eq_2 fn0800_35E8(Eq_2 ds, Eq_4628 wArg02, Eq_2 ptrArg04, union Eq_4628 & cxOut, union Eq_6386 & dxOut)
{
	Eq_6386 dx_16 = (word16) ptrArg04;
	Eq_2 ax_17;
	if (msdos_create_truncate_file(wArg02, SLICE(ptrArg04, selector, 16), dx_16, out ax_17))
		ax_17 = fn0800_05AD(ds, ax_17);
	cxOut = wArg02;
	dxOut = dx_16;
	return ax_17;
}

// 0800:3603: Register word16 fn0800_3603(Register Eq_2 ds, Stack Eq_2 wArg02, Register out Eq_6404 dxOut, Register out Eq_2 bxOut)
// Called from:
//      fn0800_3615
word16 fn0800_3603(Eq_2 ds, Eq_2 wArg02, union Eq_6404 & dxOut, union Eq_2 & bxOut)
{
	word16 ax_16;
	msdos_write_file(wArg02, 0x00, SEQ(ds, 0x00), out ax_16);
	dxOut.u0 = 0x00;
	bxOut = wArg02;
	return 0x00;
}

// 0800:3615: Register Eq_2 fn0800_3615(Register Eq_2 ds, Stack Eq_2 dwArg04, Stack Eq_2 wArg08, Stack Eq_2 wArg0A, Register out ptr16 cxOut, Register out Eq_5548 dxOut, Register out Eq_5549 bxOut)
// Called from:
//      fn0800_2F10
//      fn0CE0_0007
//      fn0CE0_08FC
//      fn0E31_0002
//      fn0F2B_153F
//      fn209F_02E3
//      fn209F_08D2
//      fn2476_0630
//      fn2504_094D
//      fn263F_033E
//      main
//      fn268D_03E2
Eq_2 fn0800_3615(Eq_2 ds, Eq_2 dwArg04, Eq_2 wArg08, Eq_2 wArg0A, ptr16 & cxOut, union Eq_5548 & dxOut, union Eq_5549 & bxOut)
{
	Eq_2 si_16 = wArg08;
	if ((wArg08 & 0xC000) == 0x00)
		si_16 = wArg08 | *((word32) ds + 0x000099AA) & 0xC000;
	Eq_2 ax_158;
	Eq_2 di_114;
	Eq_5548 dx_111;
	ptr16 cx_110;
	Eq_4628 ax_42 = fn0800_2A76(ds, 0x00, out cx_110, out dx_111);
	Eq_4628 wLoc04_369 = ax_42;
	if ((si_16 & 0x0100) != 0x00)
	{
		cui16 di_52 = wArg0A & *((word32) ds + 0x000099AC);
		if ((di_52 & 0x0180) == 0x00)
			fn0800_05AD(ds, 0x01);
		Eq_2 wLoc0C_372;
		if (ax_42 == ~0x00)
		{
			if (*((word32) ds + 0x000099AE) == 0x02)
			{
				Eq_4628 ax_86;
				if ((di_52 & 0x80) != 0x00)
					ax_86.u0 = 0x00;
				else
					ax_86.u0 = 0x01;
				wLoc04_369 = ax_86;
				if ((si_16 & 0xF0) != 0x00)
				{
					Eq_2 ax_130 = fn0800_35E8(ds, 0x00, dwArg04, out cx_110, out dx_111);
					di_114 = ax_130;
					byte al_142 = (byte) ax_130;
					if (ax_130 >= 0x00)
					{
						word16 bx_510;
						fn0800_2ABB(al_142, ds, ax_130, out bx_510);
						goto l0800_36CE;
					}
				}
				else
				{
					Eq_2 ax_109 = fn0800_35E8(ds, ax_86, dwArg04, out cx_110, out dx_111);
					di_114 = ax_109;
					if (ax_109 >= 0x00)
					{
l0800_3749:
						if (di_114 >= 0x00)
						{
							cui16 ax_297;
							if ((si_16 & 0x0300) != 0x00)
								ax_297 = 0x1000;
							else
								ax_297 = 0x00;
							cui16 ax_317;
							cui16 dx_305 = si_16 & ~0x0700 | ax_297;
							if ((wLoc04_369 & 0x01) != 0x00)
								ax_317 = 0x00;
							else
								ax_317 = 0x0100;
							dx_111 = dx_305 | ax_317;
							bx = di_114 << 0x01;
							ds->*((word16) bx + 0x00009982) = dx_111;
						}
						goto l0800_377C;
					}
				}
l0800_377C:
				ax_158 = di_114;
				goto l0800_377E;
			}
			wLoc0C_372 = *((word32) ds + 0x000099AE);
		}
		else
		{
			if ((si_16 & 0x0400) == 0x00)
				goto l0800_36CE;
			wLoc0C_372.u0 = 0x50;
		}
		ax_158 = fn0800_05AD(ds, wLoc0C_372);
l0800_377E:
		cxOut = cx_110;
		dxOut = dx_111;
		bxOut = bx;
		return ax_158;
	}
	else
	{
l0800_36CE:
		Eq_2 ax_177 = fn0800_3784(ds, dwArg04, si_16, out cx_110, out dx_111, out bx);
		di_114 = ax_177;
		if (ax_177 >= 0x00)
		{
			cx_110 = 0x00;
			word16 cx_509;
			if ((fn0800_2367(ds, 0x00, out cx_509, out dx_111, out bx) & 0x80) != 0x00)
			{
				si_16 |= 0x2000;
				if ((si_16 & 0x8000) != 0x00)
					fn0800_2367(ds, 0x01, out cx_110, out dx_111, out bx);
			}
			else if ((si_16 & 0x0200) != 0x00)
				cx_110 = fn0800_3603(ds, ax_177, out dx_111, out bx);
			if ((wLoc04_369 & 0x01) != 0x00 && ((si_16 & 0x0100) != 0x00 && (si_16 & 0xF0) != 0x00))
				fn0800_2A76(ds, 0x01, out cx_110, out dx_111);
		}
		goto l0800_3749;
	}
}

// 0800:3784: Register Eq_2 fn0800_3784(Register Eq_2 ds, Stack Eq_2 ptrArg04, Stack Eq_2 wArg08, Register out ptr16 cxOut, Register out ptr16 dxOut, Register out Eq_6462 bxOut)
// Called from:
//      fn0800_3615
Eq_2 fn0800_3784(Eq_2 ds, Eq_2 ptrArg04, Eq_2 wArg08, ptr16 & cxOut, ptr16 & dxOut, union Eq_6462 & bxOut)
{
	byte bArg08_69 = (byte) wArg08;
	byte al_10 = 0x01;
	byte ch_85 = SLICE(wArg08, byte, 8);
	if ((wArg08 & 0x02) == 0x00)
	{
		al_10 = 0x02;
		if ((wArg08 & 0x04) == 0x00)
			al_10 = 0x00;
	}
	Eq_2 ax_42;
	ptr16 dx_35 = (word16) ptrArg04;
	ptr16 cx_86 = SEQ(ch_85, bArg08_69 & 0xF0);
	Eq_2 ax_36;
	if (!msdos_open_file(ptrArg04, al_10 | bArg08_69 & 0xF0, out ax_36))
	{
		SEQ(ds, 0x9982)[ax_36 * 0x02] = wArg08 & ~0x4700 | 0x8000;
		bx = ax_36 << 0x01;
		ax_42 = ax_36;
	}
	else
		ax_42 = fn0800_05AD(ds, ax_36);
	cxOut = cx_86;
	dxOut = dx_35;
	bxOut = bx;
	return ax_42;
}

// 0800:37D3: Register word16 fn0800_37D3(Register Eq_2 cx, Register Eq_2 dx, Register Eq_2 bx, Register Eq_2 ds, Stack Eq_2524 dwArg04)
// Called from:
//      fn2057_005C
//      fn209F_0002
//      fn263F_03F3
//      fn263F_043F
//      fn263F_04B6
//      main
//      fn268D_034A
word16 fn0800_37D3(Eq_2 cx, Eq_2 dx, Eq_2 bx, Eq_2 ds, Eq_2524 dwArg04)
{
	return fn0800_1153(cx, dx, bx, ds, fp + 0x08, dwArg04);
}

// 0800:37EE: void fn0800_37EE(Register Eq_2 ds, Stack byte bArg04, Stack Eq_2 ptrArg06)
// Called from:
//      fn263F_00A6
void fn0800_37EE(Eq_2 ds, byte bArg04, Eq_2 ptrArg06)
{
	--*ptrArg06;
	fn0800_380A(ds, (byte) (int16) bArg04, ptrArg06);
}

// 0800:380A: void fn0800_380A(Register Eq_2 ds, Stack byte bArg04, Stack Eq_2 ptrArg06)
// Called from:
//      fn0800_37EE
void fn0800_380A(Eq_2 ds, byte bArg04, Eq_2 ptrArg06)
{
	*((word32) ds + 0x0000AB50) = bArg04;
	if (*ptrArg06 < ~0x00)
	{
		*ptrArg06 = (word32) *ptrArg06 + 1;
		Eq_2 ax_238 = *((word32) ptrArg06 + 0x0E);
		Eq_2 si_239 = *((word32) ptrArg06 + 0x0C);
		*((word32) ptrArg06 + 0x0C) = (word32) *((word32) ptrArg06 + 0x0C) + 1;
		ax_238->*si_239 = *((word32) ds + 0x0000AB50);
		if ((*((word32) ptrArg06 + 2) & 0x08) != 0x00 && (*((word32) ds + 0x0000AB50) == 0x0A || *((word32) ds + 0x0000AB50) == 0x0D))
		{
			word16 bx_446;
			if (fn0800_2C08(ds, ptrArg06, out bx_446) != 0x00)
				return;
		}
		return;
	}
	if ((*((word32) ptrArg06 + 2) & 0x90) != 0x00 || (*((word32) ptrArg06 + 2) & 0x02) == 0x00)
	{
l0800_3884:
		*((word32) ptrArg06 + 2) |= 0x10;
		return;
	}
	*((word32) ptrArg06 + 2) |= 0x0100;
	if (*((word32) ptrArg06 + 6) != 0x00)
	{
		if (*ptrArg06 != 0x00)
		{
			word16 bx_439;
			if (fn0800_2C08(ds, ptrArg06, out bx_439) != 0x00)
				return;
		}
		*ptrArg06 = -*((word32) ptrArg06 + 6);
		Eq_2 ax_181 = *((word32) ptrArg06 + 0x0E);
		Eq_2 si_182 = *((word32) ptrArg06 + 0x0C);
		*((word32) ptrArg06 + 0x0C) = (word32) *((word32) ptrArg06 + 0x0C) + 1;
		ax_181->*si_182 = *((word32) ds + 0x0000AB50);
		if ((*((word32) ptrArg06 + 2) & 0x08) != 0x00 && (*((word32) ds + 0x0000AB50) == 0x0A || *((word32) ds + 0x0000AB50) == 0x0D))
		{
			word16 bx_440;
			if (fn0800_2C08(ds, ptrArg06, out bx_440) != 0x00)
				return;
		}
		return;
	}
	if ((SEQ(ds, 0x9982)[CONVERT(Mem33[ptrArg06 + 0x04:byte], byte, int16) * 2] & 0x0800) != 0x00)
	{
		word16 cx_441;
		word16 bx_443;
		word16 dx_442;
		fn0800_06AB(ds, (int16) *((word32) ptrArg06 + 4), 0x00, 0x02, out cx_441, out dx_442, out bx_443);
	}
	if (*((word32) ds + 0x0000AB50) == 0x0A && (*((word32) ptrArg06 + 2) & 0x40) == 0x00)
	{
		word16 bx_445;
		if (fn0800_4619(ds, (int16) *((word32) ptrArg06 + 4), SEQ(ds, 0x9B68), 0x01, out bx_445) != 0x01)
		{
l0800_3989:
			if ((*((word32) ptrArg06 + 2) & 0x0200) != 0x00)
				return;
			goto l0800_3884;
		}
	}
	word16 bx_444;
	if (fn0800_4619(ds, (int16) *((word32) ptrArg06 + 4), SEQ(ds, 0xAB50), 0x01, out bx_444) == 0x01)
		return;
	goto l0800_3989;
}

// 0800:3BB6: Register Eq_2 fn0800_3BB6(Register Eq_2 ds, Stack Eq_2 wArg04, Stack Eq_2 ptrArg06, Stack Eq_915 wArg0A, Register out Eq_2 cxOut, Register out ptr16 dxOut, Register out Eq_5917 bxOut)
// Called from:
//      fn0800_32A4
//      fn0800_3334
//      fn0800_3C87
Eq_2 fn0800_3BB6(Eq_2 ds, Eq_2 wArg04, Eq_2 ptrArg06, Eq_915 wArg0A, union Eq_2 & cxOut, ptr16 & dxOut, union Eq_5917 & bxOut)
{
	struct Eq_6907 * wArg08 = SLICE(ptrArg06, word16, 16);
	Eq_5917 wArg06 = (word16) ptrArg06;
	Eq_2 ax_173;
	if (wArg04 >= *((word32) ds + 0x00009980))
	{
		ax_173 = fn0800_05AD(ds, 0x06);
		goto l0800_3C81;
	}
	if (wArg0A >= 0x01)
	{
		bx = wArg04 << 0x01;
		if ((SEQ(ds, 0x9982)[wArg04 * 0x02] & 0x0200) == 0x00)
		{
			do
			{
				Eq_2 ax_46 = fn0800_0865(ds, wArg04, ptrArg06, wArg0A, out cx, out dx, out bx);
				if (ax_46 < 0x01)
				{
l0800_3C16:
					ax_173 = ax_46;
					goto l0800_3C81;
				}
				bx = wArg04 << 0x01;
				if ((SEQ(ds, 0x9982)[wArg04 * 0x02] & 0x4000) == 0x00)
					goto l0800_3C16;
				cx = ax_46;
				Eq_5917 si_66 = wArg06;
				Eq_5917 di_150 = wArg06;
				do
				{
					byte al_73 = ds->*si_66;
					si_66 = (word16) si_66 + 1;
					if (al_73 == 0x1A)
					{
						cup16 cx_86 = -cx;
						word16 bx_349;
						fn0800_06AB(ds, wArg04, SEQ(0x00 - (cx_86 == 0x00), cx_86), 0x01, out cx, out dx, out bx_349);
						SEQ(ds, 0x9982)[wArg04 * 0x02] |= 0x0200;
						goto l0800_3C7E;
					}
					if (al_73 == 0x0D)
					{
						--cx;
						if (cx != 0x00)
							continue;
						word16 bx_348;
						fn0800_0865(ds, wArg04, fp - 0x05, 0x01, out cx, out dx, out bx_348);
						wArg08->*di_150 = bLoc05;
						di_150 = (word16) di_150 + 1;
						break;
					}
					wArg08->*di_150 = al_73;
					di_150 = (word16) di_150 + 1;
					--cx;
				} while (cx != 0x00);
			} while (di_150 == wArg06);
l0800_3C7E:
			bx = wArg06;
			ax_173 = di_150 - wArg06;
l0800_3C81:
			cxOut = cx;
			dxOut = dx;
			bxOut = bx;
			return ax_173;
		}
	}
	ax_173.u0 = 0x00;
	goto l0800_3C81;
}

// 0800:3C87: Register ci16 fn0800_3C87(Register Eq_2 ds, Stack Eq_2 wArg04, Stack Eq_2 ptrArg06, Stack Eq_915 wArg0A, Register out ptr16 cxOut, Register out ptr16 dxOut, Register out ptr16 bxOut)
// Called from:
//      fn0CE0_0007
//      fn0CE0_08FC
//      fn1D10_0FB3
//      fn1D10_12D4
//      fn209F_02E3
//      fn209F_0516
//      fn2476_0630
//      fn2504_094D
//      fn263F_033E
//      fn268D_03E2
ci16 fn0800_3C87(Eq_2 ds, Eq_2 wArg04, Eq_2 ptrArg06, Eq_915 wArg0A, ptr16 & cxOut, ptr16 & dxOut, ptr16 & bxOut)
{
	ptr16 bx_8;
	ptr16 cx_9;
	ptr16 dx_10;
	ci16 ax_7 = fn0800_3BB6(ds, wArg04, ptrArg06, wArg0A, out cx_9, out dx_10, out bx_8);
	cxOut = cx_9;
	dxOut = dx_10;
	bxOut = bx_8;
	return ax_7;
}

// 0800:3C8A: Register word16 fn0800_3C8A(Register Eq_2 ds, Stack Eq_2 ptrArg04, Stack cui16 wArg08, Stack cui16 wArg0A, Stack ci16 wArg0C, Stack Eq_2 wArg0E, Register out Eq_2 cxOut, Register out Eq_2 dsOut)
// Called from:
//      fn0800_2F10
word16 fn0800_3C8A(Eq_2 ds, Eq_2 ptrArg04, cui16 wArg08, cui16 wArg0A, ci16 wArg0C, Eq_2 wArg0E, union Eq_2 & cxOut, union Eq_2 & dsOut)
{
	Eq_4901 wArg04_227 = (word16) ptrArg04;
	word16 ax_201;
	struct Eq_7047 Eq_7154::* bp_155 = fp - 2;
	if (*((word32) ptrArg04 + 18) != wArg04_227 || (wArg0C > 0x02 || wArg0E > 0x7FFF))
	{
l0800_3CAC:
		ax_201 = ~0x00;
		goto l0800_3DA3;
	}
	else
	{
		if (*((word32) ds + 39788) == 0x00 && wArg04_227 == 0x9804)
			*((word32) ds + 39788) = 0x01;
		else if (*((word32) ds + 0x00009B6A) == 0x00 && wArg04_227 == ~0x680F)
			*((word32) ds + 0x00009B6A) = 0x01;
		if (*ptrArg04 != 0x00)
			cx = fn0800_3106(ds, ptrArg04, 0x00, 0x01);
		Eq_2 wArg06_246 = SLICE(ptrArg04, word16, 16);
		word16 wArg04_247 = (word16) ptrArg04;
		if ((*((word32) ptrArg04 + 2) & 0x04) != 0x00)
		{
			Eq_2 v19_89 = *((word32) ptrArg04 + 0x0A);
			word16 dx_342;
			word16 bx_343;
			word16 cx_341;
			fn0800_1C24(ds, v19_89, out cx_341, out dx_342, out bx_343, out ds);
			cx = v19_89;
		}
		*((word32) ptrArg04 + 2) &= ~0x0C;
		((word32) ptrArg04 + 6)->u0 = 0x00;
		*((word32) ptrArg04 + 0x0A) = wArg06_246;
		*((word32) ptrArg04 + 8) = wArg04_247 + 0x05;
		*((word32) ptrArg04 + 0x0E) = wArg06_246;
		*((word32) ptrArg04 + 0x0C) = wArg04_247 + 0x05;
		if (wArg0C != 0x02 && wArg0E > 0x00)
		{
			((word32) ds + 38886)->u0 = 0x0800;
			((word32) ds + 38884)->u0 = 0x4695;
			if ((wArg08 | wArg0A) == 0x00)
			{
				cui16 dx_159;
				word16 bx_344;
				struct Eq_7185 * es_345;
				Eq_756 ax_154 = fn0800_1D2E(ds, wArg0E, out dx_159, out bx_344, out bp_155, out es_345, out ds);
				(ss->*bp_155).w000C = dx_159;
				(ss->*bp_155).t000A = ax_154;
				cx = wArg0E;
				if ((ax_154 | dx_159) == 0x00)
					goto l0800_3CAC;
				struct Eq_7153 * es_bx_173 = (ss->*bp_155).ptr0006;
				es_bx_173->w0002 |= 0x04;
			}
			struct Eq_7153 * es_bx_183 = (ss->*bp_155).ptr0006;
			cui16 ax_184 = (ss->*bp_155).w000C;
			Eq_756 dx_185 = (ss->*bp_155).t000A;
			es_bx_183->w000E = ax_184;
			es_bx_183->t000C = dx_185;
			es_bx_183->w000A = ax_184;
			es_bx_183->t0008 = dx_185;
			es_bx_183->t0006 = wArg0E;
			if (wArg0C == 0x01)
				es_bx_183->w0002 |= 0x08;
		}
		ax_201 = 0x00;
l0800_3DA3:
		cxOut = cx;
		dsOut = ds;
		return ax_201;
	}
}

// 0800:3DA7: void fn0800_3DA7(Stack Eq_722 ptrArg04, Stack segptr32 ptrArg08)
// Called from:
//      fn0800_06D4
void fn0800_3DA7(Eq_722 ptrArg04, segptr32 ptrArg08)
{
	byte Eq_7225::* di_20 = (word16) ptrArg04;
	struct Eq_7225 * es_124 = SLICE(ptrArg04, selector, 16);
	word16 cx_25 = ~0x00;
	while (cx_25 != 0x00)
	{
		++di_20;
		--cx_25;
		if (es_124->*di_20 != 0x00)
			break;
	}
	union Eq_7229 Eq_7225::* si_43 = di_20 - 0x01;
	struct Eq_7232 * es_126 = SLICE(ptrArg08, selector, 16);
	byte Eq_7232::* di_127 = (word16) ptrArg08;
	word16 cx_47 = ~0x00;
	while (cx_47 != 0x00)
	{
		++di_127;
		--cx_47;
		if (es_126->*di_127 != 0x00)
			break;
	}
	cu16 cx_58 = ~cx_47;
	Eq_7251 di_60 = di_127 - cx_58;
	union Eq_7229 Eq_7225::* di_122 = si_43;
	Eq_7251 si_121 = di_60;
	if ((di_60 & 0x01) != 0x00)
	{
		es_124->*si_43 = es_126->*di_60;
		si_121 = (word16) di_60 + 1;
		di_122 = (union Eq_7229 Eq_7225::*) ((char *) si_43 + 1);
		--cx_58;
	}
	uint16 cx_87 = cx_58 >> 0x01;
	cx_123 = cx_87;
	while (true)
	{
		uint16 cx_123;
		if (cx_123 == 0x00)
			break;
		es_124->*di_122 = es_126->*si_121;
		si_121 = (word16) si_121 + 2;
		di_122 = (union Eq_7229 Eq_7225::*) ((char *) di_122 + 2);
		--cx_123;
	}
	if (cx_87 < 0x00)
		es_124->*di_122 = es_126->*si_121;
}

// 0800:3DE6: void fn0800_3DE6(Stack Eq_2 ptrArg04, Stack Eq_2 ptrArg08)
// Called from:
//      fn0800_418D
//      fn1F0F_0BF7
void fn0800_3DE6(Eq_2 ptrArg04, Eq_2 ptrArg08)
{
	byte Eq_7312::* di_17 = (word16) ptrArg08;
	struct Eq_7312 * es_73 = SLICE(ptrArg08, selector, 16);
	byte Eq_7312::* si_18 = di_17;
	word16 cx_22 = ~0x00;
	while (cx_22 != 0x00)
	{
		di_17 = di_124 + 1;
		--cx_22;
		di_124 = di_17;
		if (es_73->*di_124 != 0x00)
			break;
	}
	word16 cx_33;
	struct Eq_7319 * es_76 = SLICE(ptrArg04, selector, 16);
	byte Eq_7319::* di_68 = (word16) ptrArg04;
	for (cx_33 = ~cx_22; cx_33 != 0x00; --cx_33)
	{
		es_76->*di_68 = es_73->*si_18;
		++si_18;
		++di_68;
	}
}

// 0800:3E0F: Register word16 fn0800_3E0F(Stack Eq_2 ptrArg04)
// Called from:
//      fn0800_16B5
//      fn0800_418D
//      fn263F_0008
word16 fn0800_3E0F(Eq_2 ptrArg04)
{
	word16 wArg06_66 = SLICE(ptrArg04, word16, 16);
	byte Eq_7354::* di_16 = (word16) ptrArg04;
	struct Eq_7354 * es_60 = SLICE(ptrArg04, selector, 16);
	word16 ax_13 = 0x00;
	if (wArg06_66 != 0x00 || di_16 != &Eq_7354::b0000)
	{
		word16 cx_20 = ~0x00;
		while (cx_20 != 0x00)
		{
			di_16 = di_103 + 1;
			--cx_20;
			di_103 = di_16;
			if (es_60->*di_103 != 0x00)
				break;
		}
		ax_13 = ~cx_20 - 0x01;
	}
	return ax_13;
}

// 0800:3E2E: void fn0800_3E2E(Stack segptr32 ptrArg04, Stack Eq_2 ptrArg08, Stack word16 wArg0C)
// Called from:
//      fn0800_418D
void fn0800_3E2E(segptr32 ptrArg04, Eq_2 ptrArg08, word16 wArg0C)
{
	byte Eq_7384::* di_17 = (word16) ptrArg08;
	struct Eq_7384 * es_90 = SLICE(ptrArg08, selector, 16);
	byte Eq_7384::* si_18 = di_17;
	word16 cx_23 = wArg0C;
	while (cx_23 != 0x00)
	{
		di_17 = di_150 + 1;
		--cx_23;
		di_150 = di_17;
		if (es_90->*di_150 != 0x00)
			break;
	}
	struct Eq_7388 * es_98 = SLICE(ptrArg04, selector, 16);
	byte Eq_7388::* di_76 = (word16) ptrArg04;
	word16 cx_55;
	for (cx_55 = wArg0C - cx_23; cx_55 != 0x00; --cx_55)
	{
		es_98->*di_76 = es_90->*si_18;
		++si_18;
		++di_76;
	}
	word16 cx_58;
	for (cx_58 = cx_23; cx_58 != 0x00; --cx_58)
	{
		es_98->*di_76 = 0x00;
		++di_76;
	}
}

// 0800:3E5F: Register word16 fn0800_3E5F(Register Eq_2 ds, Stack (ptr32 Eq_2410) ptrArg04, Stack (ptr32 Eq_2411) ptrArg08, Register out ptr16 dxOut, Register out ptr16 bxOut)
// Called from:
//      fn0800_10B1
word16 fn0800_3E5F(Eq_2 ds, struct Eq_2410 * ptrArg04, struct Eq_2411 * ptrArg08, ptr16 & dxOut, ptr16 & bxOut)
{
	fn0800_418D(ds);
	ci16 si_36 = ptrArg04->w0000;
	cup16 dx_26 = *((word32) ds + 0x00009B9C);
	int32 dx_ax_42 = (int32) (si_36 + 63556 >> 0x02);
	ui16 ax_30 = (bool) (dx_26 < 0xA600) + (*((word32) ds + 0x00009B9E) + 4814);
	word16 dx_443;
	fn0800_07F6(0x1F80, SLICE(dx_ax_42, word16, 16), 0x0786, (word16) dx_ax_42, out dx_443);
	int32 dx_ax_72 = (int32) (si_36 + 63556 & 0x03);
	word16 dx_444;
	fn0800_07F6(0x3380, SLICE(dx_ax_72, word16, 16), 0x01E1, (word16) dx_ax_72, out dx_444);
	Eq_2 dx_ax_434 = <invalid>;
	Eq_2 dx_ax_435 = <invalid>;
	ui32 v21_v20_308 = (word32) dx_ax_435 + ((word32) dx_ax_434 + SEQ(ax_30, dx_26 + 0xA600));
	ui32 dwLoc06_437 = v21_v20_308;
	if ((si_36 + 63556 & 0x03) != 0x00)
		dwLoc06_437 = v21_v20_308 + 0x00015180;
	word16 cx_108 = 0x00;
	Eq_7494 si_120 = (int16) ptrArg04->b0003 - 0x01;
	while (si_120 > 0x00)
	{
		--si_120;
		cx_108 += (int16) (ds->*((word16) si_120 + 39790));
	}
	Eq_7512 cx_141 = cx_108 + ((int16) ptrArg04->b0002 - 0x01);
	if (ptrArg04->b0003 > 0x02 && (ptrArg04->w0000 & 0x03) == 0x00)
		cx_141 = (word16) cx_141.u0 + 1;
	word16 ax_170 = (word16) (cx_141 *s 0x18) + (uint16) ptrArg08->b0001;
	word16 si_171 = ax_170;
	if (*((word32) ds + 0x00009BA0) != 0x00 && fn0800_437B(ds, ptrArg04->w0000 + 63566, 0x00, cx_141, (byte) ((uint16) ptrArg08->b0001)) != 0x00)
		si_171 = ax_170 - 0x01;
	int32 dx_ax_210 = (int32) si_171;
	word16 dx_445;
	fn0800_07F6(0x0E10, SLICE(dx_ax_210, word16, 16), 0x00, (word16) dx_ax_210, out dx_445);
	int32 dx_ax_247 = (int32) (uint16) ptrArg08->b0000;
	word16 dx_446;
	fn0800_07F6(0x3C, SLICE(dx_ax_247, word16, 16), 0x00, (word16) dx_ax_247, out dx_446);
	Eq_2 dx_ax_440 = <invalid>;
	Eq_2 dx_ax_436 = <invalid>;
	int32 bx_cx_314 = (word32) dx_ax_440 + (int32) ((uint16) ptrArg08->b0003);
	ui32 v32_v31_316 = (word32) dx_ax_436 + dwLoc06_437 + bx_cx_314;
	dxOut = SLICE(v32_v31_316, word16, 16);
	bxOut = SLICE(bx_cx_314, word16, 16);
	return (word16) v32_v31_316;
}

// 0800:418D: void fn0800_418D(Register Eq_2 ds)
// Called from:
//      fn0800_3E5F
void fn0800_418D(Eq_2 ds)
{
	fn0800_342E(ds, SEQ(ds, 0x9BA2));
	Eq_2 dx_ax_500 = <invalid>;
	struct Eq_7616 * dx_21 = SLICE(dx_ax_500, word16, 16);
	Eq_7618 ax_20 = (word16) dx_ax_500;
	if ((ax_20 | dx_21) == 0x00 || (fn0800_3E0F(dx_ax_500) < 0x04 || ((CONVERT(Mem44[ds:CONVERT(Mem44[dx_ax_500 + 0x00:byte], byte, int16) + ~0x691C:byte], byte, int16) & 0x0C) == 0x00 || ((CONVERT(Mem44[ds:CONVERT(Mem44[dx_ax_500 + 0x01:byte], byte, int16) + ~0x691C:byte], byte, int16) & 0x0C) == 0x00 || ((CONVERT(Mem44[ds:CONVERT(Mem44[dx_ax_500 + 0x02:byte], byte, int16) + ~0x691C:byte], byte, int16) & 0x0C) == 0x00 || *((word32) dx_ax_500 + 3) != 0x2D && (*((word32) dx_ax_500 + 3) != 0x2B && (Mem44[ds:CONVERT(Mem44[dx_ax_500 + 0x03:byte], byte, int16) + ~0x691C:byte] & 0x02) == 0x00))))) || (CONVERT(Mem44[ds:CONVERT(Mem44[dx_ax_500 + 0x03:byte], byte, int16) + ~0x691C:byte], byte, int16) & 0x02) == 0x00 && (CONVERT(Mem44[ds:CONVERT(Mem44[dx_ax_500 + 0x04:byte], byte, int16) + ~0x691C:byte], byte, int16) & 0x02) == 0x00)
	{
		*((word32) ds + 0x00009BA0) = 0x01;
		*((word32) ds + 0x00009B9E) = 0x00;
		*((word32) ds + 0x00009B9C) = 18000;
		fn0800_3DE6(SEQ(*((word32) ds + 0x00009B96), *((word32) ds + 0x00009B94)), SEQ(ds, ~0x645A));
		fn0800_3DE6(SEQ(*((word32) ds + 0x00009B9A), *((word32) ds + 0x00009B98)), SEQ(ds, ~0x6456));
	}
	else
	{
		word16 dx_501;
		struct Eq_7725 * es_502;
		fn0800_3556(SEQ(*((word32) ds + 0x00009B9A), *((word32) ds + 0x00009B98)), 0x00, 0x04, out dx_501, out es_502);
		fn0800_3E2E(SEQ(*((word32) ds + 0x00009B96), *((word32) ds + 0x00009B94)), dx_ax_500, 0x03);
		((word32) ds + 0x00009B94)->u1->b0003 = 0x00;
		uint16 dx_194;
		word16 dx_217;
		cup16 ax_216 = fn0800_07F6(0x0E10, dx_194, 0x00, fn0800_29F0(ds, (word16) ax_20 + 3, out dx_194), out dx_217);
		*((word32) ds + 0x00009B9E) = dx_217;
		*((word32) ds + 0x00009B9C) = ax_216;
		*((word32) ds + 0x00009BA0) = 0x00;
		Eq_7775 si_226 = 0x03;
		while (Mem225[dx_ax_500 + si_226:byte] != 0x00)
		{
			if ((Mem225[ds:CONVERT(Mem225[dx_ax_500 + si_226:byte], byte, int16) + ~0x691C:byte] & 0x0C) != 0x00)
			{
				if (fn0800_3E0F(SEQ(dx_21, ax_20 + si_226)) >=u 0x03 && ((CONVERT(Mem258[ds:CONVERT(Mem258[dx_21:(ax_20 + 0x01) + si_226:byte], byte, int16) + ~0x691C:byte], byte, int16) & 0x0C) != 0x00 && (CONVERT(Mem258[ds:CONVERT(Mem258[dx_21:(ax_20 + 0x02) + si_226:byte], byte, int16) + ~0x691C:byte], byte, int16) & 0x0C) != 0x00))
				{
					fn0800_3E2E(SEQ(*((word32) ds + 0x00009B9A), *((word32) ds + 0x00009B98)), SEQ(dx_21, ax_20 + si_226), 0x03);
					((word32) ds + 0x00009B98)->u1->b0003 = 0x00;
					*((word32) ds + 0x00009BA0) = 0x01;
				}
				return;
			}
			si_226 = (word32) si_226 + 1;
		}
	}
}

// 0800:437B: Register word16 fn0800_437B(Register Eq_2 ds, Stack Eq_7590 wArg02, Stack uint16 wArg04, Stack Eq_7512 wArg06, Stack cu8 bArg08)
// Called from:
//      fn0800_3E5F
word16 fn0800_437B(Eq_2 ds, Eq_7590 wArg02, uint16 wArg04, Eq_7512 wArg06, cu8 bArg08)
{
	if (wArg04 == 0x00)
	{
		Eq_7512 si_156 = wArg06;
		if (wArg06 >= 0x3B && ((word16) wArg02 + 70 & 0x03) == 0x00)
			si_156 = wArg06 - 0x01;
		wArg04 = 0x00;
		while (SEQ(ds, ~0x6485)[wArg04 * 0x02] <=u si_156)
			++wArg04;
	}
	else
	{
		word16 v13_19 = wArg06 + SEQ(ds, ~0x6485)[(wArg04 - 0x01) * 0x02];
		wArg06 = v13_19;
		if (wArg04 > 0x03 && ((word16) wArg02 + 70 & 0x03) == 0x00)
			wArg06 = (word16) v13_19 + 1;
	}
	word16 ax_131;
	if (wArg04 < 0x04)
	{
l0800_4453:
		ax_131 = 0x00;
		return ax_131;
	}
	if (wArg04 != 0x04)
	{
		if (wArg04 > 0x0A)
			goto l0800_4453;
		if (wArg04 != 0x0A)
			goto l0800_444E;
	}
	Eq_7512 cx_104;
	if (wArg02 > 0x10 && wArg04 == 0x04)
		cx_104 = SEQ(ds, 39800)[wArg04 * 0x02] + 0x07;
	else
		cx_104 = SEQ(ds, ~0x6485)[wArg04 * 0x02];
	if (((byte) ((word16) wArg02 + 0x07B2) & 0x03) != 0x00)
		--cx_104;
	Eq_7512 cx_117 = cx_104 - (uint16) ((uint32) (((word16) (wArg02 * 0x016D) + ((word16) cx_104 + ((word16) wArg02 + 1 >> 0x02))) + 0x04) % 0x07);
	if (wArg04 == 0x04)
	{
		if (wArg06 <= cx_117 && (wArg06 != cx_117 || bArg08 < 0x02))
			goto l0800_4453;
	}
	else if (wArg06 >= cx_117 && (wArg06 != cx_117 || bArg08 > 0x01))
		goto l0800_4453;
l0800_444E:
	ax_131 = 0x01;
	return ax_131;
}

// 0800:44C8: Register Eq_2 fn0800_44C8(Register Eq_2 ds, Stack Eq_2 wArg04, Stack Eq_2 dwArg06, Stack Eq_2 wArg0A, Register out Eq_5079 bxOut)
// Called from:
//      fn0800_2C08
//      fn0800_4655
Eq_2 fn0800_44C8(Eq_2 ds, Eq_2 wArg04, Eq_2 dwArg06, Eq_2 wArg0A, union Eq_5079 & bxOut)
{
	Eq_2 ax_124;
	if (wArg04 >= *((word32) ds + 0x00009980))
		ax_124 = fn0800_05AD(ds, 0x06);
	else if (wArg0A < 0x01)
		ax_124.u0 = 0x00;
	else
	{
		if ((SEQ(ds, 0x9982)[wArg04 * 0x02] & 0x0800) != 0x00)
		{
			word16 cx_469;
			word16 dx_470;
			word16 bx_471;
			fn0800_06AB(ds, wArg04, 0x00, 0x02, out cx_469, out dx_470, out bx_471);
		}
		if ((SEQ(ds, 0x9982)[wArg04 * 0x02] & 0x4000) == 0x00)
			ax_124 = fn0800_4619(ds, wArg04, dwArg06, wArg0A, out bx);
		else
		{
			SEQ(ds, 0x9982)[wArg04 * 0x02] &= ~0x0200;
			bx = wArg04 << 0x01;
			Eq_2 wLoc08_297 = wArg0A;
			Eq_2 ptrLoc0E_310 = dwArg06;
			do
			{
				union Eq_2 * ptrLoc06_464 = fp - 0x90;
				do
				{
					Eq_2 si_176;
					Eq_2 dx_118;
					Eq_2 ax_127;
					word16 wLoc04_314 = SLICE(ptrLoc06_464, word16, 16);
					word16 wLoc0E_311 = (word16) ptrLoc0E_310;
					word16 wLoc0C_376 = SLICE(ptrLoc0E_310, word16, 16);
					word16 wLoc06_301 = (word16) ptrLoc06_464;
					union Eq_2 * ptrLoc06_315 = ptrLoc06_464;
					if (wLoc08_297 == 0x00)
					{
						si_176 = wLoc06_301 - (fp - 0x90);
						if (si_176 > 0x00)
						{
							Eq_2 ax_109 = fn0800_4619(ds, wArg04, fp - 0x90, si_176, out bx);
							dx_118 = ax_109;
							if (ax_109 != si_176)
							{
								if (ax_109 == ~0x00)
									goto l0800_45B8;
								ax_127 = wArg0A;
								goto l0800_460A;
							}
						}
						ax_124 = wArg0A;
						goto l0800_4613;
					}
					Eq_2 v20_128 = wLoc08_297 - 0x01;
					wLoc08_297 = v20_128;
					Eq_2 al_135 = *ptrLoc0E_310;
					ptrLoc0E_310 = SEQ(wLoc0C_376, wLoc0E_311 + 0x01);
					if (al_135 == 0x0A)
					{
						*ptrLoc06_464 = (union Eq_2 *) 0x0D;
						ptrLoc06_315 = SEQ(wLoc04_314, wLoc06_301 + 0x01);
					}
					*ptrLoc06_315 = (union Eq_2 *) al_135;
					word16 wLoc06_322 = (word16) ptrLoc06_315;
					cup16 dx_159 = wLoc06_322 + 0x01 - (fp - 0x90);
					Eq_5079 bx_162 = 0x00 - (dx_159 < 0x00);
					word16 wLoc04_378 = SLICE(ptrLoc06_315, word16, 16);
					bx = bx_162;
					ptrLoc06_464 = SEQ(wLoc04_378, wLoc06_322 + 0x01);
					if (bx_162 < 0x00)
						continue;
					if (bx_162 != 0x00)
						break;
					ptrLoc06_464 = SEQ(wLoc04_378, wLoc06_322 + 0x01);
				} while (dx_159 < 0x80);
				si_176 = wLoc06_322 + 0x01 - (fp - 0x90);
				Eq_2 ax_195 = fn0800_4619(ds, wArg04, fp - 0x90, si_176, out bx);
				dx_118 = ax_195;
			} while (ax_195 == si_176);
			if (ax_195 == ~0x00)
			{
l0800_45B8:
				ax_124.u0 = ~0x00;
			}
			else
			{
				ax_127 = wArg0A - v20_128;
l0800_460A:
				ax_124 = ax_127 + dx_118 - si_176;
			}
		}
	}
l0800_4613:
	bxOut = bx;
	return ax_124;
}

// 0800:4619: Register Eq_2 fn0800_4619(Register Eq_2 ds, Stack Eq_2 wArg04, Stack Eq_2 ptrArg06, Stack Eq_2 wArg0A, Register out Eq_2 bxOut)
// Called from:
//      fn0800_380A
//      fn0800_44C8
Eq_2 fn0800_4619(Eq_2 ds, Eq_2 wArg04, Eq_2 ptrArg06, Eq_2 wArg0A, union Eq_2 & bxOut)
{
	Eq_2 ax_37;
	Eq_2 wLoc04_62;
	Eq_2 bx_10 = wArg04 << 0x01;
	if ((SEQ(ds, 0x9982)[wArg04 * 0x02] & 0x01) != 0x00)
		wLoc04_62.u0 = 0x05;
	else
	{
		bx_10 = wArg04;
		Eq_2 ax_23;
		if (!msdos_write_file(wArg04, wArg0A, ptrArg06, out ax_23))
		{
			SEQ(ds, 0x9982)[wArg04 * 0x02] |= 0x1000;
			bx_10 = wArg04 << 0x01;
			ax_37 = ax_23;
l0800_4653:
			bxOut = bx_10;
			return ax_37;
		}
		wLoc04_62 = ax_23;
	}
	ax_37 = fn0800_05AD(ds, wLoc04_62);
	goto l0800_4653;
}

// 0800:4655: Register byte fn0800_4655(Register Eq_2 ds, Stack Eq_2 wArg04, Stack Eq_2 dwArg06, Stack Eq_2 wArg0A)
// Called from:
//      fn0E31_0002
//      fn0F2B_153F
byte fn0800_4655(Eq_2 ds, Eq_2 wArg04, Eq_2 dwArg06, Eq_2 wArg0A)
{
	word16 bx_19;
	return (byte) fn0800_44C8(ds, wArg04, dwArg06, wArg0A, out bx_19);
}

// 0800:46CD: Register uint16 fn0800_46CD(Stack segptr32 ptrArg04, Stack segptr32 ptrArg08, Stack cu16 wArg0C)
// Called from:
//      fn2476_0568
uint16 fn0800_46CD(segptr32 ptrArg04, segptr32 ptrArg08, cu16 wArg0C)
{
	struct Eq_8173 * es_60 = SLICE(ptrArg04, selector, 16);
	union Eq_8175 Eq_8173::* di_30 = (word16) ptrArg04;
	struct Eq_8177 * ds_58 = SLICE(ptrArg08, selector, 16);
	union Eq_8179 Eq_8177::* si_26 = (word16) ptrArg08;
	uint16 cx_20;
	for (cx_20 = wArg0C >> 0x01; cx_20 != 0x00; --cx_20)
	{
		es_60->*di_30 = ds_58->*si_26;
		si_26 = (union Eq_8179 Eq_8177::*) ((char *) si_26 + 2);
		di_30 = (union Eq_8175 Eq_8173::*) ((char *) di_30 + 2);
	}
	if (wArg0C >> 0x01 < 0x00)
		es_60->*di_30 = ds_58->*si_26;
	return cx_20;
}

// 0800:47A7: Register Eq_8207 fn0800_47A7(Stack segptr32 ptrArg04, Stack Eq_8209 ptrArg08)
// Called from:
//      fn268D_086A
Eq_8207 fn0800_47A7(segptr32 ptrArg04, Eq_8209 ptrArg08)
{
	struct Eq_8210 Eq_8212::* di_21 = (word16) ptrArg08;
	struct Eq_8212 * es_96 = SLICE(ptrArg08, selector, 16);
	word16 cx_26 = ~0x00;
	di_30 = di_21;
	do
	{
		struct Eq_8210 Eq_8212::* di_30;
		if (cx_26 == 0x00)
			break;
		di_30 = di_132 + 1;
		--cx_26;
		di_132 = di_30;
	} while ((es_96->*di_132).b0000 == 0x00);
	word16 cx_37 = ~cx_26;
	struct Eq_8210 Eq_8212::* di_134 = di_21;
	struct Eq_8220 * ds_97 = SLICE(ptrArg04, selector, 16);
	struct Eq_8222 Eq_8220::* si_133 = (word16) ptrArg04;
	while (cx_37 != 0x00)
	{
		++si_133;
		++di_134;
		--cx_37;
		if ((ds_97->*si_133).b0000 == (es_96->*di_134).b0000)
			return (ds_97->*si_133).bFFFFFFFF - (es_96->*di_134).bFFFFFFFF;
	}
	return (ds_97->*si_133).bFFFFFFFF - (es_96->*di_134).bFFFFFFFF;
}

// 0800:47D7: void fn0800_47D7(Stack Eq_8258 ptrArg04, Stack segptr32 ptrArg08)
// Called from:
//      fn268D_086A
void fn0800_47D7(Eq_8258 ptrArg04, segptr32 ptrArg08)
{
	byte Eq_8262::* di_17 = (word16) ptrArg08;
	struct Eq_8262 * es_73 = SLICE(ptrArg08, selector, 16);
	byte Eq_8262::* si_18 = di_17;
	word16 cx_22 = ~0x00;
	while (cx_22 != 0x00)
	{
		di_17 = di_124 + 1;
		--cx_22;
		di_124 = di_17;
		if (es_73->*di_124 != 0x00)
			break;
	}
	word16 cx_33;
	struct Eq_8269 * es_76 = SLICE(ptrArg04, selector, 16);
	byte Eq_8269::* di_68 = (word16) ptrArg04;
	for (cx_33 = ~cx_22; cx_33 != 0x00; --cx_33)
	{
		es_76->*di_68 = es_73->*si_18;
		++si_18;
		++di_68;
	}
}

